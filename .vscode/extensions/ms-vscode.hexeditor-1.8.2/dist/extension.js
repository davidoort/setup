var NS=Object.create;var Ua=Object.defineProperty;var wS=Object.getOwnPropertyDescriptor;var DS=Object.getOwnPropertyNames;var xS=Object.getPrototypeOf,MS=Object.prototype.hasOwnProperty;var If=e=>Ua(e,"__esModule",{value:!0});var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),LS=(e,t)=>{If(e);for(var r in t)Ua(e,r,{get:t[r],enumerable:!0})},qS=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of DS(t))!MS.call(e,n)&&n!=="default"&&Ua(e,n,{get:()=>t[n],enumerable:!(r=wS(t,n))||r.enumerable});return e},_r=e=>qS(If(Ua(e!=null?NS(xS(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var me=p((yM,Cf)=>{"use strict";var kS=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();Cf.exports=kS});var Oc=p(Ft=>{"use strict";var un=Ft&&Ft.__assign||function(){return un=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},un.apply(this,arguments)};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.AsyncScopeManager=Ft.OpenTelemetryScopeManagerWrapper=void 0;var vr=gr(),jS=require("events"),Of=function(){function e(){}return e.prototype.active=function(){var t=this,r=vr.CorrelationContextManager.getCurrentContext();return un(un({},r),{getValue:function(n){return t._activeSymbol?n===t._activeSymbol?r:!1:(t._activeSymbol=n,r)},setValue:function(){}})},e.prototype.with=function(t,r){var n=t.parentSpanId,i=t.name,a=e._spanToContext(t,n,i);return vr.CorrelationContextManager.runWithContext(a,r)()},e.prototype.bind=function(t){return typeof t=="function"?vr.CorrelationContextManager.wrapCallback(t):(t instanceof jS.EventEmitter&&vr.CorrelationContextManager.wrapEmitter(t),t)},e.prototype.enable=function(){return vr.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return vr.CorrelationContextManager.disable(),this},e._spanToContext=function(t,r,n){var i=r?"|"+t.spanContext().traceId+"."+r+".":t.spanContext().traceId,a=un(un({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),s=vr.CorrelationContextManager.spanToContextObject(a,i,n);return s},e}();Ft.OpenTelemetryScopeManagerWrapper=Of;Ft.AsyncScopeManager=new Of});var Vf=p((A,Gf)=>{A=Gf.exports=N;var j;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?j=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:j=function(){};A.SEMVER_SPEC_VERSION="2.0.0";var Pc=256,Ba=Number.MAX_SAFE_INTEGER||9007199254740991,Rc=16,B=A.re=[],_=A.src=[],O=0,ln=O++;_[ln]="0|[1-9]\\d*";var pn=O++;_[pn]="[0-9]+";var Nc=O++;_[Nc]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Pf=O++;_[Pf]="("+_[ln]+")\\.("+_[ln]+")\\.("+_[ln]+")";var Rf=O++;_[Rf]="("+_[pn]+")\\.("+_[pn]+")\\.("+_[pn]+")";var wc=O++;_[wc]="(?:"+_[ln]+"|"+_[Nc]+")";var Dc=O++;_[Dc]="(?:"+_[pn]+"|"+_[Nc]+")";var xc=O++;_[xc]="(?:-("+_[wc]+"(?:\\."+_[wc]+")*))";var Mc=O++;_[Mc]="(?:-?("+_[Dc]+"(?:\\."+_[Dc]+")*))";var Lc=O++;_[Lc]="[0-9A-Za-z-]+";var Ci=O++;_[Ci]="(?:\\+("+_[Lc]+"(?:\\."+_[Lc]+")*))";var qc=O++,Nf="v?"+_[Pf]+_[xc]+"?"+_[Ci]+"?";_[qc]="^"+Nf+"$";var kc="[v=\\s]*"+_[Rf]+_[Mc]+"?"+_[Ci]+"?",jc=O++;_[jc]="^"+kc+"$";var fn=O++;_[fn]="((?:<|>)?=?)";var Fa=O++;_[Fa]=_[pn]+"|x|X|\\*";var Ga=O++;_[Ga]=_[ln]+"|x|X|\\*";var mr=O++;_[mr]="[v=\\s]*("+_[Ga]+")(?:\\.("+_[Ga]+")(?:\\.("+_[Ga]+")(?:"+_[xc]+")?"+_[Ci]+"?)?)?";var dn=O++;_[dn]="[v=\\s]*("+_[Fa]+")(?:\\.("+_[Fa]+")(?:\\.("+_[Fa]+")(?:"+_[Mc]+")?"+_[Ci]+"?)?)?";var wf=O++;_[wf]="^"+_[fn]+"\\s*"+_[mr]+"$";var Df=O++;_[Df]="^"+_[fn]+"\\s*"+_[dn]+"$";var xf=O++;_[xf]="(?:^|[^\\d])(\\d{1,"+Rc+"})(?:\\.(\\d{1,"+Rc+"}))?(?:\\.(\\d{1,"+Rc+"}))?(?:$|[^\\d])";var Va=O++;_[Va]="(?:~>?)";var $a=O++;_[$a]="(\\s*)"+_[Va]+"\\s+";B[$a]=new RegExp(_[$a],"g");var HS="$1~",Mf=O++;_[Mf]="^"+_[Va]+_[mr]+"$";var Lf=O++;_[Lf]="^"+_[Va]+_[dn]+"$";var za=O++;_[za]="(?:\\^)";var Ka=O++;_[Ka]="(\\s*)"+_[za]+"\\s+";B[Ka]=new RegExp(_[Ka],"g");var US="$1^",qf=O++;_[qf]="^"+_[za]+_[mr]+"$";var kf=O++;_[kf]="^"+_[za]+_[dn]+"$";var Hc=O++;_[Hc]="^"+_[fn]+"\\s*("+kc+")$|^$";var Uc=O++;_[Uc]="^"+_[fn]+"\\s*("+Nf+")$|^$";var Oi=O++;_[Oi]="(\\s*)"+_[fn]+"\\s*("+kc+"|"+_[mr]+")";B[Oi]=new RegExp(_[Oi],"g");var BS="$1$2$3",jf=O++;_[jf]="^\\s*("+_[mr]+")\\s+-\\s+("+_[mr]+")\\s*$";var Hf=O++;_[Hf]="^\\s*("+_[dn]+")\\s+-\\s+("+_[dn]+")\\s*$";var Uf=O++;_[Uf]="(<|>)?=?\\s*\\*";for(var Er=0;Er<O;Er++)j(Er,_[Er]),B[Er]||(B[Er]=new RegExp(_[Er]));A.parse=yr;function yr(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof N)return e;if(typeof e!="string"||e.length>Pc)return null;var r=t.loose?B[jc]:B[qc];if(!r.test(e))return null;try{return new N(e,t)}catch(n){return null}}A.valid=FS;function FS(e,t){var r=yr(e,t);return r?r.version:null}A.clean=GS;function GS(e,t){var r=yr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}A.SemVer=N;function N(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof N){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Pc)throw new TypeError("version is longer than "+Pc+" characters");if(!(this instanceof N))return new N(e,t);j("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?B[jc]:B[qc]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ba||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ba||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ba||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Ba)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}N.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};N.prototype.toString=function(){return this.version};N.prototype.compare=function(e){return j("SemVer.compare",this.version,this.options,e),e instanceof N||(e=new N(e,this.options)),this.compareMain(e)||this.comparePre(e)};N.prototype.compareMain=function(e){return e instanceof N||(e=new N(e,this.options)),hn(this.major,e.major)||hn(this.minor,e.minor)||hn(this.patch,e.patch)};N.prototype.comparePre=function(e){if(e instanceof N||(e=new N(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(j("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return hn(r,n)}while(++t)};N.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};A.inc=VS;function VS(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new N(e,r).inc(t,n).version}catch(i){return null}}A.diff=$S;function $S(e,t){if(Bc(e,t))return null;var r=yr(e),n=yr(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}A.compareIdentifiers=hn;var Bf=/^[0-9]+$/;function hn(e,t){var r=Bf.test(e),n=Bf.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}A.rcompareIdentifiers=zS;function zS(e,t){return hn(t,e)}A.major=KS;function KS(e,t){return new N(e,t).major}A.minor=XS;function XS(e,t){return new N(e,t).minor}A.patch=WS;function WS(e,t){return new N(e,t).patch}A.compare=At;function At(e,t,r){return new N(e,r).compare(new N(t,r))}A.compareLoose=YS;function YS(e,t){return At(e,t,!0)}A.rcompare=QS;function QS(e,t,r){return At(t,e,r)}A.sort=ZS;function ZS(e,t){return e.sort(function(r,n){return A.compare(r,n,t)})}A.rsort=JS;function JS(e,t){return e.sort(function(r,n){return A.rcompare(r,n,t)})}A.gt=Pi;function Pi(e,t,r){return At(e,t,r)>0}A.lt=Xa;function Xa(e,t,r){return At(e,t,r)<0}A.eq=Bc;function Bc(e,t,r){return At(e,t,r)===0}A.neq=Ff;function Ff(e,t,r){return At(e,t,r)!==0}A.gte=Fc;function Fc(e,t,r){return At(e,t,r)>=0}A.lte=Gc;function Gc(e,t,r){return At(e,t,r)<=0}A.cmp=Wa;function Wa(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Bc(e,r,n);case"!=":return Ff(e,r,n);case">":return Pi(e,r,n);case">=":return Fc(e,r,n);case"<":return Xa(e,r,n);case"<=":return Gc(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}A.Comparator=Ke;function Ke(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ke){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Ke))return new Ke(e,t);j("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ri?this.value="":this.value=this.operator+this.semver.version,j("comp",this)}var Ri={};Ke.prototype.parse=function(e){var t=this.options.loose?B[Hc]:B[Uc],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new N(r[2],this.options.loose):this.semver=Ri};Ke.prototype.toString=function(){return this.value};Ke.prototype.test=function(e){return j("Comparator.test",e,this.options.loose),this.semver===Ri?!0:(typeof e=="string"&&(e=new N(e,this.options)),Wa(e,this.operator,this.semver,this.options))};Ke.prototype.intersects=function(e,t){if(!(e instanceof Ke))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new Z(e.value,t),Ya(this.value,r,t);if(e.operator==="")return r=new Z(this.value,t),Ya(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Wa(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Wa(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||c};A.Range=Z;function Z(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Z)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Z(e.raw,t);if(e instanceof Ke)return new Z(e.value,t);if(!(this instanceof Z))return new Z(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}Z.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};Z.prototype.toString=function(){return this.range};Z.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?B[Hf]:B[jf];e=e.replace(r,ub),j("hyphen replace",e),e=e.replace(B[Oi],BS),j("comparator trim",e,B[Oi]),e=e.replace(B[$a],HS),e=e.replace(B[Ka],US),e=e.split(/\s+/).join(" ");var n=t?B[Hc]:B[Uc],i=e.split(" ").map(function(a){return tb(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new Ke(a,this.options)},this),i};Z.prototype.intersects=function(e,t){if(!(e instanceof Z))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};A.toComparators=eb;function eb(e,t){return new Z(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function tb(e,t){return j("comp",e,t),e=ib(e,t),j("caret",e),e=rb(e,t),j("tildes",e),e=sb(e,t),j("xrange",e),e=cb(e,t),j("stars",e),e}function De(e){return!e||e.toLowerCase()==="x"||e==="*"}function rb(e,t){return e.trim().split(/\s+/).map(function(r){return nb(r,t)}).join(" ")}function nb(e,t){var r=t.loose?B[Lf]:B[Mf];return e.replace(r,function(n,i,a,s,o){j("tilde",e,n,i,a,s,o);var c;return De(i)?c="":De(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":De(s)?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(j("replaceTilde pr",o),c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",j("tilde return",c),c})}function ib(e,t){return e.trim().split(/\s+/).map(function(r){return ab(r,t)}).join(" ")}function ab(e,t){j("caret",e,t);var r=t.loose?B[kf]:B[qf];return e.replace(r,function(n,i,a,s,o){j("caret",e,n,i,a,s,o);var c;return De(i)?c="":De(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":De(s)?i==="0"?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(j("replaceCaret pr",o),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(j("no pr"),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),j("caret return",c),c})}function sb(e,t){return j("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return ob(r,t)}).join(" ")}function ob(e,t){e=e.trim();var r=t.loose?B[Df]:B[wf];return e.replace(r,function(n,i,a,s,o,c){j("xRange",e,n,i,a,s,o,c);var u=De(a),l=u||De(s),f=l||De(o),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),o=0,i===">"?(i=">=",l?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",l?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):l?n=">="+a+".0.0 <"+(+a+1)+".0.0":f&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),j("xRange return",n),n})}function cb(e,t){return j("replaceStars",e,t),e.trim().replace(B[Uf],"")}function ub(e,t,r,n,i,a,s,o,c,u,l,f,d){return De(r)?t="":De(n)?t=">="+r+".0.0":De(i)?t=">="+r+"."+n+".0":t=">="+t,De(c)?o="":De(u)?o="<"+(+c+1)+".0.0":De(l)?o="<"+c+"."+(+u+1)+".0":f?o="<="+c+"."+u+"."+l+"-"+f:o="<="+o,(t+" "+o).trim()}Z.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new N(e,this.options));for(var t=0;t<this.set.length;t++)if(lb(this.set[t],e,this.options))return!0;return!1};function lb(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(j(e[n].semver),e[n].semver!==Ri&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}A.satisfies=Ya;function Ya(e,t,r){try{t=new Z(t,r)}catch(n){return!1}return t.test(e)}A.maxSatisfying=pb;function pb(e,t,r){var n=null,i=null;try{var a=new Z(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new N(n,r))}),n}A.minSatisfying=fb;function fb(e,t,r){var n=null,i=null;try{var a=new Z(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new N(n,r))}),n}A.minVersion=db;function db(e,t){e=new Z(e,t);var r=new N("0.0.0");if(e.test(r)||(r=new N("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new N(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Pi(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}A.validRange=hb;function hb(e,t){try{return new Z(e,t).range||"*"}catch(r){return null}}A.ltr=_b;function _b(e,t,r){return Vc(e,t,"<",r)}A.gtr=vb;function vb(e,t,r){return Vc(e,t,">",r)}A.outside=Vc;function Vc(e,t,r,n){e=new N(e,n),t=new Z(t,n);var i,a,s,o,c;switch(r){case">":i=Pi,a=Gc,s=Xa,o=">",c=">=";break;case"<":i=Xa,a=Fc,s=Pi,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ya(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(h){h.semver===Ri&&(h=new Ke(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,n)?f=h:s(h.semver,d.semver,n)&&(d=h)}),f.operator===o||f.operator===c||(!d.operator||d.operator===o)&&a(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}A.prerelease=gb;function gb(e,t){var r=yr(e,t);return r&&r.prerelease.length?r.prerelease:null}A.intersects=mb;function mb(e,t,r){return e=new Z(e,r),t=new Z(t,r),e.intersects(t)}A.coerce=Eb;function Eb(e){if(e instanceof N)return e;if(typeof e!="string")return null;var t=e.match(B[xf]);return t==null?null:yr(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var $c=p(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.makePatchingRequire=void 0;var yb=require("path"),Tb=Vf(),$f=require("module"),Sb=Object.keys(process.binding("natives")),zf=$f.prototype.require;function bb(e){var t={};return function(n){var i=zf.apply(this,arguments);if(e[n]){var a=$f._resolveFilename(n,this);if(t.hasOwnProperty(a))return t[a];var s=void 0;if(Sb.indexOf(n)<0)try{s=zf.call(this,yb.join(n,"package.json")).version}catch(d){return i}else s=process.version.substring(1);var o=s.indexOf("-");o>=0&&(s=s.substring(0,o));for(var c=i,u=0,l=e[n];u<l.length;u++){var f=l[u];Tb.satisfies(s,f.versionSpecifier)&&(c=f.patch(c,a))}return t[a]=c}return i}}Qa.makePatchingRequire=bb});var Kf=p((bM,Ab)=>{Ab.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var ue=p(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.channel=_n.makePatchingRequire=void 0;var Ib=$c(),Cb=$c();Object.defineProperty(_n,"makePatchingRequire",{enumerable:!0,get:function(){return Cb.makePatchingRequire}});var Xf=function(e){return!0},Ob=function(){function e(){this.version=Kf().version,this.subscribers={},this.contextPreservationFunction=function(t){return t},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(t){var r=this.subscribers[t];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},e.prototype.publish=function(t,r){if(!this.currentlyPublishing){var n=this.subscribers[t];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(a){var s=a.listener,o=a.filter;try{o&&o(!0)&&s(i)}catch(c){}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(t,r,n){n===void 0&&(n=Xf),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:r,filter:n})},e.prototype.unsubscribe=function(t,r,n){n===void 0&&(n=Xf);var i=this.subscribers[t];if(i){for(var a=0;a<i.length;++a)if(i[a].listener===r&&i[a].filter===n)return i.splice(a,1),!0}return!1},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete t.knownPatches[r]})},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t)},e.prototype.addContextPreservation=function(t){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return t(r(n))}},e.prototype.registerMonkeyPatch=function(t,r){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(r)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new Ob,Wf=require("module"),Wf.prototype.require=Ib.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var Wf;_n.channel=global.diagnosticsSource});var Qf=p(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0})});var Zf=p(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.BaggageImpl=void 0;var Pb=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,a=t;i<a.length;i++){var s=a[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();Za.BaggageImpl=Pb});var Jf=p(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.baggageEntryMetadataSymbol=void 0;Ja.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var zc=p(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.baggageEntryMetadataFromString=vn.createBaggage=void 0;var Rb=F(),Nb=Zf(),wb=Jf();function Db(e){return e===void 0&&(e={}),new Nb.BaggageImpl(new Map(Object.entries(e)))}vn.createBaggage=Db;function xb(e){return typeof e!="string"&&(Rb.diag.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:wb.baggageEntryMetadataSymbol,toString:function(){return e}}}vn.baggageEntryMetadataFromString=xb});var td=p(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0})});var nd=p(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0})});var id=p(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.DiagConsoleLogger=void 0;var Kc=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Mb=function(){function e(){function t(n){return function(){var i=arguments;if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,i)}}}for(var r=0;r<Kc.length;r++)this[Kc[r].n]=t(Kc[r].c)}return e}();es.DiagConsoleLogger=Mb});var ts=p(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.DiagLogLevel=void 0;var Lb;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Lb=Ni.DiagLogLevel||(Ni.DiagLogLevel={}))});var sd=p(Gt=>{"use strict";var qb=Gt&&Gt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ad=Gt&&Gt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qb(t,e,r)};Object.defineProperty(Gt,"__esModule",{value:!0});ad(id(),Gt);ad(ts(),Gt)});var Xc=p(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.defaultTextMapSetter=gn.defaultTextMapGetter=void 0;gn.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}};gn.defaultTextMapSetter={set:function(e,t,r){e!=null&&(e[t]=r)}}});var cd=p(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0})});var ld=p(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0})});var wi=p(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.ROOT_CONTEXT=mn.createContextKey=void 0;function kb(e){return Symbol.for(e)}mn.createContextKey=kb;var jb=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new e(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}();mn.ROOT_CONTEXT=new jb});var Wc=p(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.TraceFlags=void 0;var Hb;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Hb=Di.TraceFlags||(Di.TraceFlags={}))});var xi=p(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.wrapSpanContext=fe.isSpanContextValid=fe.isValidSpanId=fe.isValidTraceId=fe.INVALID_SPAN_CONTEXT=fe.INVALID_TRACEID=fe.INVALID_SPANID=void 0;var Ub=rs(),Bb=Wc(),Fb=/^([0-9a-f]{32})$/i,Gb=/^[0-9a-f]{16}$/i;fe.INVALID_SPANID="0000000000000000";fe.INVALID_TRACEID="00000000000000000000000000000000";fe.INVALID_SPAN_CONTEXT={traceId:fe.INVALID_TRACEID,spanId:fe.INVALID_SPANID,traceFlags:Bb.TraceFlags.NONE};function pd(e){return Fb.test(e)&&e!==fe.INVALID_TRACEID}fe.isValidTraceId=pd;function fd(e){return Gb.test(e)&&e!==fe.INVALID_SPANID}fe.isValidSpanId=fd;function Vb(e){return pd(e.traceId)&&fd(e.spanId)}fe.isSpanContextValid=Vb;function $b(e){return new Ub.NonRecordingSpan(e)}fe.wrapSpanContext=$b});var rs=p(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.NonRecordingSpan=void 0;var zb=xi(),Kb=function(){function e(t){t===void 0&&(t=zb.INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();ns.NonRecordingSpan=Kb});var Qc=p(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getSpanContext=Xe.setSpanContext=Xe.deleteSpan=Xe.setSpan=Xe.getSpan=void 0;var Xb=wi(),Wb=rs(),Yc=Xb.createContextKey("OpenTelemetry Context Key SPAN");function dd(e){return e.getValue(Yc)||void 0}Xe.getSpan=dd;function hd(e,t){return e.setValue(Yc,t)}Xe.setSpan=hd;function Yb(e){return e.deleteValue(Yc)}Xe.deleteSpan=Yb;function Qb(e,t){return hd(e,new Wb.NonRecordingSpan(t))}Xe.setSpanContext=Qb;function Zb(e){var t;return(t=dd(e))===null||t===void 0?void 0:t.spanContext()}Xe.getSpanContext=Zb});var Jc=p(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.NoopTracer=void 0;var _d=F(),vd=Qc(),Zc=rs(),Jb=xi(),eA=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new Zc.NonRecordingSpan;var a=n&&vd.getSpanContext(n);return tA(a)&&Jb.isSpanContextValid(a)?new Zc.NonRecordingSpan(a):new Zc.NonRecordingSpan},e.prototype.startActiveSpan=function(t,r,n,i){var a,s,o;if(!(arguments.length<2)){arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);var c=s??_d.context.active(),u=this.startSpan(t,a,c),l=vd.setSpan(c,u);return _d.context.with(l,o,void 0,u)}},e}();is.NoopTracer=eA;function tA(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var eu=p(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.ProxyTracer=void 0;var rA=Jc(),nA=function(){function e(t,r,n){this._provider=t,this.name=r,this.version=n}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version);return t?(this._delegate=t,this._delegate):new rA.NoopTracer},e}();as.ProxyTracer=nA});var gd=p(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.NoopTracerProvider=void 0;var iA=Jc(),aA=function(){function e(){}return e.prototype.getTracer=function(t,r){return new iA.NoopTracer},e}();ss.NoopTracerProvider=aA});var tu=p(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.ProxyTracerProvider=void 0;var sA=eu(),oA=gd(),cA=new oA.NoopTracerProvider,uA=function(){function e(){}return e.prototype.getTracer=function(t,r){var n;return(n=this.getDelegateTracer(t,r))!==null&&n!==void 0?n:new sA.ProxyTracer(this,t,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:cA},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r)},e}();os.ProxyTracerProvider=uA});var Ed=p(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0})});var yd=p(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.SamplingDecision=void 0;var lA;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(lA=Mi.SamplingDecision||(Mi.SamplingDecision={}))});var Sd=p(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0})});var bd=p(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.SpanKind=void 0;var pA;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(pA=Li.SpanKind||(Li.SpanKind={}))});var Id=p(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0})});var Od=p(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0})});var Pd=p(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.SpanStatusCode=void 0;var fA;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(fA=qi.SpanStatusCode||(qi.SpanStatusCode={}))});var Nd=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0})});var Dd=p(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0})});var Md=p(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0})});var qd=p(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0})});var kd=p(En=>{"use strict";var dA=En&&En.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(En,"__esModule",{value:!0});En.NoopContextManager=void 0;var hA=wi(),_A=function(){function e(){}return e.prototype.active=function(){return hA.ROOT_CONTEXT},e.prototype.with=function(t,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,dA([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();En.NoopContextManager=_A});var jd=p(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs._globalThis=void 0;cs._globalThis=typeof globalThis=="object"?globalThis:global});var Hd=p(Tr=>{"use strict";var vA=Tr&&Tr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gA=Tr&&Tr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vA(t,e,r)};Object.defineProperty(Tr,"__esModule",{value:!0});gA(jd(),Tr)});var Ud=p(Sr=>{"use strict";var mA=Sr&&Sr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),EA=Sr&&Sr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mA(t,e,r)};Object.defineProperty(Sr,"__esModule",{value:!0});EA(Hd(),Sr)});var ru=p(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.VERSION=void 0;us.VERSION="1.0.1"});var Gd=p(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.isCompatible=yn._makeCompatibilityCheck=void 0;var yA=ru(),Bd=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function Fd(e){var t=new Set([e]),r=new Set,n=e.match(Bd);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3]};function a(o){return r.add(o),!1}function s(o){return t.add(o),!0}return function(c){if(t.has(c))return!0;if(r.has(c))return!1;var u=c.match(Bd);if(!u)return a(c);var l={major:+u[1],minor:+u[2],patch:+u[3]};return i.major!==l.major?a(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):a(c):i.minor<=l.minor?s(c):a(c)}}yn._makeCompatibilityCheck=Fd;yn.isCompatible=Fd(yA.VERSION)});var Tn=p(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.unregisterGlobal=Vt.getGlobal=Vt.registerGlobal=void 0;var TA=Ud(),ki=ru(),SA=Gd(),bA=ki.VERSION.split(".")[0],ji=Symbol.for("opentelemetry.js.api."+bA),Hi=TA._globalThis;function AA(e,t,r,n){var i;n===void 0&&(n=!1);var a=Hi[ji]=(i=Hi[ji])!==null&&i!==void 0?i:{version:ki.VERSION};if(!n&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(a.version!==ki.VERSION){var s=new Error("@opentelemetry/api: All API registration versions must match");return r.error(s.stack||s.message),!1}return a[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+ki.VERSION+"."),!0}Vt.registerGlobal=AA;function IA(e){var t,r,n=(t=Hi[ji])===null||t===void 0?void 0:t.version;if(!(!n||!SA.isCompatible(n)))return(r=Hi[ji])===null||r===void 0?void 0:r[e]}Vt.getGlobal=IA;function CA(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ki.VERSION+".");var r=Hi[ji];r&&delete r[e]}Vt.unregisterGlobal=CA});var Vd=p(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.DiagComponentLogger=void 0;var OA=Tn(),PA=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ui("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ui("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ui("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ui("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Ui("verbose",this._namespace,t)},e}();ls.DiagComponentLogger=PA;function Ui(e,t,r){var n=OA.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}});var $d=p(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.createLogLevelDiagLogger=void 0;var It=ts();function RA(e,t){e<It.DiagLogLevel.NONE?e=It.DiagLogLevel.NONE:e>It.DiagLogLevel.ALL&&(e=It.DiagLogLevel.ALL),t=t||{};function r(n,i){var a=t[n];return typeof a=="function"&&e>=i?a.bind(t):function(){}}return{error:r("error",It.DiagLogLevel.ERROR),warn:r("warn",It.DiagLogLevel.WARN),info:r("info",It.DiagLogLevel.INFO),debug:r("debug",It.DiagLogLevel.DEBUG),verbose:r("verbose",It.DiagLogLevel.VERBOSE)}}ps.createLogLevelDiagLogger=RA});var Bi=p(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.DiagAPI=void 0;var NA=Vd(),wA=$d(),DA=ts(),fs=Tn(),xA="diag",MA=function(){function e(){function t(n){return function(){var i=fs.getGlobal("diag");if(!!i)return i[n].apply(i,arguments)}}var r=this;r.setLogger=function(n,i){var a,s;if(i===void 0&&(i=DA.DiagLogLevel.INFO),n===r){var o=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=o.stack)!==null&&a!==void 0?a:o.message),!1}var c=fs.getGlobal("diag"),u=wA.createLogLevelDiagLogger(i,n);if(c){var l=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+l),u.warn("Current logger will overwrite one already registered from "+l)}return fs.registerGlobal("diag",u,r,!0)},r.disable=function(){fs.unregisterGlobal(xA,r)},r.createComponentLogger=function(n){return new NA.DiagComponentLogger(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();ds.DiagAPI=MA});var Kd=p(Sn=>{"use strict";var LA=Sn&&Sn.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ContextAPI=void 0;var qA=kd(),nu=Tn(),zd=Bi(),iu="context",kA=new qA.NoopContextManager,jA=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return nu.registerGlobal(iu,t,zd.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,LA([t,r,n],a))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return nu.getGlobal(iu)||kA},e.prototype.disable=function(){this._getContextManager().disable(),nu.unregisterGlobal(iu,zd.DiagAPI.instance())},e}();Sn.ContextAPI=jA});var Qd=p(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.TraceAPI=void 0;var au=Tn(),Xd=tu(),Wd=xi(),Fi=Qc(),Yd=Bi(),su="trace",HA=function(){function e(){this._proxyTracerProvider=new Xd.ProxyTracerProvider,this.wrapSpanContext=Wd.wrapSpanContext,this.isSpanContextValid=Wd.isSpanContextValid,this.deleteSpan=Fi.deleteSpan,this.getSpan=Fi.getSpan,this.getSpanContext=Fi.getSpanContext,this.setSpan=Fi.setSpan,this.setSpanContext=Fi.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){return this._proxyTracerProvider.setDelegate(t),au.registerGlobal(su,this._proxyTracerProvider,Yd.DiagAPI.instance())},e.prototype.getTracerProvider=function(){return au.getGlobal(su)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){au.unregisterGlobal(su,Yd.DiagAPI.instance()),this._proxyTracerProvider=new Xd.ProxyTracerProvider},e}();hs.TraceAPI=HA});var Zd=p(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.NoopTextMapPropagator=void 0;var UA=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}();_s.NoopTextMapPropagator=UA});var Jd=p($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.deleteBaggage=$t.setBaggage=$t.getBaggage=void 0;var BA=wi(),ou=BA.createContextKey("OpenTelemetry Baggage Key");function FA(e){return e.getValue(ou)||void 0}$t.getBaggage=FA;function GA(e,t){return e.setValue(ou,t)}$t.setBaggage=GA;function VA(e){return e.deleteValue(ou)}$t.deleteBaggage=VA});var rh=p(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.PropagationAPI=void 0;var cu=Tn(),$A=Zd(),eh=Xc(),uu=Jd(),zA=zc(),th=Bi(),lu="propagation",KA=new $A.NoopTextMapPropagator,XA=function(){function e(){this.createBaggage=zA.createBaggage,this.getBaggage=uu.getBaggage,this.setBaggage=uu.setBaggage,this.deleteBaggage=uu.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return cu.registerGlobal(lu,t,th.DiagAPI.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=eh.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=eh.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){cu.unregisterGlobal(lu,th.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return cu.getGlobal(lu)||KA},e}();vs.PropagationAPI=XA});var F=p(y=>{"use strict";var WA=y&&y.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ne=y&&y.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&WA(t,e,r)};Object.defineProperty(y,"__esModule",{value:!0});y.diag=y.propagation=y.trace=y.context=y.isValidSpanId=y.isValidTraceId=y.isSpanContextValid=y.INVALID_SPAN_CONTEXT=y.INVALID_TRACEID=y.INVALID_SPANID=y.baggageEntryMetadataFromString=void 0;ne(Qf(),y);var YA=zc();Object.defineProperty(y,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return YA.baggageEntryMetadataFromString}});ne(td(),y);ne(nd(),y);ne(sd(),y);ne(Xc(),y);ne(cd(),y);ne(ld(),y);ne(eu(),y);ne(tu(),y);ne(Ed(),y);ne(yd(),y);ne(Sd(),y);ne(bd(),y);ne(Id(),y);ne(Od(),y);ne(Pd(),y);ne(Wc(),y);ne(Nd(),y);ne(Dd(),y);ne(Md(),y);var bn=xi();Object.defineProperty(y,"INVALID_SPANID",{enumerable:!0,get:function(){return bn.INVALID_SPANID}});Object.defineProperty(y,"INVALID_TRACEID",{enumerable:!0,get:function(){return bn.INVALID_TRACEID}});Object.defineProperty(y,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return bn.INVALID_SPAN_CONTEXT}});Object.defineProperty(y,"isSpanContextValid",{enumerable:!0,get:function(){return bn.isSpanContextValid}});Object.defineProperty(y,"isValidTraceId",{enumerable:!0,get:function(){return bn.isValidTraceId}});Object.defineProperty(y,"isValidSpanId",{enumerable:!0,get:function(){return bn.isValidSpanId}});ne(wi(),y);ne(qd(),y);var QA=Kd();y.context=QA.ContextAPI.getInstance();var ZA=Qd();y.trace=ZA.TraceAPI.getInstance();var JA=rh();y.propagation=JA.PropagationAPI.getInstance();var eI=Bi();y.diag=eI.DiagAPI.instance();y.default={trace:y.trace,context:y.context,propagation:y.propagation,diag:y.diag}});var gs=p(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.isTracingSuppressed=zt.unsuppressTracing=zt.suppressTracing=void 0;var tI=F(),pu=tI.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function rI(e){return e.setValue(pu,!0)}zt.suppressTracing=rI;function nI(e){return e.deleteValue(pu)}zt.unsuppressTracing=nI;function iI(e){return e.getValue(pu)===!0}zt.isTracingSuppressed=iI});var fu=p(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.BAGGAGE_MAX_TOTAL_LENGTH=Oe.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Oe.BAGGAGE_MAX_NAME_VALUE_PAIRS=Oe.BAGGAGE_HEADER=Oe.BAGGAGE_ITEMS_SEPARATOR=Oe.BAGGAGE_PROPERTIES_SEPARATOR=Oe.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Oe.BAGGAGE_KEY_PAIR_SEPARATOR="=";Oe.BAGGAGE_PROPERTIES_SEPARATOR=";";Oe.BAGGAGE_ITEMS_SEPARATOR=",";Oe.BAGGAGE_HEADER="baggage";Oe.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Oe.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Oe.BAGGAGE_MAX_TOTAL_LENGTH=8192});var du=p(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.parseKeyPairsIntoRecord=at.parsePairKeyValue=at.getKeyPairs=at.serializeKeyPairs=void 0;var aI=F(),An=fu(),sI=e=>e.reduce((t,r)=>{let n=`${t}${t!==""?An.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>An.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"");at.serializeKeyPairs=sI;var oI=e=>e.getAllEntries().map(([t,r])=>`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`);at.getKeyPairs=oI;var cI=e=>{let t=e.split(An.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.split(An.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;let i=decodeURIComponent(n[0].trim()),a=decodeURIComponent(n[1].trim()),s;return t.length>0&&(s=aI.baggageEntryMetadataFromString(t.join(An.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:a,metadata:s}};at.parsePairKeyValue=cI;var uI=e=>typeof e!="string"||e.length===0?{}:e.split(An.BAGGAGE_ITEMS_SEPARATOR).map(t=>at.parsePairKeyValue(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{});at.parseKeyPairsIntoRecord=uI});var ih=p(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.HttpBaggagePropagator=void 0;var hu=F(),lI=gs(),In=fu(),_u=du(),nh=class{inject(t,r,n){let i=hu.propagation.getBaggage(t);if(!i||lI.isTracingSuppressed(t))return;let a=_u.getKeyPairs(i).filter(o=>o.length<=In.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,In.BAGGAGE_MAX_NAME_VALUE_PAIRS),s=_u.serializeKeyPairs(a);s.length>0&&n.set(r,In.BAGGAGE_HEADER,s)}extract(t,r,n){let i=n.get(r,In.BAGGAGE_HEADER);if(!i)return t;let a={};return i.length===0||(i.split(In.BAGGAGE_ITEMS_SEPARATOR).forEach(o=>{let c=_u.parsePairKeyValue(o);if(c){let u={value:c.value};c.metadata&&(u.metadata=c.metadata),a[c.key]=u}}),Object.entries(a).length===0)?t:hu.propagation.setBaggage(t,hu.propagation.createBaggage(a))}fields(){return[In.BAGGAGE_HEADER]}};ms.HttpBaggagePropagator=nh});var oh=p(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.isAttributeValue=Cn.sanitizeAttributes=void 0;function pI(e){let t={};if(e==null||typeof e!="object")return t;for(let[r,n]of Object.entries(e))ah(n)&&(Array.isArray(n)?t[r]=n.slice():t[r]=n);return t}Cn.sanitizeAttributes=pI;function ah(e){return e==null?!0:Array.isArray(e)?fI(e):sh(e)}Cn.isAttributeValue=ah;function fI(e){let t;for(let r of e)if(r!=null){if(!t){if(sh(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function sh(e){switch(typeof e){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}});var vu=p(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.loggingErrorHandler=void 0;var dI=F();function hI(){return e=>{dI.diag.error(_I(e))}}Es.loggingErrorHandler=hI;function _I(e){return typeof e=="string"?e:JSON.stringify(vI(e))}function vI(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var gu=p(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.globalErrorHandler=On.setGlobalErrorHandler=void 0;var gI=vu(),ch=gI.loggingErrorHandler();function mI(e){ch=e}On.setGlobalErrorHandler=mI;var EI=e=>{try{ch(e)}catch(t){}};On.globalErrorHandler=EI});var mu=p(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.TracesSamplerValues=void 0;var yI;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(yI=Gi.TracesSamplerValues||(Gi.TracesSamplerValues={}))});var Eu=p(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.parseEnvironment=br.DEFAULT_ENVIRONMENT=void 0;var Kt=F(),TI=mu(),SI=",",bI=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function AI(e){return bI.indexOf(e)>-1}var II=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function CI(e){return II.indexOf(e)>-1}br.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Kt.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:TI.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function OI(e,t,r,n=-1/0,i=1/0){if(typeof r[e]!="undefined"){let a=Number(r[e]);isNaN(a)||(a<n?t[e]=n:a>i?t[e]=i:t[e]=a)}}function PI(e,t,r,n=SI){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(a=>a.trim()))}var RI={ALL:Kt.DiagLogLevel.ALL,VERBOSE:Kt.DiagLogLevel.VERBOSE,DEBUG:Kt.DiagLogLevel.DEBUG,INFO:Kt.DiagLogLevel.INFO,WARN:Kt.DiagLogLevel.WARN,ERROR:Kt.DiagLogLevel.ERROR,NONE:Kt.DiagLogLevel.NONE};function NI(e,t,r){let n=r[e];if(typeof n=="string"){let i=RI[n.toUpperCase()];i!=null&&(t[e]=i)}}function wI(e){let t={};for(let r in br.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":NI(n,t,e);break;default:if(AI(n))OI(n,t,e);else if(CI(n))PI(n,t,e);else{let i=e[n];typeof i!="undefined"&&i!==null&&(t[n]=String(i))}}}return t}br.parseEnvironment=wI});var lh=p(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.getEnv=void 0;var DI=require("os"),uh=Eu();function xI(){let e=uh.parseEnvironment(process.env);return Object.assign({HOSTNAME:DI.hostname()},uh.DEFAULT_ENVIRONMENT,e)}ys.getEnv=xI});var ph=p(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.hexToBase64=void 0;function MI(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let i=e.substring(n,n+2),a=parseInt(i,16);r+=String.fromCharCode(a)}return Buffer.from(r,"ascii").toString("base64")}Ts.hexToBase64=MI});var _h=p(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.RandomIdGenerator=void 0;var LI=8,fh=16,dh=class{constructor(){this.generateTraceId=hh(fh),this.generateSpanId=hh(LI)}};bs.RandomIdGenerator=dh;var Ss=Buffer.allocUnsafe(fh);function hh(e){return function(){for(let r=0;r<e/4;r++)Ss.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Ss[r]>0);r++)r===e-1&&(Ss[e-1]=1);return Ss.toString("hex",0,e)}}});var vh=p(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.otperformance=void 0;var qI=require("perf_hooks");As.otperformance=qI.performance});var Cs=p(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.VERSION=void 0;Is.VERSION="0.23.0"});var gh=p(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.RpcGrpcStatusCodeValues=x.MessagingOperationValues=x.MessagingDestinationKindValues=x.HttpFlavorValues=x.NetTransportValues=x.FaasInvokedProviderValues=x.FaasDocumentOperationValues=x.FaasTriggerValues=x.DbCassandraConsistencyLevelValues=x.DbSystemValues=x.SemanticAttributes=void 0;x.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var kI;(function(e){e.OTHER_SQL="other_sql",e.MSSQL="mssql",e.MYSQL="mysql",e.ORACLE="oracle",e.DB2="db2",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.HIVE="hive",e.CLOUDSCAPE="cloudscape",e.HSQLDB="hsqldb",e.PROGRESS="progress",e.MAXDB="maxdb",e.HANADB="hanadb",e.INGRES="ingres",e.FIRSTSQL="firstsql",e.EDB="edb",e.CACHE="cache",e.ADABAS="adabas",e.FIREBIRD="firebird",e.DERBY="derby",e.FILEMAKER="filemaker",e.INFORMIX="informix",e.INSTANTDB="instantdb",e.INTERBASE="interbase",e.MARIADB="mariadb",e.NETEZZA="netezza",e.PERVASIVE="pervasive",e.POINTBASE="pointbase",e.SQLITE="sqlite",e.SYBASE="sybase",e.TERADATA="teradata",e.VERTICA="vertica",e.H2="h2",e.COLDFUSION="coldfusion",e.CASSANDRA="cassandra",e.HBASE="hbase",e.MONGODB="mongodb",e.REDIS="redis",e.COUCHBASE="couchbase",e.COUCHDB="couchdb",e.COSMOSDB="cosmosdb",e.DYNAMODB="dynamodb",e.NEO4J="neo4j",e.GEODE="geode",e.ELASTICSEARCH="elasticsearch",e.MEMCACHED="memcached",e.COCKROACHDB="cockroachdb"})(kI=x.DbSystemValues||(x.DbSystemValues={}));var jI;(function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"})(jI=x.DbCassandraConsistencyLevelValues||(x.DbCassandraConsistencyLevelValues={}));var HI;(function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"})(HI=x.FaasTriggerValues||(x.FaasTriggerValues={}));var UI;(function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"})(UI=x.FaasDocumentOperationValues||(x.FaasDocumentOperationValues={}));var BI;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(BI=x.FaasInvokedProviderValues||(x.FaasInvokedProviderValues={}));var FI;(function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"})(FI=x.NetTransportValues||(x.NetTransportValues={}));var GI;(function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"})(GI=x.HttpFlavorValues||(x.HttpFlavorValues={}));var VI;(function(e){e.QUEUE="queue",e.TOPIC="topic"})(VI=x.MessagingDestinationKindValues||(x.MessagingDestinationKindValues={}));var $I;(function(e){e.RECEIVE="receive",e.PROCESS="process"})($I=x.MessagingOperationValues||(x.MessagingOperationValues={}));var zI;(function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(zI=x.RpcGrpcStatusCodeValues||(x.RpcGrpcStatusCodeValues={}))});var mh=p(Ar=>{"use strict";var KI=Ar&&Ar.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),XI=Ar&&Ar.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&KI(t,e,r)};Object.defineProperty(Ar,"__esModule",{value:!0});XI(gh(),Ar)});var Eh=p(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.TelemetrySdkLanguageValues=ie.OsTypeValues=ie.HostArchValues=ie.AwsEcsLaunchtypeValues=ie.CloudPlatformValues=ie.CloudProviderValues=ie.ResourceAttributes=void 0;ie.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var WI;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(WI=ie.CloudProviderValues||(ie.CloudProviderValues={}));var YI;(function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"})(YI=ie.CloudPlatformValues||(ie.CloudPlatformValues={}));var QI;(function(e){e.EC2="ec2",e.FARGATE="fargate"})(QI=ie.AwsEcsLaunchtypeValues||(ie.AwsEcsLaunchtypeValues={}));var ZI;(function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"})(ZI=ie.HostArchValues||(ie.HostArchValues={}));var JI;(function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"})(JI=ie.OsTypeValues||(ie.OsTypeValues={}));var eC;(function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"})(eC=ie.TelemetrySdkLanguageValues||(ie.TelemetrySdkLanguageValues={}))});var yh=p(Ir=>{"use strict";var tC=Ir&&Ir.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rC=Ir&&Ir.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&tC(t,e,r)};Object.defineProperty(Ir,"__esModule",{value:!0});rC(Eh(),Ir)});var Pn=p(Xt=>{"use strict";var nC=Xt&&Xt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Th=Xt&&Xt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&nC(t,e,r)};Object.defineProperty(Xt,"__esModule",{value:!0});Th(mh(),Xt);Th(yh(),Xt)});var Sh=p(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.SDK_INFO=void 0;var iC=Cs(),Vi=Pn();Os.SDK_INFO={[Vi.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Vi.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Vi.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Vi.TelemetrySdkLanguageValues.NODEJS,[Vi.ResourceAttributes.TELEMETRY_SDK_VERSION]:iC.VERSION}});var bh=p(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.unrefTimer=void 0;function aC(e){e.unref()}Ps.unrefTimer=aC});var Ah=p(We=>{"use strict";var sC=We&&We.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rn=We&&We.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sC(t,e,r)};Object.defineProperty(We,"__esModule",{value:!0});Rn(lh(),We);Rn(ph(),We);Rn(_h(),We);Rn(vh(),We);Rn(Sh(),We);Rn(bh(),We)});var yu=p(Cr=>{"use strict";var oC=Cr&&Cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),cC=Cr&&Cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&oC(t,e,r)};Object.defineProperty(Cr,"__esModule",{value:!0});cC(Ah(),Cr)});var Oh=p(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.isTimeInput=de.isTimeInputHrTime=de.hrTimeToMicroseconds=de.hrTimeToMilliseconds=de.hrTimeToNanoseconds=de.hrTimeToTimeStamp=de.hrTimeDuration=de.timeInputToHrTime=de.hrTime=void 0;var Tu=yu(),Su=9,$i=Math.pow(10,Su);function Rs(e){let t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(Su))*$i;return[r,n]}function Ih(){let e=Tu.otperformance.timeOrigin;if(typeof e!="number"){let t=Tu.otperformance;e=t.timing&&t.timing.fetchStart}return e}function Ch(e){let t=Rs(Ih()),r=Rs(typeof e=="number"?e:Tu.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>$i&&(i-=$i,n+=1),[n,i]}de.hrTime=Ch;function uC(e){if(bu(e))return e;if(typeof e=="number")return e<Ih()?Ch(e):Rs(e);if(e instanceof Date)return Rs(e.getTime());throw TypeError("Invalid input type")}de.timeInputToHrTime=uC;function lC(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=$i),[r,n]}de.hrTimeDuration=lC;function pC(e){let t=Su,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}de.hrTimeToTimeStamp=pC;function fC(e){return e[0]*$i+e[1]}de.hrTimeToNanoseconds=fC;function dC(e){return Math.round(e[0]*1e3+e[1]/1e6)}de.hrTimeToMilliseconds=dC;function hC(e){return Math.round(e[0]*1e6+e[1]/1e3)}de.hrTimeToMicroseconds=hC;function bu(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}de.isTimeInputHrTime=bu;function _C(e){return bu(e)||typeof e=="number"||e instanceof Date}de.isTimeInput=_C});var Rh=p(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0})});var Nh=p(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.ExportResultCode=void 0;var vC;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(vC=zi.ExportResultCode||(zi.ExportResultCode={}))});var xh=p(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.CompositePropagator=void 0;var wh=F(),Dh=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(a){wh.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${a.message}`)}}extract(t,r,n){return this._propagators.reduce((i,a)=>{try{return a.extract(i,r,n)}catch(s){wh.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${s.message}`)}return i},t)}fields(){return this._fields.slice()}};Ns.CompositePropagator=Dh});var Mh=p(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateValue=Nn.validateKey=void 0;var Au="[_0-9a-z-*/]",gC=`[a-z]${Au}{0,255}`,mC=`[a-z0-9]${Au}{0,240}@[a-z]${Au}{0,13}`,EC=new RegExp(`^(?:${gC}|${mC})$`),yC=/^[ -~]{0,255}[!-~]$/,TC=/,|=/;function SC(e){return EC.test(e)}Nn.validateKey=SC;function bC(e){return yC.test(e)&&!TC.test(e)}Nn.validateValue=bC});var Iu=p(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.TraceState=void 0;var Lh=Mh(),qh=32,AC=512,kh=",",jh="=",ws=class{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+jh+this.get(r)),t),[]).join(kh)}_parse(t){t.length>AC||(this._internalState=t.split(kh).reverse().reduce((r,n)=>{let i=n.trim(),a=i.indexOf(jh);if(a!==-1){let s=i.slice(0,a),o=i.slice(a+1,n.length);Lh.validateKey(s)&&Lh.validateValue(o)&&r.set(s,o)}return r},new Map),this._internalState.size>qh&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,qh))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new ws;return t._internalState=new Map(this._internalState),t}};Ds.TraceState=ws});var Bh=p(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.HttpTraceContextPropagator=Pe.parseTraceParent=Pe.TRACE_STATE_HEADER=Pe.TRACE_PARENT_HEADER=void 0;var xs=F(),IC=gs(),CC=Iu();Pe.TRACE_PARENT_HEADER="traceparent";Pe.TRACE_STATE_HEADER="tracestate";var OC="00",PC="(?!ff)[\\da-f]{2}",RC="(?![0]{32})[\\da-f]{32}",NC="(?![0]{16})[\\da-f]{16}",wC="[\\da-f]{2}",DC=new RegExp(`^\\s?(${PC})-(${RC})-(${NC})-(${wC})(-.*)?\\s?$`);function Hh(e){let t=DC.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}Pe.parseTraceParent=Hh;var Uh=class{inject(t,r,n){let i=xs.trace.getSpanContext(t);if(!i||IC.isTracingSuppressed(t)||!xs.isSpanContextValid(i))return;let a=`${OC}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||xs.TraceFlags.NONE).toString(16)}`;n.set(r,Pe.TRACE_PARENT_HEADER,a),i.traceState&&n.set(r,Pe.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,Pe.TRACE_PARENT_HEADER);if(!i)return t;let a=Array.isArray(i)?i[0]:i;if(typeof a!="string")return t;let s=Hh(a);if(!s)return t;s.isRemote=!0;let o=n.get(r,Pe.TRACE_STATE_HEADER);if(o){let c=Array.isArray(o)?o.join(","):o;s.traceState=new CC.TraceState(typeof c=="string"?c:void 0)}return xs.trace.setSpanContext(t,s)}fields(){return[Pe.TRACE_PARENT_HEADER,Pe.TRACE_STATE_HEADER]}};Pe.HttpTraceContextPropagator=Uh});var Gh=p(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0})});var Vh=p(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.getRPCMetadata=st.deleteRPCMetadata=st.setRPCMetadata=st.RPCType=void 0;var xC=F(),Cu=xC.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),MC;(function(e){e.HTTP="http"})(MC=st.RPCType||(st.RPCType={}));function LC(e,t){return e.setValue(Cu,t)}st.setRPCMetadata=LC;function qC(e){return e.deleteValue(Cu)}st.deleteRPCMetadata=qC;function kC(e){return e.getValue(Cu)}st.getRPCMetadata=kC});var Ou=p(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AlwaysOffSampler=void 0;var jC=F(),$h=class{shouldSample(){return{decision:jC.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Ms.AlwaysOffSampler=$h});var Pu=p(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.AlwaysOnSampler=void 0;var HC=F(),zh=class{shouldSample(){return{decision:HC.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};Ls.AlwaysOnSampler=zh});var Wh=p(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.ParentBasedSampler=void 0;var qs=F(),UC=gu(),Kh=Ou(),Ru=Pu(),Xh=class{constructor(t){var r,n,i,a;this._root=t.root,this._root||(UC.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ru.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Ru.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new Kh.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Ru.AlwaysOnSampler,this._localParentNotSampled=(a=t.localParentNotSampled)!==null&&a!==void 0?a:new Kh.AlwaysOffSampler}shouldSample(t,r,n,i,a,s){let o=qs.trace.getSpanContext(t);return!o||!qs.isSpanContextValid(o)?this._root.shouldSample(t,r,n,i,a,s):o.isRemote?o.traceFlags&qs.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,a,s):this._remoteParentNotSampled.shouldSample(t,r,n,i,a,s):o.traceFlags&qs.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,a,s):this._localParentNotSampled.shouldSample(t,r,n,i,a,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};ks.ParentBasedSampler=Xh});var Qh=p(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.TraceIdRatioBasedSampler=void 0;var Nu=F(),Yh=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:Nu.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?Nu.SamplingDecision.RECORD_AND_SAMPLED:Nu.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,a=parseInt(t.slice(i,i+8),16);r=(r^a)>>>0}return r}};js.TraceIdRatioBasedSampler=Yh});var Jh=p(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.isUrlIgnored=wn.urlMatches=void 0;function Zh(e,t){return typeof t=="string"?e===t:t.test(e)}wn.urlMatches=Zh;function BC(e,t){if(!t)return!1;for(let r of t)if(Zh(e,r))return!0;return!1}wn.isUrlIgnored=BC});var e_=p(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.isWrapped=void 0;function FC(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}Hs.isWrapped=FC});var Ye=p(M=>{"use strict";var GC=M&&M.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),W=M&&M.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&GC(t,e,r)};Object.defineProperty(M,"__esModule",{value:!0});M.baggageUtils=void 0;W(ih(),M);W(oh(),M);W(gu(),M);W(vu(),M);W(Oh(),M);W(Rh(),M);W(Nh(),M);W(Cs(),M);M.baggageUtils=du();W(yu(),M);W(xh(),M);W(Bh(),M);W(Gh(),M);W(Vh(),M);W(Ou(),M);W(Pu(),M);W(Wh(),M);W(Qh(),M);W(gs(),M);W(Iu(),M);W(Eu(),M);W(mu(),M);W(Jh(),M);W(e_(),M);W(Cs(),M)});var t_=p(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.ExceptionEventName=void 0;Us.ExceptionEventName="exception"});var wu=p(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Span=void 0;var Wt=F(),ft=Ye(),Or=Pn(),VC=t_(),r_=class{constructor(t,r,n,i,a,s,o=[],c=ft.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:Wt.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=a,this.links=o,this.startTime=ft.timeInputToHrTime(c),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(Wt.diag.warn(`Invalid attribute key: ${t}`),this):ft.isAttributeValue(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=r,this):(Wt.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(Wt.diag.warn("Dropping extra events."),this.events.shift()),ft.isTimeInput(r)&&(typeof n=="undefined"&&(n=r),r=void 0),typeof n=="undefined"&&(n=ft.hrTime()),this.events.push({name:t,attributes:r,time:ft.timeInputToHrTime(n)}),this)}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t=ft.hrTime()){if(this._isSpanEnded()){Wt.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=ft.timeInputToHrTime(t),this._duration=ft.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&Wt.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(t,r=ft.hrTime()){let n={};typeof t=="string"?n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[Or.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[Or.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[Or.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[Or.SemanticAttributes.EXCEPTION_TYPE]||n[Or.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(VC.ExceptionEventName,n,r):Wt.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&Wt.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};Bs.Span=r_});var Du=p(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.buildSamplerFromEnv=xn.DEFAULT_CONFIG=void 0;var Fs=F(),ae=Ye(),$C=ae.getEnv(),zC=ae.TracesSamplerValues.AlwaysOn;xn.DEFAULT_CONFIG={sampler:n_($C),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:ae.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:ae.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:ae.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function n_(e=ae.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case ae.TracesSamplerValues.AlwaysOn:return new ae.AlwaysOnSampler;case ae.TracesSamplerValues.AlwaysOff:return new ae.AlwaysOffSampler;case ae.TracesSamplerValues.ParentBasedAlwaysOn:return new ae.ParentBasedSampler({root:new ae.AlwaysOnSampler});case ae.TracesSamplerValues.ParentBasedAlwaysOff:return new ae.ParentBasedSampler({root:new ae.AlwaysOffSampler});case ae.TracesSamplerValues.TraceIdRatio:return new ae.TraceIdRatioBasedSampler(i_(e));case ae.TracesSamplerValues.ParentBasedTraceIdRatio:return new ae.ParentBasedSampler({root:new ae.TraceIdRatioBasedSampler(i_(e))});default:return Fs.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${zC}".`),new ae.AlwaysOnSampler}}xn.buildSamplerFromEnv=n_;var Dn=1;function i_(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Fs.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Dn}.`),Dn;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Fs.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${Dn}.`),Dn):t<0||t>1?(Fs.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${Dn}.`),Dn):t}});var a_=p(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.mergeConfig=void 0;var xu=Du();function KC(e){let t={sampler:xu.buildSamplerFromEnv()},r=Object.assign({},xu.DEFAULT_CONFIG,t,e);return r.spanLimits=Object.assign({},xu.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}Gs.mergeConfig=KC});var o_=p(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Tracer=void 0;var Ee=F(),Mu=Ye(),XC=wu(),WC=a_(),s_=class{constructor(t,r,n){this._tracerProvider=n;let i=WC.mergeConfig(r);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Mu.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=Ee.context.active()){var i,a;if(Mu.isTracingSuppressed(n))return Ee.diag.debug("Instrumentation suppressed, returning Noop Span"),Ee.trace.wrapSpanContext(Ee.INVALID_SPAN_CONTEXT);let s=YC(r,n),o=this._idGenerator.generateSpanId(),c,u,l;!s||!Ee.trace.isSpanContextValid(s)?c=this._idGenerator.generateTraceId():(c=s.traceId,u=s.traceState,l=s.spanId);let f=(i=r.kind)!==null&&i!==void 0?i:Ee.SpanKind.INTERNAL,d=(a=r.links)!==null&&a!==void 0?a:[],h=Mu.sanitizeAttributes(r.attributes),m=this._sampler.shouldSample(r.root?Ee.trace.setSpanContext(n,Ee.INVALID_SPAN_CONTEXT):n,c,t,f,h,d),S=m.decision===Ee.SamplingDecision.RECORD_AND_SAMPLED?Ee.TraceFlags.SAMPLED:Ee.TraceFlags.NONE,k={traceId:c,spanId:o,traceFlags:S,traceState:u};if(m.decision===Ee.SamplingDecision.NOT_RECORD)return Ee.diag.debug("Recording is off, propagating context in a non-recording span"),Ee.trace.wrapSpanContext(k);let ce=new XC.Span(this,n,t,k,f,l,d,r.startTime);return ce.setAttributes(Object.assign(h,m.attributes)),ce}startActiveSpan(t,r,n,i){let a,s,o;if(arguments.length<2)return;arguments.length===2?o=r:arguments.length===3?(a=r,o=n):(a=r,s=n,o=i);let c=s??Ee.context.active(),u=this.startSpan(t,a,c),l=Ee.trace.setSpan(c,u);return Ee.context.with(l,o,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};Vs.Tracer=s_;function YC(e,t){if(!e.root)return Ee.trace.getSpanContext(t)}});var c_=p($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.defaultServiceName=void 0;function QC(){return`unknown_service:${process.argv0}`}$s.defaultServiceName=QC});var l_=p(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.detectResources=void 0;var u_=qu(),Lu=F(),ZC=require("util"),JC=async(e={})=>{let t=Object.assign(e),r=await Promise.all((t.detectors||[]).map(async n=>{try{let i=await n.detect(t);return Lu.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return Lu.diag.debug(`${n.constructor.name} failed: ${i.message}`),u_.Resource.empty()}}));return eO(r),r.reduce((n,i)=>n.merge(i),u_.Resource.empty())};zs.detectResources=JC;var eO=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=ZC.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});Lu.diag.verbose(r)}})}});var f_=p(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.envDetector=void 0;var tO=F(),rO=Ye(),nO=Pn(),iO=Xs(),p_=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(t){let r={},n=rO.getEnv(),i=n.OTEL_RESOURCE_ATTRIBUTES,a=n.OTEL_SERVICE_NAME;if(i)try{let s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(s){tO.diag.debug(`EnvDetector failed: ${s.message}`)}return a&&(r[nO.ResourceAttributes.SERVICE_NAME]=a),new iO.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let a=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length!==2)continue;let[s,o]=a;if(s=s.trim(),o=o.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(s))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[s]=o}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)}_isPrintableString(t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Ks.envDetector=new p_});var __=p(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.processDetector=void 0;var aO=F(),Yt=Pn(),d_=Xs(),h_=class{async detect(t){let r={[Yt.ResourceAttributes.PROCESS_PID]:process.pid,[Yt.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[Yt.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[Yt.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(r,t)}_getResourceAttributes(t,r){return t[Yt.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[Yt.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[Yt.ResourceAttributes.PROCESS_COMMAND]===""||t[Yt.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(aO.diag.debug("ProcessDetector failed: Unable to find required process resources. "),d_.Resource.empty()):new d_.Resource(Object.assign({},t))}};Ws.processDetector=new h_});var g_=p(Qt=>{"use strict";var sO=Qt&&Qt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),v_=Qt&&Qt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sO(t,e,r)};Object.defineProperty(Qt,"__esModule",{value:!0});v_(f_(),Qt);v_(__(),Qt)});var m_=p(Ct=>{"use strict";var oO=Ct&&Ct.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ku=Ct&&Ct.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&oO(t,e,r)};Object.defineProperty(Ct,"__esModule",{value:!0});ku(c_(),Ct);ku(l_(),Ct);ku(g_(),Ct)});var ju=p(Pr=>{"use strict";var cO=Pr&&Pr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),uO=Pr&&Pr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cO(t,e,r)};Object.defineProperty(Pr,"__esModule",{value:!0});uO(m_(),Pr)});var qu=p(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Resource=void 0;var Rr=Pn(),Hu=Ye(),lO=ju(),Zt=class{constructor(t){this.attributes=t}static empty(){return Zt.EMPTY}static default(){return new Zt({[Rr.ResourceAttributes.SERVICE_NAME]:lO.defaultServiceName(),[Rr.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Hu.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Rr.ResourceAttributes.TELEMETRY_SDK_NAME]:Hu.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_NAME],[Rr.ResourceAttributes.TELEMETRY_SDK_VERSION]:Hu.SDK_INFO[Rr.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(t){if(!t||!Object.keys(t.attributes).length)return this;let r=Object.assign({},this.attributes,t.attributes);return new Zt(r)}};Ys.Resource=Zt;Zt.EMPTY=new Zt({})});var y_=p(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0})});var S_=p(T_=>{"use strict";Object.defineProperty(T_,"__esModule",{value:!0})});var Xs=p(dt=>{"use strict";var pO=dt&&dt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qs=dt&&dt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&pO(t,e,r)};Object.defineProperty(dt,"__esModule",{value:!0});Qs(qu(),dt);Qs(ju(),dt);Qs(y_(),dt);Qs(S_(),dt)});var A_=p(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.MultiSpanProcessor=void 0;var fO=Ye(),b_=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{fO.globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};Zs.MultiSpanProcessor=b_});var Uu=p(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.NoopSpanProcessor=void 0;var I_=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};Js.NoopSpanProcessor=I_});var ev=p((Qi,qn)=>{var dO=200,C_="__lodash_hash_undefined__",hO=800,_O=16,O_=9007199254740991,P_="[object Arguments]",vO="[object Array]",gO="[object AsyncFunction]",mO="[object Boolean]",EO="[object Date]",yO="[object Error]",R_="[object Function]",TO="[object GeneratorFunction]",SO="[object Map]",bO="[object Number]",AO="[object Null]",N_="[object Object]",IO="[object Proxy]",CO="[object RegExp]",OO="[object Set]",PO="[object String]",RO="[object Undefined]",NO="[object WeakMap]",wO="[object ArrayBuffer]",DO="[object DataView]",xO="[object Float32Array]",MO="[object Float64Array]",LO="[object Int8Array]",qO="[object Int16Array]",kO="[object Int32Array]",jO="[object Uint8Array]",HO="[object Uint8ClampedArray]",UO="[object Uint16Array]",BO="[object Uint32Array]",FO=/[\\^$.*+?()[\]{}|]/g,GO=/^\[object .+?Constructor\]$/,VO=/^(?:0|[1-9]\d*)$/,K={};K[xO]=K[MO]=K[LO]=K[qO]=K[kO]=K[jO]=K[HO]=K[UO]=K[BO]=!0;K[P_]=K[vO]=K[wO]=K[mO]=K[DO]=K[EO]=K[yO]=K[R_]=K[SO]=K[bO]=K[N_]=K[CO]=K[OO]=K[PO]=K[NO]=!1;var w_=typeof global=="object"&&global&&global.Object===Object&&global,$O=typeof self=="object"&&self&&self.Object===Object&&self,Ki=w_||$O||Function("return this")(),D_=typeof Qi=="object"&&Qi&&!Qi.nodeType&&Qi,Xi=D_&&typeof qn=="object"&&qn&&!qn.nodeType&&qn,x_=Xi&&Xi.exports===D_,Bu=x_&&w_.process,M_=function(){try{var e=Xi&&Xi.require&&Xi.require("util").types;return e||Bu&&Bu.binding&&Bu.binding("util")}catch(t){}}(),L_=M_&&M_.isTypedArray;function zO(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function KO(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function XO(e){return function(t){return e(t)}}function WO(e,t){return e==null?void 0:e[t]}function YO(e,t){return function(r){return e(t(r))}}var QO=Array.prototype,ZO=Function.prototype,eo=Object.prototype,Fu=Ki["__core-js_shared__"],to=ZO.toString,Ot=eo.hasOwnProperty,q_=function(){var e=/[^.]+$/.exec(Fu&&Fu.keys&&Fu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),k_=eo.toString,JO=to.call(Object),e0=RegExp("^"+to.call(Ot).replace(FO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ro=x_?Ki.Buffer:void 0,j_=Ki.Symbol,H_=Ki.Uint8Array,U_=ro?ro.allocUnsafe:void 0,B_=YO(Object.getPrototypeOf,Object),F_=Object.create,t0=eo.propertyIsEnumerable,r0=QO.splice,Nr=j_?j_.toStringTag:void 0,no=function(){try{var e=$u(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),n0=ro?ro.isBuffer:void 0,G_=Math.max,i0=Date.now,V_=$u(Ki,"Map"),Wi=$u(Object,"create"),a0=function(){function e(){}return function(t){if(!Dr(t))return{};if(F_)return F_(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function wr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function s0(){this.__data__=Wi?Wi(null):{},this.size=0}function o0(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function c0(e){var t=this.__data__;if(Wi){var r=t[e];return r===C_?void 0:r}return Ot.call(t,e)?t[e]:void 0}function u0(e){var t=this.__data__;return Wi?t[e]!==void 0:Ot.call(t,e)}function l0(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Wi&&t===void 0?C_:t,this}wr.prototype.clear=s0;wr.prototype.delete=o0;wr.prototype.get=c0;wr.prototype.has=u0;wr.prototype.set=l0;function Pt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function p0(){this.__data__=[],this.size=0}function f0(e){var t=this.__data__,r=io(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():r0.call(t,r,1),--this.size,!0}function d0(e){var t=this.__data__,r=io(t,e);return r<0?void 0:t[r][1]}function h0(e){return io(this.__data__,e)>-1}function _0(e,t){var r=this.__data__,n=io(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}Pt.prototype.clear=p0;Pt.prototype.delete=f0;Pt.prototype.get=d0;Pt.prototype.has=h0;Pt.prototype.set=_0;function Mn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function v0(){this.size=0,this.__data__={hash:new wr,map:new(V_||Pt),string:new wr}}function g0(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t}function m0(e){return so(this,e).get(e)}function E0(e){return so(this,e).has(e)}function y0(e,t){var r=so(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}Mn.prototype.clear=v0;Mn.prototype.delete=g0;Mn.prototype.get=m0;Mn.prototype.has=E0;Mn.prototype.set=y0;function Ln(e){var t=this.__data__=new Pt(e);this.size=t.size}function T0(){this.__data__=new Pt,this.size=0}function S0(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function b0(e){return this.__data__.get(e)}function A0(e){return this.__data__.has(e)}function I0(e,t){var r=this.__data__;if(r instanceof Pt){var n=r.__data__;if(!V_||n.length<dO-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Mn(n)}return r.set(e,t),this.size=r.size,this}Ln.prototype.clear=T0;Ln.prototype.delete=S0;Ln.prototype.get=b0;Ln.prototype.has=A0;Ln.prototype.set=I0;function C0(e,t){var r=Xu(e),n=!r&&Ku(e),i=!r&&!n&&W_(e),a=!r&&!n&&!i&&Q_(e),s=r||n||i||a,o=s?KO(e.length,String):[],c=o.length;for(var u in e)(t||Ot.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||K_(u,c)))&&o.push(u);return o}function Gu(e,t,r){(r!==void 0&&!oo(e[t],r)||r===void 0&&!(t in e))&&Vu(e,t,r)}function O0(e,t,r){var n=e[t];(!(Ot.call(e,t)&&oo(n,r))||r===void 0&&!(t in e))&&Vu(e,t,r)}function io(e,t){for(var r=e.length;r--;)if(oo(e[r][0],t))return r;return-1}function Vu(e,t,r){t=="__proto__"&&no?no(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var P0=B0();function ao(e){return e==null?e===void 0?RO:AO:Nr&&Nr in Object(e)?F0(e):X0(e)}function $_(e){return Yi(e)&&ao(e)==P_}function R0(e){if(!Dr(e)||z0(e))return!1;var t=Yu(e)?e0:GO;return t.test(Z0(e))}function N0(e){return Yi(e)&&Y_(e.length)&&!!K[ao(e)]}function w0(e){if(!Dr(e))return K0(e);var t=X_(e),r=[];for(var n in e)n=="constructor"&&(t||!Ot.call(e,n))||r.push(n);return r}function z_(e,t,r,n,i){e!==t&&P0(t,function(a,s){if(i||(i=new Ln),Dr(a))D0(e,t,s,r,z_,n,i);else{var o=n?n(zu(e,s),a,s+"",e,t,i):void 0;o===void 0&&(o=a),Gu(e,s,o)}},Z_)}function D0(e,t,r,n,i,a,s){var o=zu(e,r),c=zu(t,r),u=s.get(c);if(u){Gu(e,r,u);return}var l=a?a(o,c,r+"",e,t,s):void 0,f=l===void 0;if(f){var d=Xu(c),h=!d&&W_(c),m=!d&&!h&&Q_(c);l=c,d||h||m?Xu(o)?l=o:J0(o)?l=j0(o):h?(f=!1,l=L0(c,!0)):m?(f=!1,l=k0(c,!0)):l=[]:eP(c)||Ku(c)?(l=o,Ku(o)?l=tP(o):(!Dr(o)||Yu(o))&&(l=G0(c))):f=!1}f&&(s.set(c,l),i(l,c,n,a,s),s.delete(c)),Gu(e,r,l)}function x0(e,t){return Y0(W0(e,t,J_),e+"")}var M0=no?function(e,t){return no(e,"toString",{configurable:!0,enumerable:!1,value:nP(t),writable:!0})}:J_;function L0(e,t){if(t)return e.slice();var r=e.length,n=U_?U_(r):new e.constructor(r);return e.copy(n),n}function q0(e){var t=new e.constructor(e.byteLength);return new H_(t).set(new H_(e)),t}function k0(e,t){var r=t?q0(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function j0(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function H0(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],c=n?n(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),i?Vu(r,o,c):O0(r,o,c)}return r}function U0(e){return x0(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&V0(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var o=r[n];o&&e(t,o,n,a)}return t})}function B0(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var c=s[e?o:++i];if(r(a[c],c,a)===!1)break}return t}}function so(e,t){var r=e.__data__;return $0(t)?r[typeof t=="string"?"string":"hash"]:r.map}function $u(e,t){var r=WO(e,t);return R0(r)?r:void 0}function F0(e){var t=Ot.call(e,Nr),r=e[Nr];try{e[Nr]=void 0;var n=!0}catch(a){}var i=k_.call(e);return n&&(t?e[Nr]=r:delete e[Nr]),i}function G0(e){return typeof e.constructor=="function"&&!X_(e)?a0(B_(e)):{}}function K_(e,t){var r=typeof e;return t=t??O_,!!t&&(r=="number"||r!="symbol"&&VO.test(e))&&e>-1&&e%1==0&&e<t}function V0(e,t,r){if(!Dr(r))return!1;var n=typeof t;return(n=="number"?Wu(r)&&K_(t,r.length):n=="string"&&t in r)?oo(r[t],e):!1}function $0(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function z0(e){return!!q_&&q_ in e}function X_(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||eo;return e===r}function K0(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function X0(e){return k_.call(e)}function W0(e,t,r){return t=G_(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=G_(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(s),zO(e,this,o)}}function zu(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Y0=Q0(M0);function Q0(e){var t=0,r=0;return function(){var n=i0(),i=_O-(n-r);if(r=n,i>0){if(++t>=hO)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Z0(e){if(e!=null){try{return to.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function oo(e,t){return e===t||e!==e&&t!==t}var Ku=$_(function(){return arguments}())?$_:function(e){return Yi(e)&&Ot.call(e,"callee")&&!t0.call(e,"callee")},Xu=Array.isArray;function Wu(e){return e!=null&&Y_(e.length)&&!Yu(e)}function J0(e){return Yi(e)&&Wu(e)}var W_=n0||iP;function Yu(e){if(!Dr(e))return!1;var t=ao(e);return t==R_||t==TO||t==gO||t==IO}function Y_(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=O_}function Dr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Yi(e){return e!=null&&typeof e=="object"}function eP(e){if(!Yi(e)||ao(e)!=N_)return!1;var t=B_(e);if(t===null)return!0;var r=Ot.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&to.call(r)==JO}var Q_=L_?XO(L_):N0;function tP(e){return H0(e,Z_(e))}function Z_(e){return Wu(e)?C0(e,!0):w0(e)}var rP=U0(function(e,t,r){z_(e,t,r)});function nP(e){return function(){return e}}function J_(e){return e}function iP(){return!1}qn.exports=rP});var nv=p(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.BatchSpanProcessorBase=void 0;var tv=F(),Zi=Ye(),rv=class{constructor(t,r){this._exporter=t,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=Zi.getEnv();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(t){}onEnd(t){this._isShutdown||this._addToBuffer(t)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}_addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let a=0,s=i;a<s;a++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);tv.context.with(Zi.suppressTracing(tv.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var a;clearTimeout(n),i.code===Zi.ExportResultCode.SUCCESS?t():r((a=i.error)!==null&&a!==void 0?a:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{Zi.globalErrorHandler(t)})},this._scheduledDelayMillis),Zi.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};co.BatchSpanProcessorBase=rv});var av=p(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.BatchSpanProcessor=void 0;var aP=nv(),iv=class extends aP.BatchSpanProcessorBase{onShutdown(){}};uo.BatchSpanProcessor=iv});var sv=p(xr=>{"use strict";var sP=xr&&xr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),oP=xr&&xr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sP(t,e,r)};Object.defineProperty(xr,"__esModule",{value:!0});oP(av(),xr)});var Qu=p(Mr=>{"use strict";var cP=Mr&&Mr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),uP=Mr&&Mr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cP(t,e,r)};Object.defineProperty(Mr,"__esModule",{value:!0});uP(sv(),Mr)});var cv=p(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.BasicTracerProvider=qr.ForceFlushState=void 0;var kn=F(),Ji=Ye(),ov=Xs(),lP=Zu(),pP=Du(),fP=A_(),dP=Uu(),hP=ev(),_P=Qu(),jn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(jn=qr.ForceFlushState||(qr.ForceFlushState={}));var Lr=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=hP({},pP.DEFAULT_CONFIG,t);this.resource=(r=n.resource)!==null&&r!==void 0?r:ov.Resource.empty(),this.resource=ov.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let a=new _P.BatchSpanProcessor(i);this.activeSpanProcessor=a}else this.activeSpanProcessor=new dP.NoopSpanProcessor}getTracer(t,r){let n=`${t}@${r||""}`;return this._tracers.has(n)||this._tracers.set(n,new lP.Tracer({name:t,version:r},this._config,this)),this._tracers.get(n)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>kn.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new fP.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){kn.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&kn.context.setGlobalContextManager(t.contextManager),t.propagator&&kn.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let a,s=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),a=jn.timeout},t);n.forceFlush().then(()=>{clearTimeout(s),a!==jn.timeout&&(a=jn.resolved,i(a))}).catch(o=>{clearTimeout(s),a=jn.error,i(o)})}));return new Promise((n,i)=>{Promise.all(r).then(a=>{let s=a.filter(o=>o!==jn.resolved);s.length>0?i(s):n()}).catch(a=>i([a]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=Lr._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=Lr._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set(Ji.getEnv().OTEL_PROPAGATORS)),n=t.map(i=>{let a=this._getPropagator(i);return a||kn.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),a}).reduce((i,a)=>(a&&i.push(a),i),[]);if(n.length!==0)return t.length===1?n[0]:new Ji.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=Ji.getEnv().OTEL_TRACES_EXPORTER;if(t==="none")return;let r=this._getSpanExporter(t);return r||kn.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};qr.BasicTracerProvider=Lr;Lr._registeredPropagators=new Map([["tracecontext",()=>new Ji.HttpTraceContextPropagator],["baggage",()=>new Ji.HttpBaggagePropagator]]);Lr._registeredExporters=new Map});var lv=p(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.ConsoleSpanExporter=void 0;var Ju=Ye(),uv=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:Ju.hrTimeToMicroseconds(t.startTime),duration:Ju.hrTimeToMicroseconds(t.duration),attributes:t.attributes,status:t.status,events:t.events}}_sendSpans(t,r){for(let n of t)console.log(this._exportInfo(n));if(r)return r({code:Ju.ExportResultCode.SUCCESS})}};lo.ConsoleSpanExporter=uv});var dv=p(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.InMemorySpanExporter=void 0;var pv=Ye(),fv=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:pv.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:pv.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};po.InMemorySpanExporter=fv});var _v=p(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0})});var mv=p(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.SimpleSpanProcessor=void 0;var vv=F(),el=Ye(),gv=class{constructor(t){this._exporter=t,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(t){}onEnd(t){this._isShutdown||vv.context.with(el.suppressTracing(vv.context.active()),()=>{this._exporter.export([t],r=>{var n;r.code!==el.ExportResultCode.SUCCESS&&el.globalErrorHandler((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}};fo.SimpleSpanProcessor=gv});var yv=p(Ev=>{"use strict";Object.defineProperty(Ev,"__esModule",{value:!0})});var Sv=p(Tv=>{"use strict";Object.defineProperty(Tv,"__esModule",{value:!0})});var Av=p(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0})});var Cv=p(Iv=>{"use strict";Object.defineProperty(Iv,"__esModule",{value:!0})});var Zu=p(ve=>{"use strict";var vP=ve&&ve.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Fe=ve&&ve.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vP(t,e,r)};Object.defineProperty(ve,"__esModule",{value:!0});Fe(o_(),ve);Fe(cv(),ve);Fe(Qu(),ve);Fe(lv(),ve);Fe(dv(),ve);Fe(_v(),ve);Fe(mv(),ve);Fe(yv(),ve);Fe(Uu(),ve);Fe(wu(),ve);Fe(Sv(),ve);Fe(Av(),ve);Fe(Cv(),ve)});var Rv=p(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.enable=ht.azureCoreTracing=ht.AzureMonitorSymbol=void 0;var Ov=ue();ht.AzureMonitorSymbol="Azure_Monitor_Tracer";var Pv=!1,gP=function(e){if(Pv)return e;try{var t=Zu(),r=F(),n=new t.BasicTracerProvider,i=n.getTracer("applicationinsights tracer"),a=e.setTracer;e.setTracer=function(s){var o=s.startSpan;s.startSpan=function(c,u,l){var f=o.call(this,c,u,l),d=f.end;return f.end=function(){var h=d.apply(this,arguments);return Ov.channel.publish("azure-coretracing",f),h},f},s[ht.AzureMonitorSymbol]=!0,a.call(this,s)},r.trace.getSpan(r.context.active()),e.setTracer(i),Pv=!0}catch(s){}return e};ht.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:gP};function mP(){Ov.channel.registerMonkeyPatch("@azure/core-tracing",ht.azureCoreTracing)}ht.enable=mP});var wv=p(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.enable=kr.bunyan=void 0;var Nv=ue(),EP=function(e){var t=e.prototype._emit;return e.prototype._emit=function(r,n){var i=t.apply(this,arguments);if(!n){var a=i;a||(a=t.call(this,r,!0)),Nv.channel.publish("bunyan",{level:r.level,result:a})}return i},e};kr.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:EP};function yP(){Nv.channel.registerMonkeyPatch("bunyan",kr.bunyan)}kr.enable=yP});var xv=p(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.enable=jr.console=void 0;var tl=ue(),Dv=require("stream"),TP=function(e){var t=new Dv.Writable,r=new Dv.Writable;t.write=function(u){if(!u)return!0;var l=u.toString();return tl.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return tl.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new e.Console(t,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],a=function(u){var l=e[u];l&&(e[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch(f){}return l.apply(e,arguments)})},s=0,o=i;s<o.length;s++){var c=o[s];a(c)}return e};jr.console={versionSpecifier:">= 4.0.0",patch:TP};function SP(){tl.channel.registerMonkeyPatch("console",jr.console),require("console")}jr.enable=SP});var Mv=p(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.enable=Hr.mongoCore=void 0;var rl=ue(),bP=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=rl.channel.bindToContext(arguments[o])),i.apply(this,arguments)};var a=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=rl.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e};Hr.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:bP};function AP(){rl.channel.registerMonkeyPatch("mongodb-core",Hr.mongoCore)}Hr.enable=AP});var Lv=p(xe=>{"use strict";var Hn=xe&&xe.__assign||function(){return Hn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hn.apply(this,arguments)};Object.defineProperty(xe,"__esModule",{value:!0});xe.enable=xe.mongo330=xe.mongo3=xe.mongo2=void 0;var Re=ue(),IP=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return Re.channel.bindToContext(function(n){return n()})}}}),r={};return t.on("started",function(n){r[n.requestId]||(r[n.requestId]=Hn(Hn({},n),{time:new Date}))}),t.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Re.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Re.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),t.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Re.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Re.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),e},CP=function(e){var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Re.channel.bindToContext(function(a){return a()}),r[i.requestId]=Hn(Hn({},i),{time:new Date}))}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Re.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Re.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e},OP=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var o=typeof arguments[1]=="function"?1:2;return typeof arguments[o]=="function"&&(arguments[o]=Re.channel.bindToContext(arguments[o])),i.apply(this,arguments)};var a=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Re.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e},PP=function(e){OP(e);var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Re.channel.bindToContext(function(a){return a()}),r[i.requestId]=i)}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Re.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Re.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e};xe.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:IP};xe.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:CP};xe.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:PP};function RP(){Re.channel.registerMonkeyPatch("mongodb",xe.mongo2),Re.channel.registerMonkeyPatch("mongodb",xe.mongo3),Re.channel.registerMonkeyPatch("mongodb",xe.mongo330)}xe.enable=RP});var kv=p(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.enable=Ur.mysql=void 0;var ho=ue(),qv=require("path"),NP=function(e,t){var r=function(c,u){return function(l,f){var d=c[l];d&&(c[l]=function(){for(var m=arguments.length-1,S=arguments.length-1;S>=0;--S)if(typeof arguments[S]=="function"){m=S;break}else if(typeof arguments[S]!="undefined")break;var k=arguments[m],ce={result:null,startTime:null,startDate:null};typeof k=="function"&&(f?(ce.startTime=process.hrtime(),ce.startDate=new Date,arguments[m]=ho.channel.bindToContext(f(ce,k))):arguments[m]=ho.channel.bindToContext(k));var Ce=d.apply(this,arguments);return ce.result=Ce,Ce})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],a=require(qv.dirname(t)+"/lib/Connection");i.forEach(function(c){return n(a,"Connection")(c)}),r(a,"Connection")("createQuery",function(c,u){return function(l){var f=process.hrtime(c.startTime),d=f[0]*1e3+f[1]/1e6|0;ho.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:d,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],o=require(qv.dirname(t)+"/lib/Pool");return s.forEach(function(c){return n(o,"Pool")(c)}),e};Ur.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:NP};function wP(){ho.channel.registerMonkeyPatch("mysql",Ur.mysql)}Ur.enable=wP});var Hv=p(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.enable=Br.postgresPool1=void 0;var jv=ue();function DP(e){var t=e.prototype.connect;return e.prototype.connect=function(n){return n&&(arguments[0]=jv.channel.bindToContext(n)),t.apply(this,arguments)},e}Br.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:DP};function xP(){jv.channel.registerMonkeyPatch("pg-pool",Br.postgresPool1)}Br.enable=xP});var Bv=p(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.enable=_t.postgres7=_t.postgres6=void 0;var Un=ue(),Uv=require("events");function MP(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function f(d){d&&d[n]&&(d=d[n]);var h=Un.channel.bindToContext(function(m,S){var k=process.hrtime(u);if(c.result=S&&{rowCount:S.rowCount,command:S.command},c.error=m,c.duration=Math.ceil(k[0]*1e3+k[1]/1e6),Un.channel.publish("postgres",c),m){if(d)return d.apply(this,arguments);l&&l instanceof Uv.EventEmitter&&l.emit("error",m)}else d&&d.apply(this,arguments)});try{return Object.defineProperty(h,n,{value:d}),h}catch(m){return d}}try{typeof a=="string"?s instanceof Array?(c.query.preparable={text:a,args:s},o=f(o)):(c.query.text=a,o?o=f(o):s=f(s)):(typeof a.name=="string"?c.query.plan=a.name:a.values instanceof Array?c.query.preparable={text:a.text,args:a.values}:c.query.text=a.text,o?o=f(o):s?s=f(s):a.callback=f(a.callback))}catch(d){return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},e}function LP(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,o){var c=this,u=!!o,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f=process.hrtime(),d;function h(m){m&&m[n]&&(m=m[n]);var S=Un.channel.bindToContext(function(k,ce){var Ce=process.hrtime(f);if(l.result=ce&&{rowCount:ce.rowCount,command:ce.command},l.error=k,l.duration=Math.ceil(Ce[0]*1e3+Ce[1]/1e6),Un.channel.publish("postgres",l),k){if(m)return m.apply(this,arguments);d&&d instanceof Uv.EventEmitter&&d.emit("error",k)}else m&&m.apply(this,arguments)});try{return Object.defineProperty(S,n,{value:m}),S}catch(k){return m}}try{typeof a=="string"?s instanceof Array?(l.query.preparable={text:a,args:s},u=typeof o=="function",o=u?h(o):o):(l.query.text=a,o?(u=typeof o=="function",o=u?h(o):o):(u=typeof s=="function",s=u?h(s):s)):(typeof a.name=="string"?l.query.plan=a.name:a.values instanceof Array?l.query.preparable={text:a.text,args:a.values}:l.query.text=a.text,o?(u=typeof o=="function",o=h(o)):s?(u=typeof s=="function",s=u?h(s):s):(u=typeof a.callback=="function",a.callback=u?h(a.callback):a.callback))}catch(m){return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),u?d:d.then(function(m){return h()(void 0,m),new c._Promise(function(S,k){S(m)})}).catch(function(m){return h()(m,void 0),new c._Promise(function(S,k){k(m)})})},e}_t.postgres6={versionSpecifier:"6.*",patch:MP};_t.postgres7={versionSpecifier:">=7.* <=8.*",patch:LP};function qP(){Un.channel.registerMonkeyPatch("pg",_t.postgres6),Un.channel.registerMonkeyPatch("pg",_t.postgres7)}_t.enable=qP});var Fv=p(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.enable=Fr.redis=void 0;var nl=ue(),kP=function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,a=process.hrtime(),s=new Date;r.callback=nl.channel.bindToContext(function(o,c){var u=process.hrtime(a),l=u[0]*1e3+u[1]/1e6|0;nl.channel.publish("redis",{duration:l,address:i,commandObj:r,err:o,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return t.call(this,r)},e};Fr.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:kP};function jP(){nl.channel.registerMonkeyPatch("redis",Fr.redis)}Fr.enable=jP});var Gv=p(Rt=>{"use strict";var _o=Rt&&Rt.__assign||function(){return _o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_o.apply(this,arguments)};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.enable=Rt.tedious=void 0;var il=ue(),HP=function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function n(a){var s=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return il.channel.bindToContext(function(c,u,l){var f=process.hrtime(s);o=_o(_o({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(f[0]*1e3+f[1]/1e6)}),il.channel.publish("tedious",o),a.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),t.apply(this,arguments)},e};Rt.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:HP};function UP(){il.channel.registerMonkeyPatch("tedious",Rt.tedious)}Rt.enable=UP});var Vv=p(je=>{"use strict";var BP=je&&je.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FP=je&&je.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(je,"__esModule",{value:!0});je.enable=je.winston2=je.winston3=void 0;var vo=ue(),GP=function(e){var t=e.Logger.prototype.log,r,n=function(i,a,s){var o;return r===e.config.npm.levels?o="npm":r===e.config.syslog.levels?o="syslog":o="unknown",vo.channel.publish("winston",{level:i,message:a,meta:s,levelKind:o}),a};return e.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(a){return a!==n}),this.filters.push(n)),t.apply(this,arguments)},e},VP=function(e){var t=function(s,o){var c;return s.config.npm.levels[o]!=null?c="npm":s.config.syslog.levels[o]!=null?c="syslog":c="unknown",c},r=function(s){BP(o,s);function o(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return o.prototype.log=function(c,u){var l=c.message,f=c.level,d=c.meta,h=FP(c,["message","level","meta"]);f=typeof Symbol.for=="function"?c[Symbol.for("level")]:f,l=c instanceof Error?c:l;var m=t(this.winston,f);d=d||{};for(var S in h)h.hasOwnProperty(S)&&(d[S]=h[S]);vo.channel.publish("winston",{message:l,level:f,levelKind:m,meta:d}),u()},o}(e.Transport);function n(){var s=arguments[0].levels||e.config.npm.levels,o;for(var c in s)s.hasOwnProperty(c)&&(o=o===void 0||s[c]>s[o]?c:o);this.add(new r(e,{level:o}))}var i=e.createLogger;e.createLogger=function(){var o=arguments[0].levels||e.config.npm.levels,c;for(var u in o)o.hasOwnProperty(u)&&(c=c===void 0||o[u]>o[c]?u:c);var l=i.apply(this,arguments);l.add(new r(e,{level:c}));var f=l.configure;return l.configure=function(){f.apply(this,arguments),n.apply(this,arguments)},l};var a=e.configure;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments)},e.add(new r(e)),e};je.winston3={versionSpecifier:"3.x",patch:VP};je.winston2={versionSpecifier:"2.x",patch:GP};function $P(){vo.channel.registerMonkeyPatch("winston",je.winston2),vo.channel.registerMonkeyPatch("winston",je.winston3)}je.enable=$P});var rg=p(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.enable=z.tedious=z.pgPool=z.pg=z.winston=z.redis=z.mysql=z.mongodb=z.mongodbCore=z.console=z.bunyan=z.azuresdk=void 0;var $v=Rv();z.azuresdk=$v;var zv=wv();z.bunyan=zv;var Kv=xv();z.console=Kv;var Xv=Mv();z.mongodbCore=Xv;var Wv=Lv();z.mongodb=Wv;var Yv=kv();z.mysql=Yv;var Qv=Hv();z.pgPool=Qv;var Zv=Bv();z.pg=Zv;var Jv=Fv();z.redis=Jv;var eg=Gv();z.tedious=eg;var tg=Vv();z.winston=tg;function zP(){zv.enable(),Kv.enable(),Xv.enable(),Wv.enable(),Yv.enable(),Zv.enable(),Qv.enable(),Jv.enable(),tg.enable(),$v.enable(),eg.enable()}z.enable=zP});var Eo=p(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.registerContextPreservation=Jt.IsInitialized=void 0;var KP=Oc(),al=me();Jt.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var sl="DiagnosticChannel";if(Jt.IsInitialized){ot=rg(),ng=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",go=ng.split(","),ol={bunyan:ot.bunyan,console:ot.console,mongodb:ot.mongodb,mongodbCore:ot.mongodbCore,mysql:ot.mysql,redis:ot.redis,pg:ot.pg,pgPool:ot.pgPool,winston:ot.winston,azuresdk:ot.azuresdk};for(mo in ol)go.indexOf(mo)===-1&&(ol[mo].enable(),al.info(sl,"Subscribed to "+mo+" events"));go.length>0&&al.info(sl,"Some modules will not be patched",go)}else al.info(sl,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var ot,ng,go,ol,mo;function XP(e){if(!!Jt.IsInitialized){var t=ue();t.channel.addContextPreservation(e),t.channel.spanContextPropagator=KP.AsyncScopeManager}}Jt.registerContextPreservation=XP});var Bn=p((Wq,ig)=>{"use strict";ig.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ge=p((ul,sg)=>{"use strict";var er=ul&&ul.__assign||function(){return er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},er.apply(this,arguments)},WP=require("http"),ag=require("https"),cl=require("url"),yo=require("constants"),ea=me(),Fn=Bn(),YP=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&typeof r=="string")for(var i=t+"=",a=r.split(";"),s=0;s<a.length;s++){var r=a[s];if(r=e.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,a[s].length);break}}return n},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(t){var r=function(o,c){return String.fromCharCode(o>>c&255)},n=function(o){return r(o,24)+r(o,16)+r(o,8)+r(o,0)},i=t.map(n).join(""),a=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=a.toString("base64");return s.substr(0,s.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=e.random32(),r+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var a=t[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+a+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000"},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e.isError=function(t){return t instanceof Error},e.isPrimitive=function(t){var r=typeof t;return r==="string"||r==="number"||r==="boolean"},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var r=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,a=Math.floor(t/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=a>0?a+".":"";return s+i+":"+n+":"+r},e.extractError=function(t){var r=t;return{message:t.message,code:r.code||r.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t},e.validateStringMap=function(t){if(typeof t!="object"){ea.info("Invalid properties dropped from payload");return}var r={};for(var n in t){var i="",a=t[n],s=typeof a;if(e.isPrimitive(a))i=a.toString();else if(a===null||s==="undefined")i="";else if(s==="function"){ea.info("key: "+n+" was function; will not serialize");continue}else{var o=e.isArray(a)?a:e.extractObject(a);try{e.isPrimitive(o)?i=o:i=JSON.stringify(o)}catch(c){i=a.constructor.name.toString()+" (Error: "+c.message+")",ea.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r},e.canIncludeCorrelationHeader=function(t,r){var n=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var a=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(a.test(cl.parse(r).hostname))return!1}return!0},e.getCorrelationContextTarget=function(t,r){var n=t.headers&&t.headers[Fn.requestContextHeader];if(n)for(var i=n.split(","),a=0;a<i.length;++a){var s=i[a].split("=");if(s.length==2&&s[0]==r)return s[1]}},e.makeRequest=function(t,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var a=cl.parse(r),s=er(er({},n),{host:a.hostname,port:a.port,path:a.pathname}),o=void 0;if(a.protocol==="https:"&&(o=t.proxyHttpsUrl||void 0),a.protocol==="http:"&&(o=t.proxyHttpUrl||void 0),o){o.indexOf("//")===0&&(o="http:"+o);var c=cl.parse(o);c.protocol==="https:"?(ea.info("Proxies that use HTTPS are not supported"),o=void 0):s=er(er({},s),{host:c.hostname,port:c.port||"80",path:r,headers:er(er({},s.headers),{Host:a.hostname})})}var u=a.protocol==="https:"&&!o;return u&&t.httpsAgent!==void 0?s.agent=t.httpsAgent:!u&&t.httpAgent!==void 0?s.agent=t.httpAgent:u&&(s.agent=e.tlsRestrictedAgent),u?ag.request(s,i):WP.request(s,i)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(a){ea.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",a,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(Fn.requestContextHeader,Fn.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(t){var r=Object.prototype.toString.call(t),n="";return r==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":n=JSON.stringify(t),r+n},e.addCorrelationIdHeaderFromString=function(t,r,n){var i=n.split(","),a=Fn.requestContextSourceKey+"=",s=i.some(function(o){return o.substring(0,a.length)===a});s||r.setHeader(Fn.requestContextHeader,n+","+Fn.requestContextSourceKey+"="+t.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new ag.Agent({keepAlive:!0,maxSockets:25,secureOptions:yo.SSL_OP_NO_SSLv2|yo.SSL_OP_NO_SSLv3|yo.SSL_OP_NO_TLSv1|yo.SSL_OP_NO_TLSv1_1}),e}();sg.exports=YP});var Gr=p((Yq,og)=>{"use strict";var To=Ge(),ll=me(),QP=function(){function e(){}return e.queryCorrelationId=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(n)){r(e.completedLookups[n]);return}else if(e.pendingLookups[n]){e.pendingLookups[n].push(r);return}e.pendingLookups[n]=[r];var i=function(){if(!!e.pendingLookups[n]){var a={method:"GET",disableAppInsightsAutoCollection:!0};ll.info(e.TAG,a);var s=To.makeRequest(t,n,a,function(o){if(o.statusCode===200){var c="";o.setEncoding("utf-8"),o.on("data",function(u){c+=u}),o.on("end",function(){ll.info(e.TAG,c);var u=e.correlationIdPrefix+c;e.completedLookups[n]=u,e.pendingLookups[n]&&e.pendingLookups[n].forEach(function(l){return l(u)}),delete e.pendingLookups[n]})}else o.statusCode>=400&&o.statusCode<500?(e.completedLookups[n]=void 0,delete e.pendingLookups[n]):setTimeout(i,t.correlationIdRetryIntervalMs)});s&&(s.on("error",function(o){ll.warn(e.TAG,o)}),s.end())}};setTimeout(i,0)},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter(function(a){return a!=r}),e.pendingLookups[n].length==0&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}else return e.generateRootId()},e.getRootId=function(t){var r=t.indexOf(".");r<0&&(r=t.length);var n=t[0]==="|"?1:0;return t.substring(n,r)},e.generateRootId=function(){return"|"+To.w3cTraceId()+"."},e.appendSuffix=function(t,r,n){if(t.length+r.length<e.requestIdMaxLength)return t+r+n;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var a=t[i-1];if(a==="."||a==="_")break}if(i<=1)return e.generateRootId();for(r=To.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=To.randomu32(),e}();og.exports=QP});var ta=p((Qq,cg)=>{"use strict";var be=Ge(),ZP=Gr(),JP=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string")if(t.split(",").length>1)this.traceId=be.w3cTraceId(),this.spanId=be.w3cTraceId().substr(0,16);else{var n=t.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=be.w3cTraceId(),this.spanId=be.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=be.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=be.w3cTraceId(),this.spanId=be.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=be.w3cTraceId(),this.spanId=be.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=be.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=be.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=be.w3cTraceId().substr(0,16),this.traceId=be.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var a=ZP.getRootId(r);e.isValidTraceId(a)||(this.legacyRootId=a,a=be.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=a,this.spanId=r}else this.traceId=be.w3cTraceId(),this.spanId=be.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.formatOpenTelemetryTraceFlags=function(t){var r="0"+t.toString(16);return r.substring(r.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=be.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();cg.exports=JP});var pl=p((Zq,ug)=>{"use strict";var eR=function(){function e(t){this.fieldmap=[],!!t&&(this.fieldmap=this.parseHeader(t))}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ")},e.validateKeyChars=function(t){var r=t.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),a=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return a&&s}else if(r.length==1)return Boolean(t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var a=0,s=i;a<s.length;a++){var o=s[a],c=o.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!e.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},e.strict=!0,e}();ug.exports=eR});var Nt=p((Jq,lg)=>{"use strict";var tR=function(){function e(){}return e}();lg.exports=tR});var fg=p((fl,pg)=>{"use strict";var rR=fl&&fl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nR=Nt(),iR=function(e){rR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(nR);pg.exports=iR});var dl=p((e1,dg)=>{"use strict";var aR=function(){function e(){}return e}();dg.exports=aR});var _g=p((t1,hg)=>{"use strict";var sR=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return e}();hg.exports=sR});var gg=p((hl,vg)=>{"use strict";var oR=hl&&hl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cR=dl(),uR=function(e){oR(t,e);function t(){return e.call(this)||this}return t}(cR);vg.exports=uR});var vl=p((r1,mg)=>{"use strict";var _l;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(_l||(_l={}));mg.exports=_l});var yg=p((n1,Eg)=>{"use strict";var lR=vl(),pR=function(){function e(){this.kind=lR.Measurement}return e}();Eg.exports=pR});var Sg=p((i1,Tg)=>{"use strict";var fR=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();Tg.exports=fR});var ml=p((gl,bg)=>{"use strict";var dR=gl&&gl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hR=Nt(),_R=function(e){dR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(hR);bg.exports=_R});var Ig=p((El,Ag)=>{"use strict";var vR=El&&El.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gR=Nt(),mR=function(e){vR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return t}(gR);Ag.exports=mR});var Og=p((a1,Cg)=>{"use strict";var ER=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();Cg.exports=ER});var Rg=p((yl,Pg)=>{"use strict";var yR=yl&&yl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TR=Nt(),SR=function(e){yR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r}return t}(TR);Pg.exports=SR});var wg=p((Tl,Ng)=>{"use strict";var bR=Tl&&Tl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AR=Nt(),IR=function(e){bR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return t}(AR);Ng.exports=IR});var xg=p((Sl,Dg)=>{"use strict";var CR=Sl&&Sl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OR=ml(),PR=function(e){CR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(OR);Dg.exports=PR});var Lg=p((bl,Mg)=>{"use strict";var RR=bl&&bl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NR=Nt(),wR=function(e){RR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return t}(NR);Mg.exports=wR});var kg=p((Al,qg)=>{"use strict";var DR=Al&&Al.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xR=Nt(),MR=function(e){DR(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(xR);qg.exports=MR});var Hg=p((s1,jg)=>{"use strict";var Il;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(Il||(Il={}));jg.exports=Il});var Bg=p((o1,Ug)=>{"use strict";var LR=function(){function e(){}return e}();Ug.exports=LR});var Cl=p(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.AvailabilityData=fg();he.Base=dl();he.ContextTagKeys=_g();he.Data=gg();he.DataPoint=yg();he.DataPointType=vl();he.Domain=Nt();he.Envelope=Sg();he.EventData=ml();he.ExceptionData=Ig();he.ExceptionDetails=Og();he.MessageData=Rg();he.MetricData=wg();he.PageViewData=xg();he.RemoteDependencyData=Lg();he.RequestData=kg();he.SeverityLevel=Hg();he.StackFrame=Bg()});var Fg=p(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.domainSupportsProperties=Gn.RemoteDependencyDataConstants=void 0;var Vr=Cl(),qR=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();Gn.RemoteDependencyDataConstants=qR;function kR(e){return"properties"in e||e instanceof Vr.EventData||e instanceof Vr.ExceptionData||e instanceof Vr.MessageData||e instanceof Vr.MetricData||e instanceof Vr.PageViewData||e instanceof Vr.RemoteDependencyData||e instanceof Vr.RequestData}Gn.domainSupportsProperties=kR});var Vg=p(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0})});var zg=p($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0})});var Xg=p(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0})});var Yg=p(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0})});var Zg=p(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0})});var em=p(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0})});var rm=p(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0})});var im=p(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0})});var sm=p(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0})});var cm=p(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0})});var lm=p(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0})});var fm=p(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0})});var dm=p(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.TelemetryType=ct.TelemetryTypeString=ct.baseTypeToTelemetryType=ct.telemetryTypeToBaseType=void 0;function jR(e){switch(e){case Ae.Event:return"EventData";case Ae.Exception:return"ExceptionData";case Ae.Trace:return"MessageData";case Ae.Metric:return"MetricData";case Ae.Request:return"RequestData";case Ae.Dependency:return"RemoteDependencyData";case Ae.Availability:return"AvailabilityData";case Ae.PageView:return"PageViewData"}}ct.telemetryTypeToBaseType=jR;function HR(e){switch(e){case"EventData":return Ae.Event;case"ExceptionData":return Ae.Exception;case"MessageData":return Ae.Trace;case"MetricData":return Ae.Metric;case"RequestData":return Ae.Request;case"RemoteDependencyData":return Ae.Dependency;case"AvailabilityData":return Ae.Availability;case"PageViewData":return Ae.PageView}}ct.baseTypeToTelemetryType=HR;ct.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Ae;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"})(Ae=ct.TelemetryType||(ct.TelemetryType={}))});var hm=p(ge=>{"use strict";var UR=ge&&ge.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ve=ge&&ge.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UR(t,e,r)};Object.defineProperty(ge,"__esModule",{value:!0});Ve(Vg(),ge);Ve(zg(),ge);Ve(Xg(),ge);Ve(Yg(),ge);Ve(Zg(),ge);Ve(em(),ge);Ve(rm(),ge);Ve(im(),ge);Ve(sm(),ge);Ve(cm(),ge);Ve(lm(),ge);Ve(fm(),ge);Ve(dm(),ge)});var vm=p(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0})});var mm=p(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0})});var ym=p(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0})});var Sm=p(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0})});var Am=p(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0})});var Cm=p(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0})});var Pm=p(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0})});var Nm=p(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0})});var wm=p(He=>{"use strict";var BR=He&&He.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),tr=He&&He.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&BR(t,e,r)};Object.defineProperty(He,"__esModule",{value:!0});tr(vm(),He);tr(mm(),He);tr(ym(),He);tr(Sm(),He);tr(Am(),He);tr(Cm(),He);tr(Pm(),He);tr(Nm(),He)});var Me=p(vt=>{"use strict";var FR=vt&&vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),So=vt&&vt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&FR(t,e,r)};Object.defineProperty(vt,"__esModule",{value:!0});So(Fg(),vt);So(Cl(),vt);So(hm(),vt);So(wm(),vt)});var Ol=p((M1,Dm)=>{"use strict";var GR=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(t,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=t;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var a in r)i[a]=r[a]&&r[a].toString&&r[a].toString()}this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();Dm.exports=GR});var Nl=p((Rl,Mm)=>{"use strict";var VR=Rl&&Rl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bo=require("url"),$R=Me(),xm=Ge(),$e=Bn(),zR=Ol(),rr=Gr(),KR=pl(),Pl=ta(),XR=function(e){VR(t,e);function t(r,n){var i=e.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return t.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},t.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},t.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+bo.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},t.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[t.keys.locationIp]=r[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=r[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=r[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=r[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(r),n[t.keys.operationParentId]=this.getOperationParentId(r),n[t.keys.operationId]=this.getOperationId(r),n},t.prototype.getOperationId=function(r){return r[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(r){return r[t.keys.operationParentId]||this.parentId||this.getOperationId(r)},t.prototype.getOperationName=function(r){return r[t.keys.operationName]||this.method+" "+bo.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=bo.parse(r.url),a=i.pathname,s=i.search,o=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",c=bo.format({protocol:o,host:r.headers.host,pathname:a,search:s});return c},t.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(a){var s=r.exec(a);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},t.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(xm.getCookie(r,n));return i},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=xm.getCorrelationContextTarget(r,$e.requestContextSourceKey),r.headers){var i=r.headers[$e.traceStateHeader]?r.headers[$e.traceStateHeader].toString():null,a=r.headers[$e.traceparentHeader]?r.headers[$e.traceparentHeader].toString():null,s=r.headers[$e.requestIdHeader]?r.headers[$e.requestIdHeader].toString():null,o=r.headers[$e.parentIdHeader]?r.headers[$e.parentIdHeader].toString():null,c=r.headers[$e.rootIdHeader]?r.headers[$e.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[$e.correlationContextHeader]?r.headers[$e.correlationContextHeader].toString():null,rr.w3cEnabled&&(a||i)?(this.traceparent=new Pl(a?a.toString():null),this.tracestate=a&&i&&new KR(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?rr.w3cEnabled?(this.traceparent=new Pl(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=rr.generateRequestId(this.parentId),this.operationId=rr.getRootId(this.requestId)):rr.w3cEnabled?(this.traceparent=new Pl,this.traceparent.parentId=o,this.traceparent.legacyRootId=c||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=rr.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=rr.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=rr.getRootId(this.requestId))}},t.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},t.keys=new $R.ContextTagKeys,t}(zR);Mm.exports=XR});var Qm=p((I,Ym)=>{I=Ym.exports=w;var H;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?H=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:H=function(){};I.SEMVER_SPEC_VERSION="2.0.0";var wl=256,Ao=Number.MAX_SAFE_INTEGER||9007199254740991,Dl=16,G=I.re=[],v=I.src=[],P=0,Vn=P++;v[Vn]="0|[1-9]\\d*";var $n=P++;v[$n]="[0-9]+";var xl=P++;v[xl]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Lm=P++;v[Lm]="("+v[Vn]+")\\.("+v[Vn]+")\\.("+v[Vn]+")";var qm=P++;v[qm]="("+v[$n]+")\\.("+v[$n]+")\\.("+v[$n]+")";var Ml=P++;v[Ml]="(?:"+v[Vn]+"|"+v[xl]+")";var Ll=P++;v[Ll]="(?:"+v[$n]+"|"+v[xl]+")";var ql=P++;v[ql]="(?:-("+v[Ml]+"(?:\\."+v[Ml]+")*))";var kl=P++;v[kl]="(?:-?("+v[Ll]+"(?:\\."+v[Ll]+")*))";var jl=P++;v[jl]="[0-9A-Za-z-]+";var ra=P++;v[ra]="(?:\\+("+v[jl]+"(?:\\."+v[jl]+")*))";var Hl=P++,km="v?"+v[Lm]+v[ql]+"?"+v[ra]+"?";v[Hl]="^"+km+"$";var Ul="[v=\\s]*"+v[qm]+v[kl]+"?"+v[ra]+"?",Bl=P++;v[Bl]="^"+Ul+"$";var zn=P++;v[zn]="((?:<|>)?=?)";var Io=P++;v[Io]=v[$n]+"|x|X|\\*";var Co=P++;v[Co]=v[Vn]+"|x|X|\\*";var $r=P++;v[$r]="[v=\\s]*("+v[Co]+")(?:\\.("+v[Co]+")(?:\\.("+v[Co]+")(?:"+v[ql]+")?"+v[ra]+"?)?)?";var Kn=P++;v[Kn]="[v=\\s]*("+v[Io]+")(?:\\.("+v[Io]+")(?:\\.("+v[Io]+")(?:"+v[kl]+")?"+v[ra]+"?)?)?";var jm=P++;v[jm]="^"+v[zn]+"\\s*"+v[$r]+"$";var Hm=P++;v[Hm]="^"+v[zn]+"\\s*"+v[Kn]+"$";var Um=P++;v[Um]="(?:^|[^\\d])(\\d{1,"+Dl+"})(?:\\.(\\d{1,"+Dl+"}))?(?:\\.(\\d{1,"+Dl+"}))?(?:$|[^\\d])";var Oo=P++;v[Oo]="(?:~>?)";var Po=P++;v[Po]="(\\s*)"+v[Oo]+"\\s+";G[Po]=new RegExp(v[Po],"g");var WR="$1~",Bm=P++;v[Bm]="^"+v[Oo]+v[$r]+"$";var Fm=P++;v[Fm]="^"+v[Oo]+v[Kn]+"$";var Ro=P++;v[Ro]="(?:\\^)";var No=P++;v[No]="(\\s*)"+v[Ro]+"\\s+";G[No]=new RegExp(v[No],"g");var YR="$1^",Gm=P++;v[Gm]="^"+v[Ro]+v[$r]+"$";var Vm=P++;v[Vm]="^"+v[Ro]+v[Kn]+"$";var Fl=P++;v[Fl]="^"+v[zn]+"\\s*("+Ul+")$|^$";var Gl=P++;v[Gl]="^"+v[zn]+"\\s*("+km+")$|^$";var na=P++;v[na]="(\\s*)"+v[zn]+"\\s*("+Ul+"|"+v[$r]+")";G[na]=new RegExp(v[na],"g");var QR="$1$2$3",$m=P++;v[$m]="^\\s*("+v[$r]+")\\s+-\\s+("+v[$r]+")\\s*$";var zm=P++;v[zm]="^\\s*("+v[Kn]+")\\s+-\\s+("+v[Kn]+")\\s*$";var Km=P++;v[Km]="(<|>)?=?\\s*\\*";for(var zr=0;zr<P;zr++)H(zr,v[zr]),G[zr]||(G[zr]=new RegExp(v[zr]));I.parse=Kr;function Kr(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof w)return e;if(typeof e!="string"||e.length>wl)return null;var r=t.loose?G[Bl]:G[Hl];if(!r.test(e))return null;try{return new w(e,t)}catch(n){return null}}I.valid=ZR;function ZR(e,t){var r=Kr(e,t);return r?r.version:null}I.clean=JR;function JR(e,t){var r=Kr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}I.SemVer=w;function w(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof w){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>wl)throw new TypeError("version is longer than "+wl+" characters");if(!(this instanceof w))return new w(e,t);H("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?G[Bl]:G[Hl]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ao||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ao||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ao||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Ao)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}w.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};w.prototype.toString=function(){return this.version};w.prototype.compare=function(e){return H("SemVer.compare",this.version,this.options,e),e instanceof w||(e=new w(e,this.options)),this.compareMain(e)||this.comparePre(e)};w.prototype.compareMain=function(e){return e instanceof w||(e=new w(e,this.options)),Xn(this.major,e.major)||Xn(this.minor,e.minor)||Xn(this.patch,e.patch)};w.prototype.comparePre=function(e){if(e instanceof w||(e=new w(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(H("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Xn(r,n)}while(++t)};w.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};I.inc=eN;function eN(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new w(e,r).inc(t,n).version}catch(i){return null}}I.diff=tN;function tN(e,t){if(Vl(e,t))return null;var r=Kr(e),n=Kr(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}I.compareIdentifiers=Xn;var Xm=/^[0-9]+$/;function Xn(e,t){var r=Xm.test(e),n=Xm.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}I.rcompareIdentifiers=rN;function rN(e,t){return Xn(t,e)}I.major=nN;function nN(e,t){return new w(e,t).major}I.minor=iN;function iN(e,t){return new w(e,t).minor}I.patch=aN;function aN(e,t){return new w(e,t).patch}I.compare=wt;function wt(e,t,r){return new w(e,r).compare(new w(t,r))}I.compareLoose=sN;function sN(e,t){return wt(e,t,!0)}I.rcompare=oN;function oN(e,t,r){return wt(t,e,r)}I.sort=cN;function cN(e,t){return e.sort(function(r,n){return I.compare(r,n,t)})}I.rsort=uN;function uN(e,t){return e.sort(function(r,n){return I.rcompare(r,n,t)})}I.gt=ia;function ia(e,t,r){return wt(e,t,r)>0}I.lt=wo;function wo(e,t,r){return wt(e,t,r)<0}I.eq=Vl;function Vl(e,t,r){return wt(e,t,r)===0}I.neq=Wm;function Wm(e,t,r){return wt(e,t,r)!==0}I.gte=$l;function $l(e,t,r){return wt(e,t,r)>=0}I.lte=zl;function zl(e,t,r){return wt(e,t,r)<=0}I.cmp=Do;function Do(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Vl(e,r,n);case"!=":return Wm(e,r,n);case">":return ia(e,r,n);case">=":return $l(e,r,n);case"<":return wo(e,r,n);case"<=":return zl(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}I.Comparator=Qe;function Qe(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Qe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Qe))return new Qe(e,t);H("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===aa?this.value="":this.value=this.operator+this.semver.version,H("comp",this)}var aa={};Qe.prototype.parse=function(e){var t=this.options.loose?G[Fl]:G[Gl],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new w(r[2],this.options.loose):this.semver=aa};Qe.prototype.toString=function(){return this.value};Qe.prototype.test=function(e){return H("Comparator.test",e,this.options.loose),this.semver===aa?!0:(typeof e=="string"&&(e=new w(e,this.options)),Do(e,this.operator,this.semver,this.options))};Qe.prototype.intersects=function(e,t){if(!(e instanceof Qe))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new J(e.value,t),xo(this.value,r,t);if(e.operator==="")return r=new J(this.value,t),xo(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Do(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Do(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||c};I.Range=J;function J(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof J)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new J(e.raw,t);if(e instanceof Qe)return new J(e.value,t);if(!(this instanceof J))return new J(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}J.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};J.prototype.toString=function(){return this.range};J.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?G[zm]:G[$m];e=e.replace(r,EN),H("hyphen replace",e),e=e.replace(G[na],QR),H("comparator trim",e,G[na]),e=e.replace(G[Po],WR),e=e.replace(G[No],YR),e=e.split(/\s+/).join(" ");var n=t?G[Fl]:G[Gl],i=e.split(" ").map(function(a){return pN(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new Qe(a,this.options)},this),i};J.prototype.intersects=function(e,t){if(!(e instanceof J))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};I.toComparators=lN;function lN(e,t){return new J(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function pN(e,t){return H("comp",e,t),e=hN(e,t),H("caret",e),e=fN(e,t),H("tildes",e),e=vN(e,t),H("xrange",e),e=mN(e,t),H("stars",e),e}function Le(e){return!e||e.toLowerCase()==="x"||e==="*"}function fN(e,t){return e.trim().split(/\s+/).map(function(r){return dN(r,t)}).join(" ")}function dN(e,t){var r=t.loose?G[Fm]:G[Bm];return e.replace(r,function(n,i,a,s,o){H("tilde",e,n,i,a,s,o);var c;return Le(i)?c="":Le(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Le(s)?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(H("replaceTilde pr",o),c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",H("tilde return",c),c})}function hN(e,t){return e.trim().split(/\s+/).map(function(r){return _N(r,t)}).join(" ")}function _N(e,t){H("caret",e,t);var r=t.loose?G[Vm]:G[Gm];return e.replace(r,function(n,i,a,s,o){H("caret",e,n,i,a,s,o);var c;return Le(i)?c="":Le(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Le(s)?i==="0"?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(H("replaceCaret pr",o),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(H("no pr"),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),H("caret return",c),c})}function vN(e,t){return H("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return gN(r,t)}).join(" ")}function gN(e,t){e=e.trim();var r=t.loose?G[Hm]:G[jm];return e.replace(r,function(n,i,a,s,o,c){H("xRange",e,n,i,a,s,o,c);var u=Le(a),l=u||Le(s),f=l||Le(o),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),o=0,i===">"?(i=">=",l?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",l?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):l?n=">="+a+".0.0 <"+(+a+1)+".0.0":f&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),H("xRange return",n),n})}function mN(e,t){return H("replaceStars",e,t),e.trim().replace(G[Km],"")}function EN(e,t,r,n,i,a,s,o,c,u,l,f,d){return Le(r)?t="":Le(n)?t=">="+r+".0.0":Le(i)?t=">="+r+"."+n+".0":t=">="+t,Le(c)?o="":Le(u)?o="<"+(+c+1)+".0.0":Le(l)?o="<"+c+"."+(+u+1)+".0":f?o="<="+c+"."+u+"."+l+"-"+f:o="<="+o,(t+" "+o).trim()}J.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new w(e,this.options));for(var t=0;t<this.set.length;t++)if(yN(this.set[t],e,this.options))return!0;return!1};function yN(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(H(e[n].semver),e[n].semver!==aa&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}I.satisfies=xo;function xo(e,t,r){try{t=new J(t,r)}catch(n){return!1}return t.test(e)}I.maxSatisfying=TN;function TN(e,t,r){var n=null,i=null;try{var a=new J(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new w(n,r))}),n}I.minSatisfying=SN;function SN(e,t,r){var n=null,i=null;try{var a=new J(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new w(n,r))}),n}I.minVersion=bN;function bN(e,t){e=new J(e,t);var r=new w("0.0.0");if(e.test(r)||(r=new w("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new w(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||ia(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}I.validRange=AN;function AN(e,t){try{return new J(e,t).range||"*"}catch(r){return null}}I.ltr=IN;function IN(e,t,r){return Kl(e,t,"<",r)}I.gtr=CN;function CN(e,t,r){return Kl(e,t,">",r)}I.outside=Kl;function Kl(e,t,r,n){e=new w(e,n),t=new J(t,n);var i,a,s,o,c;switch(r){case">":i=ia,a=zl,s=wo,o=">",c=">=";break;case"<":i=wo,a=$l,s=ia,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xo(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(h){h.semver===aa&&(h=new Qe(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,n)?f=h:s(h.semver,d.semver,n)&&(d=h)}),f.operator===o||f.operator===c||(!d.operator||d.operator===o)&&a(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}I.prerelease=ON;function ON(e,t){var r=Kr(e,t);return r&&r.prerelease.length?r.prerelease:null}I.intersects=PN;function PN(e,t,r){return e=new J(e,r),t=new J(t,r),e.intersects(t)}I.coerce=RN;function RN(e){if(e instanceof w)return e;if(typeof e!="string")return null;var t=e.match(G[Um]);return t==null?null:Kr(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var Mo=p((L1,eE)=>{"use strict";function Xl(e){return typeof e=="function"}var qe=console.error.bind(console);function sa(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function oa(e){e&&e.logger&&(Xl(e.logger)?qe=e.logger:qe("new logger isn't a function, not replacing"))}function Zm(e,t,r){if(!e||!e[t]){qe("no original function "+t+" to wrap");return}if(!r){qe("no wrapper function"),qe(new Error().stack);return}if(!Xl(e[t])||!Xl(r)){qe("original object and wrapper must be functions");return}var n=e[t],i=r(n,t);return sa(i,"__original",n),sa(i,"__unwrap",function(){e[t]===i&&sa(e,t,n)}),sa(i,"__wrapped",!0),sa(e,t,i),i}function NN(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{qe("must provide one or more modules to patch"),qe(new Error().stack);return}if(!(t&&Array.isArray(t))){qe("must provide one or more functions to wrap on modules");return}e.forEach(function(n){t.forEach(function(i){Zm(n,i,r)})})}function Jm(e,t){if(!e||!e[t]){qe("no function to unwrap."),qe(new Error().stack);return}if(!e[t].__unwrap)qe("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function wN(e,t){if(e)Array.isArray(e)||(e=[e]);else{qe("must provide one or more modules to patch"),qe(new Error().stack);return}if(!(t&&Array.isArray(t))){qe("must provide one or more functions to unwrap on modules");return}e.forEach(function(r){t.forEach(function(n){Jm(r,n)})})}oa.wrap=Zm;oa.massWrap=NN;oa.unwrap=Jm;oa.massUnwrap=wN;eE.exports=oa});var ko=p((q1,iE)=>{"use strict";var tE=Mo(),Wn=tE.wrap,Lo=tE.unwrap,Dt="wrap@before";function qo(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function DN(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],a=e[Dt];if(typeof a=="function")a(i);else if(Array.isArray(a))for(var s=a.length,o=0;o<s;o++)a[o](i)}}function rE(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r}function xN(e,t,r){var n=rE(e,t),i=n.filter(function(a){return r.indexOf(a)===-1});i.length>0&&DN(e,i)}function nE(e,t){if(!!e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}iE.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=rE(this,c).slice();try{var f=s.call(this,c,u);return xN(this,c,l),f}finally{this.on.__wrapped||Wn(this,"on",i),this.addListener.__wrapped||Wn(this,"addListener",i)}}}function a(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(f){return function(){this._events[c]=u;try{return f.apply(this,arguments)}finally{u=this._events[c],this._events[c]=nE(u,n)}}}Wn(this,"removeListener",l);try{return this._events[c]=nE(u,n),s.apply(this,arguments)}finally{Lo(this,"removeListener"),this._events[c]=u}}}t[Dt]?typeof t[Dt]=="function"?qo(t,Dt,[t[Dt],r]):Array.isArray(t[Dt])&&t[Dt].push(r):qo(t,Dt,r),t.__wrapped||(Wn(t,"addListener",i),Wn(t,"on",i),Wn(t,"emit",a),qo(t,"__unwrap",function(){Lo(t,"addListener"),Lo(t,"on"),Lo(t,"emit"),delete t[Dt],delete t.__wrapped}),qo(t,"__wrapped",!0))}});var cE=p((k1,oE)=>{"use strict";var L=require("util"),xt=require("assert"),MN=ko(),X=require("async_hooks"),ca="cls@contexts",ua="error@context",ee=process.env.DEBUG_CLS_HOOKED,q=-1;oE.exports={getNamespace:aE,createNamespace:LN,destroyNamespace:sE,reset:qN,ERROR_SYMBOL:ua};function Ze(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Ze.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,ee){let n=" ".repeat(this._indent<0?0:this._indent);Y(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+q+" active:"+L.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Ze.prototype.get=function(t){if(!this.active){if(ee){let r=X.currentId(),n=X.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Y(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${q} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(ee){let r=X.executionAsyncId(),n=X.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Y(i+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+q+" active:"+L.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Y(`${i}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${q} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${L.inspect(this.active)}`)}return this.active[t]};Ze.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=q,ee){let r=X.executionAsyncId(),n=X.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Y(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${q} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${L.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};Ze.prototype.run=function(t){let r=this.createContext();this.enter(r);try{if(ee){let n=X.triggerAsyncId(),i=X.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Y(`${a}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${q} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${L.inspect(r)}`)}return t(r),r}catch(n){throw n&&(n[ua]=r),n}finally{if(ee){let n=X.triggerAsyncId(),i=X.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Y(`${a}CONTEXT-RUN END: (${this.name}) currentUid:${q} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${L.inspect(r)}`)}this.exit(r)}};Ze.prototype.runAndReturn=function(t){let r;return this.run(function(n){r=t(n)}),r};Ze.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return ee&&Y("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+q+" len:"+this._set.length+" "+L.inspect(r)),n.then(i=>(ee&&Y("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+q+" len:"+this._set.length+" "+L.inspect(r)),this.exit(r),i)).catch(i=>{throw i[ua]=r,ee&&Y("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+q+" len:"+this._set.length+" "+L.inspect(r)),this.exit(r),i})};Ze.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[ua]=r),a}finally{n.exit(r)}}};Ze.prototype.enter=function(t){if(xt.ok(t,"context must be provided for entering"),ee){let r=X.executionAsyncId(),n=X.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Y(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${q} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${L.inspect(t)}`)}this._set.push(this.active),this.active=t};Ze.prototype.exit=function(t){if(xt.ok(t,"context must be provided for exiting"),ee){let n=X.executionAsyncId(),i=X.triggerAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Y(`${a}CONTEXT-EXIT: (${this.name}) currentUid:${q} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${L.inspect(t)}`)}if(this.active===t){xt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(ee&&Y("??ERROR?? context exiting but not entered - ignoring: "+L.inspect(t)),xt.ok(r>=0,`context not currently entered; can't exit. 
`+L.inspect(this)+`
`+L.inspect(t))):(xt.ok(r,"can't remove top context"),this._set.splice(r,1))};Ze.prototype.bindEmitter=function(t){xt.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[ca]||(s[ca]=Object.create(null)),s[ca][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[ca]))return s;let o=s,c=s[ca];return Object.keys(c).forEach(function(u){let l=c[u];o=l.namespace.bind(o,l.context)}),o}MN(t,i,a)};Ze.prototype.fromException=function(t){return t[ua]};function aE(e){return process.namespaces[e]}function LN(e){xt.ok(e,"namespace must be given a name."),ee&&Y(`NS-CREATING NAMESPACE (${e})`);let t=new Ze(e);return t.id=q,X.createHook({init(n,i,a,s){if(q=X.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),ee){let o=" ".repeat(t._indent<0?0:t._indent);Y(`${o}INIT [${i}] (${e}) asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(q===0){let o=X.triggerAsyncId(),c=t._contexts.get(o);if(c){if(t._contexts.set(n,c),ee){let u=" ".repeat(t._indent<0?0:t._indent);Y(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${q} triggerId:${o} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(ee){let u=" ".repeat(t._indent<0?0:t._indent);Y(`${u}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${q} triggerId:${o} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(ee&&i==="PROMISE"){Y(L.inspect(s,{showHidden:!0}));let o=s.parentId,c=" ".repeat(t._indent<0?0:t._indent);Y(`${c}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${o} asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){q=X.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(q),i){if(ee){let a=X.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Y(`${s}BEFORE (${e}) asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${L.inspect(i)}`),t._indent+=2}t.enter(i)}else if(ee){let a=X.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Y(`${s}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${L.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){q=X.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(q),i){if(ee){let a=X.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Y(`${s}AFTER (${e}) asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${L.inspect(i)}`)}t.exit(i)}else if(ee){let a=X.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Y(`${s}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${q} triggerId:${a} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${L.inspect(i)}`)}},destroy(n){if(q=X.executionAsyncId(),ee){let i=X.triggerAsyncId(),a=" ".repeat(t._indent<0?0:t._indent);Y(`${a}DESTROY (${e}) currentUid:${q} asyncId:${n} triggerId:${i} active:${L.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${L.inspect(t._contexts.get(q))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t}function sE(e){let t=aE(e);xt.ok(t,`can't delete nonexistent namespace! "`+e+'"'),xt.ok(t.id,"don't assign to process.namespaces directly! "+L.inspect(t)),process.namespaces[e]=null}function qN(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){sE(e)}),process.namespaces=Object.create(null)}process.namespaces={};function Y(...e){ee&&process._rawDebug(`${L.format(...e)}`)}});var lE=p((j1,uE)=>{"use strict";function kN(){}uE.exports=function(){let t=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let a=i[0];if(typeof a!="function")throw new TypeError("callback is not a function");let s=new kN,o=--r.counter;return t.init.call(s,o,0,null,null),i[0]=function(){t.pre.call(s,o);let c=!0;try{a.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,o,!0),t.destroy.call(null,o)})}t.post.call(s,o,!1),t.destroy.call(null,o)},n.apply(process,i)}}});var fE=p((H1,pE)=>{"use strict";function jN(){}pE.exports=function(){let t=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function a(u,l,f,d){return typeof u!="function"?d?s(f):o(f):function(){t.pre.call(l,f);try{return u.apply(this,arguments)}finally{t.post.call(l,f,!1),t.destroy.call(null,f)}}}function s(u){return function(f){return t.destroy.call(null,u),f}}function o(u){return function(f){throw t.destroy.call(null,u),f}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let f=new jN,d=--r.counter;return t.init.call(f,d,0,null,null),i.call(this,a(u,f,d,!0),a(l,f,d,!1))}}});var hE=p((U1,dE)=>{"use strict";var ze=require("timers");function HN(){}function UN(){}function BN(){}var FN=new Map,GN=new Map,VN=new Map,Wl=null,Yl=!1;dE.exports=function(){Ql(this._hooks,this._state,"setTimeout","clearTimeout",HN,FN,!0),Ql(this._hooks,this._state,"setInterval","clearInterval",UN,GN,!1),Ql(this._hooks,this._state,"setImmediate","clearImmediate",BN,VN,!0),global.setTimeout=ze.setTimeout,global.setInterval=ze.setInterval,global.setImmediate=ze.setImmediate,global.clearTimeout=ze.clearTimeout,global.clearInterval=ze.clearInterval,global.clearImmediate=ze.clearImmediate};function Ql(e,t,r,n,i,a,s){let o=ze[r],c=ze[n];ze[r]=function(){if(!t.enabled)return o.apply(ze,arguments);let u=new Array(arguments.length);for(let m=0;m<arguments.length;m++)u[m]=arguments[m];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let f=new i,d=--t.counter,h;return e.init.call(f,d,0,null,null),u[0]=function(){Wl=h,e.pre.call(f,d);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(f,d,!0),a.delete(h),e.destroy.call(null,d)})}e.post.call(f,d,!1),Wl=null,(s||Yl)&&(Yl=!1,a.delete(h),e.destroy.call(null,d))},h=o.apply(ze,u),a.set(h,d),h},ze[n]=function(u){if(Wl===u&&u!==null)Yl=!0;else if(a.has(u)){let l=a.get(u);a.delete(u),e.destroy.call(null,l)}c.apply(ze,arguments)}}});var Zl=p((B1,$N)=>{$N.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var gE=p((F1,vE)=>{"use strict";var la=process.binding("async_wrap"),zN=la.Providers.TIMERWRAP,_E={nextTick:lE(),promise:fE(),timers:hE()},pa=new Set;function KN(){this.enabled=!1,this.counter=0}function Jl(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,a,s,o){if(a===zN){pa.add(i);return}for(let c of e)c(i,this,a,s,o)},this.pre=function(i){if(!pa.has(i))for(let a of t)a(i,this)},this.post=function(i,a){if(!pa.has(i))for(let s of r)s(i,this,a)},this.destroy=function(i){if(pa.has(i)){pa.delete(i);return}for(let a of n)a(i)}}Jl.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)};function jo(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}Jl.prototype.remove=function(e){e.init&&jo(this.initFns,e.init),e.pre&&jo(this.preFns,e.pre),e.post&&jo(this.postFns,e.post),e.destroy&&jo(this.destroyFns,e.destroy)};function fa(){this._state=new KN,this._hooks=new Jl,this.version=Zl().version,this.providers=la.Providers;for(let e of Object.keys(_E))_E[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),la.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}vE.exports=fa;fa.prototype.addHooks=function(e){this._hooks.add(e)};fa.prototype.removeHooks=function(e){this._hooks.remove(e)};fa.prototype.enable=function(){this._state.enabled=!0,la.enable()};fa.prototype.disable=function(){this._state.enabled=!1,la.disable()}});var ep=p((G1,XN)=>{XN.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var EE=p((V1,mE)=>{function WN(e){try{return Error.prototype.toString.call(e)}catch(t){try{return"<error: "+t+">"}catch(r){return"<error>"}}}mE.exports=function(t,r){var n=[];n.push(WN(t));for(var i=0;i<r.length;i++){var a=r[i],s;try{s=a.toString()}catch(o){try{s="<error: "+o+">"}catch(c){s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var bE=p(($1,SE)=>{var Ho=EE();function yE(){this.extend=new da,this.filter=new da,this.format=new ha,this.version=ep().version}var tp=!1;yE.prototype.callSite=function e(t){t||(t={}),tp=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return tp=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var nr=new yE;function da(){this._modifiers=[]}da.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t};da.prototype.attach=function(e){this._modifiers.push(e)};da.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?!1:(this._modifiers.splice(t,1),!0)};function ha(){this._formater=Ho,this._previous=void 0}ha.prototype.replace=function(e){e?this._formater=e:this.restore()};ha.prototype.restore=function(){this._formater=Ho,this._previous=void 0};ha.prototype._backup=function(){this._previous=this._formater};ha.prototype._roolback=function(){this._previous===Ho?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&nr.format.replace(Error.prepareStackTrace);var rp=!1;function TE(e,t){if(tp)return t;if(rp)return Ho(e,t);var r=t.concat();r=nr.extend._modify(e,r),r=nr.filter._modify(e,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:r}),rp=!0;var n=nr.format._formater(e,r);return rp=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return TE},set:function(e){e===TE?nr.format._roolback():(nr.format._backup(),nr.format.replace(e))}});function YN(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:YN,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0});SE.exports=nr});var ip=p((z1,np)=>{if(global._stackChain)if(global._stackChain.version===ep().version)np.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else np.exports=global._stackChain=bE()});var AE=p((K1,ap)=>{"use strict";var QN=gE();if(global._asyncHook)if(global._asyncHook.version===Zl().version)ap.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else ip().filter.attach(function(t,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),ap.exports=global._asyncHook=new QN});var NE=p((X1,RE)=>{"use strict";var le=require("util"),Mt=require("assert"),ZN=ko(),Yn=AE(),_a="cls@contexts",va="error@context",IE=[];for(let e in Yn.providers)IE[Yn.providers[e]]=e;var se=process.env.DEBUG_CLS_HOOKED,_e=-1;RE.exports={getNamespace:CE,createNamespace:JN,destroyNamespace:OE,reset:ew,ERROR_SYMBOL:va};function Je(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Je.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return se&&pe("    SETTING KEY:"+t+"="+r+" in ns:"+this.name+" uid:"+_e+" active:"+le.inspect(this.active,!0)),this.active[t]=r,r};Je.prototype.get=function(t){if(!this.active){se&&pe("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+_e+" active:"+le.inspect(this.active,!0));return}return se&&pe("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+_e+" active:"+le.inspect(this.active,!0)),this.active[t]};Je.prototype.createContext=function(){se&&pe("   CREATING Context: "+this.name+" uid:"+_e+" len:"+this._set.length+"  active:"+le.inspect(this.active,!0,2,!0));let t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=_e,se&&pe("   CREATED Context: "+this.name+" uid:"+_e+" len:"+this._set.length+"  context:"+le.inspect(t,!0,2,!0)),t};Je.prototype.run=function(t){let r=this.createContext();this.enter(r);try{return se&&pe(" BEFORE RUN: "+this.name+" uid:"+_e+" len:"+this._set.length+" "+le.inspect(r)),t(r),r}catch(n){throw n&&(n[va]=r),n}finally{se&&pe(" AFTER RUN: "+this.name+" uid:"+_e+" len:"+this._set.length+" "+le.inspect(r)),this.exit(r)}};Je.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n)}),r};Je.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return se&&pe(" BEFORE runPromise: "+this.name+" uid:"+_e+" len:"+this._set.length+" "+le.inspect(r)),n.then(i=>(se&&pe(" AFTER runPromise: "+this.name+" uid:"+_e+" len:"+this._set.length+" "+le.inspect(r)),this.exit(r),i)).catch(i=>{throw i[va]=r,se&&pe(" AFTER runPromise: "+this.name+" uid:"+_e+" len:"+this._set.length+" "+le.inspect(r)),this.exit(r),i})};Je.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[va]=r),a}finally{n.exit(r)}}};Je.prototype.enter=function(t){Mt.ok(t,"context must be provided for entering"),se&&pe("  ENTER "+this.name+" uid:"+_e+" len:"+this._set.length+" context: "+le.inspect(t)),this._set.push(this.active),this.active=t};Je.prototype.exit=function(t){if(Mt.ok(t,"context must be provided for exiting"),se&&pe("  EXIT "+this.name+" uid:"+_e+" len:"+this._set.length+" context: "+le.inspect(t)),this.active===t){Mt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(se&&pe("??ERROR?? context exiting but not entered - ignoring: "+le.inspect(t)),Mt.ok(r>=0,`context not currently entered; can't exit. 
`+le.inspect(this)+`
`+le.inspect(t))):(Mt.ok(r,"can't remove top context"),this._set.splice(r,1))};Je.prototype.bindEmitter=function(t){Mt.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[_a]||(s[_a]=Object.create(null)),s[_a][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[_a]))return s;let o=s,c=s[_a];return Object.keys(c).forEach(function(u){let l=c[u];o=l.namespace.bind(o,l.context)}),o}ZN(t,i,a)};Je.prototype.fromException=function(t){return t[va]};function CE(e){return process.namespaces[e]}function JN(e){Mt.ok(e,"namespace must be given a name."),se&&pe("CREATING NAMESPACE "+e);let t=new Je(e);return t.id=_e,Yn.addHooks({init(r,n,i,a,s){_e=r,a?(t._contexts.set(r,t._contexts.get(a)),se&&pe("PARENTID: "+e+" uid:"+r+" parent:"+a+" provider:"+i)):t._contexts.set(_e,t.active),se&&pe("INIT "+e+" uid:"+r+" parent:"+a+" provider:"+IE[i]+" active:"+le.inspect(t.active,!0))},pre(r,n){_e=r;let i=t._contexts.get(r);i?(se&&pe(" PRE "+e+" uid:"+r+" handle:"+Uo(n)+" context:"+le.inspect(i)),t.enter(i)):se&&pe(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+Uo(n))},post(r,n){_e=r;let i=t._contexts.get(r);i?(se&&pe(" POST "+e+" uid:"+r+" handle:"+Uo(n)+" context:"+le.inspect(i)),t.exit(i)):se&&pe(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+Uo(n))},destroy(r){_e=r,se&&pe("DESTROY "+e+" uid:"+r+" context:"+le.inspect(t._contexts.get(_e))+" active:"+le.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t}function OE(e){let t=CE(e);Mt.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Mt.ok(t.id,"don't assign to process.namespaces directly! "+le.inspect(t)),process.namespaces[e]=null}function ew(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){OE(e)}),process.namespaces=Object.create(null)}process.namespaces={};Yn._state&&!Yn._state.enabled&&Yn.enable();function pe(e){process.env.DEBUG&&process._rawDebug(e)}function Uo(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name}if(se){sp=ip();for(PE in sp.filter._modifiers)sp.filter.deattach(PE)}var sp,PE});var wE=p((W1,op)=>{"use strict";var tw=Qm();process&&tw.gte(process.versions.node,"8.0.0")?op.exports=cE():op.exports=NE()});var XE=p((C,KE)=>{C=KE.exports=D;var U;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?U=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:U=function(){};C.SEMVER_SPEC_VERSION="2.0.0";var cp=256,Bo=Number.MAX_SAFE_INTEGER||9007199254740991,up=16,V=C.re=[],g=C.src=[],R=0,Qn=R++;g[Qn]="0|[1-9]\\d*";var Zn=R++;g[Zn]="[0-9]+";var lp=R++;g[lp]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var DE=R++;g[DE]="("+g[Qn]+")\\.("+g[Qn]+")\\.("+g[Qn]+")";var xE=R++;g[xE]="("+g[Zn]+")\\.("+g[Zn]+")\\.("+g[Zn]+")";var pp=R++;g[pp]="(?:"+g[Qn]+"|"+g[lp]+")";var fp=R++;g[fp]="(?:"+g[Zn]+"|"+g[lp]+")";var dp=R++;g[dp]="(?:-("+g[pp]+"(?:\\."+g[pp]+")*))";var hp=R++;g[hp]="(?:-?("+g[fp]+"(?:\\."+g[fp]+")*))";var _p=R++;g[_p]="[0-9A-Za-z-]+";var ga=R++;g[ga]="(?:\\+("+g[_p]+"(?:\\."+g[_p]+")*))";var vp=R++,ME="v?"+g[DE]+g[dp]+"?"+g[ga]+"?";g[vp]="^"+ME+"$";var gp="[v=\\s]*"+g[xE]+g[hp]+"?"+g[ga]+"?",mp=R++;g[mp]="^"+gp+"$";var Jn=R++;g[Jn]="((?:<|>)?=?)";var Fo=R++;g[Fo]=g[Zn]+"|x|X|\\*";var Go=R++;g[Go]=g[Qn]+"|x|X|\\*";var Xr=R++;g[Xr]="[v=\\s]*("+g[Go]+")(?:\\.("+g[Go]+")(?:\\.("+g[Go]+")(?:"+g[dp]+")?"+g[ga]+"?)?)?";var ei=R++;g[ei]="[v=\\s]*("+g[Fo]+")(?:\\.("+g[Fo]+")(?:\\.("+g[Fo]+")(?:"+g[hp]+")?"+g[ga]+"?)?)?";var LE=R++;g[LE]="^"+g[Jn]+"\\s*"+g[Xr]+"$";var qE=R++;g[qE]="^"+g[Jn]+"\\s*"+g[ei]+"$";var kE=R++;g[kE]="(?:^|[^\\d])(\\d{1,"+up+"})(?:\\.(\\d{1,"+up+"}))?(?:\\.(\\d{1,"+up+"}))?(?:$|[^\\d])";var Vo=R++;g[Vo]="(?:~>?)";var $o=R++;g[$o]="(\\s*)"+g[Vo]+"\\s+";V[$o]=new RegExp(g[$o],"g");var rw="$1~",jE=R++;g[jE]="^"+g[Vo]+g[Xr]+"$";var HE=R++;g[HE]="^"+g[Vo]+g[ei]+"$";var zo=R++;g[zo]="(?:\\^)";var Ko=R++;g[Ko]="(\\s*)"+g[zo]+"\\s+";V[Ko]=new RegExp(g[Ko],"g");var nw="$1^",UE=R++;g[UE]="^"+g[zo]+g[Xr]+"$";var BE=R++;g[BE]="^"+g[zo]+g[ei]+"$";var Ep=R++;g[Ep]="^"+g[Jn]+"\\s*("+gp+")$|^$";var yp=R++;g[yp]="^"+g[Jn]+"\\s*("+ME+")$|^$";var ma=R++;g[ma]="(\\s*)"+g[Jn]+"\\s*("+gp+"|"+g[Xr]+")";V[ma]=new RegExp(g[ma],"g");var iw="$1$2$3",FE=R++;g[FE]="^\\s*("+g[Xr]+")\\s+-\\s+("+g[Xr]+")\\s*$";var GE=R++;g[GE]="^\\s*("+g[ei]+")\\s+-\\s+("+g[ei]+")\\s*$";var VE=R++;g[VE]="(<|>)?=?\\s*\\*";for(var Wr=0;Wr<R;Wr++)U(Wr,g[Wr]),V[Wr]||(V[Wr]=new RegExp(g[Wr]));C.parse=Yr;function Yr(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof D)return e;if(typeof e!="string"||e.length>cp)return null;var r=t.loose?V[mp]:V[vp];if(!r.test(e))return null;try{return new D(e,t)}catch(n){return null}}C.valid=aw;function aw(e,t){var r=Yr(e,t);return r?r.version:null}C.clean=sw;function sw(e,t){var r=Yr(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}C.SemVer=D;function D(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof D){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>cp)throw new TypeError("version is longer than "+cp+" characters");if(!(this instanceof D))return new D(e,t);U("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?V[mp]:V[vp]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Bo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Bo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Bo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Bo)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}D.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};D.prototype.toString=function(){return this.version};D.prototype.compare=function(e){return U("SemVer.compare",this.version,this.options,e),e instanceof D||(e=new D(e,this.options)),this.compareMain(e)||this.comparePre(e)};D.prototype.compareMain=function(e){return e instanceof D||(e=new D(e,this.options)),ti(this.major,e.major)||ti(this.minor,e.minor)||ti(this.patch,e.patch)};D.prototype.comparePre=function(e){if(e instanceof D||(e=new D(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(U("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return ti(r,n)}while(++t)};D.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};C.inc=ow;function ow(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new D(e,r).inc(t,n).version}catch(i){return null}}C.diff=cw;function cw(e,t){if(Tp(e,t))return null;var r=Yr(e),n=Yr(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}C.compareIdentifiers=ti;var $E=/^[0-9]+$/;function ti(e,t){var r=$E.test(e),n=$E.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}C.rcompareIdentifiers=uw;function uw(e,t){return ti(t,e)}C.major=lw;function lw(e,t){return new D(e,t).major}C.minor=pw;function pw(e,t){return new D(e,t).minor}C.patch=fw;function fw(e,t){return new D(e,t).patch}C.compare=Lt;function Lt(e,t,r){return new D(e,r).compare(new D(t,r))}C.compareLoose=dw;function dw(e,t){return Lt(e,t,!0)}C.rcompare=hw;function hw(e,t,r){return Lt(t,e,r)}C.sort=_w;function _w(e,t){return e.sort(function(r,n){return C.compare(r,n,t)})}C.rsort=vw;function vw(e,t){return e.sort(function(r,n){return C.rcompare(r,n,t)})}C.gt=Ea;function Ea(e,t,r){return Lt(e,t,r)>0}C.lt=Xo;function Xo(e,t,r){return Lt(e,t,r)<0}C.eq=Tp;function Tp(e,t,r){return Lt(e,t,r)===0}C.neq=zE;function zE(e,t,r){return Lt(e,t,r)!==0}C.gte=Sp;function Sp(e,t,r){return Lt(e,t,r)>=0}C.lte=bp;function bp(e,t,r){return Lt(e,t,r)<=0}C.cmp=Wo;function Wo(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Tp(e,r,n);case"!=":return zE(e,r,n);case">":return Ea(e,r,n);case">=":return Sp(e,r,n);case"<":return Xo(e,r,n);case"<=":return bp(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}C.Comparator=et;function et(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof et){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof et))return new et(e,t);U("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ya?this.value="":this.value=this.operator+this.semver.version,U("comp",this)}var ya={};et.prototype.parse=function(e){var t=this.options.loose?V[Ep]:V[yp],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new D(r[2],this.options.loose):this.semver=ya};et.prototype.toString=function(){return this.value};et.prototype.test=function(e){return U("Comparator.test",e,this.options.loose),this.semver===ya?!0:(typeof e=="string"&&(e=new D(e,this.options)),Wo(e,this.operator,this.semver,this.options))};et.prototype.intersects=function(e,t){if(!(e instanceof et))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new te(e.value,t),Yo(this.value,r,t);if(e.operator==="")return r=new te(this.value,t),Yo(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Wo(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Wo(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||o||c};C.Range=te;function te(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof te)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new te(e.raw,t);if(e instanceof et)return new te(e.value,t);if(!(this instanceof te))return new te(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}te.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};te.prototype.toString=function(){return this.range};te.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?V[GE]:V[FE];e=e.replace(r,Cw),U("hyphen replace",e),e=e.replace(V[ma],iw),U("comparator trim",e,V[ma]),e=e.replace(V[$o],rw),e=e.replace(V[Ko],nw),e=e.split(/\s+/).join(" ");var n=t?V[Ep]:V[yp],i=e.split(" ").map(function(a){return mw(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new et(a,this.options)},this),i};te.prototype.intersects=function(e,t){if(!(e instanceof te))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};C.toComparators=gw;function gw(e,t){return new te(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function mw(e,t){return U("comp",e,t),e=Tw(e,t),U("caret",e),e=Ew(e,t),U("tildes",e),e=bw(e,t),U("xrange",e),e=Iw(e,t),U("stars",e),e}function ke(e){return!e||e.toLowerCase()==="x"||e==="*"}function Ew(e,t){return e.trim().split(/\s+/).map(function(r){return yw(r,t)}).join(" ")}function yw(e,t){var r=t.loose?V[HE]:V[jE];return e.replace(r,function(n,i,a,s,o){U("tilde",e,n,i,a,s,o);var c;return ke(i)?c="":ke(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ke(s)?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":o?(U("replaceTilde pr",o),c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0"):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",U("tilde return",c),c})}function Tw(e,t){return e.trim().split(/\s+/).map(function(r){return Sw(r,t)}).join(" ")}function Sw(e,t){U("caret",e,t);var r=t.loose?V[BE]:V[UE];return e.replace(r,function(n,i,a,s,o){U("caret",e,n,i,a,s,o);var c;return ke(i)?c="":ke(a)?c=">="+i+".0.0 <"+(+i+1)+".0.0":ke(s)?i==="0"?c=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+".0 <"+(+i+1)+".0.0":o?(U("replaceCaret pr",o),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+"-"+o+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(U("no pr"),i==="0"?a==="0"?c=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):c=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":c=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),U("caret return",c),c})}function bw(e,t){return U("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return Aw(r,t)}).join(" ")}function Aw(e,t){e=e.trim();var r=t.loose?V[qE]:V[LE];return e.replace(r,function(n,i,a,s,o,c){U("xRange",e,n,i,a,s,o,c);var u=ke(a),l=u||ke(s),f=l||ke(o),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),o=0,i===">"?(i=">=",l?(a=+a+1,s=0,o=0):(s=+s+1,o=0)):i==="<="&&(i="<",l?a=+a+1:s=+s+1),n=i+a+"."+s+"."+o):l?n=">="+a+".0.0 <"+(+a+1)+".0.0":f&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),U("xRange return",n),n})}function Iw(e,t){return U("replaceStars",e,t),e.trim().replace(V[VE],"")}function Cw(e,t,r,n,i,a,s,o,c,u,l,f,d){return ke(r)?t="":ke(n)?t=">="+r+".0.0":ke(i)?t=">="+r+"."+n+".0":t=">="+t,ke(c)?o="":ke(u)?o="<"+(+c+1)+".0.0":ke(l)?o="<"+c+"."+(+u+1)+".0":f?o="<="+c+"."+u+"."+l+"-"+f:o="<="+o,(t+" "+o).trim()}te.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new D(e,this.options));for(var t=0;t<this.set.length;t++)if(Ow(this.set[t],e,this.options))return!0;return!1};function Ow(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(U(e[n].semver),e[n].semver!==ya&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}C.satisfies=Yo;function Yo(e,t,r){try{t=new te(t,r)}catch(n){return!1}return t.test(e)}C.maxSatisfying=Pw;function Pw(e,t,r){var n=null,i=null;try{var a=new te(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new D(n,r))}),n}C.minSatisfying=Rw;function Rw(e,t,r){var n=null,i=null;try{var a=new te(t,r)}catch(s){return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new D(n,r))}),n}C.minVersion=Nw;function Nw(e,t){e=new te(e,t);var r=new D("0.0.0");if(e.test(r)||(r=new D("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new D(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Ea(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}C.validRange=ww;function ww(e,t){try{return new te(e,t).range||"*"}catch(r){return null}}C.ltr=Dw;function Dw(e,t,r){return Ap(e,t,"<",r)}C.gtr=xw;function xw(e,t,r){return Ap(e,t,">",r)}C.outside=Ap;function Ap(e,t,r,n){e=new D(e,n),t=new te(t,n);var i,a,s,o,c;switch(r){case">":i=Ea,a=bp,s=Xo,o=">",c=">=";break;case"<":i=Xo,a=Sp,s=Ea,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Yo(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,d=null;if(l.forEach(function(h){h.semver===ya&&(h=new et(">=0.0.0")),f=f||h,d=d||h,i(h.semver,f.semver,n)?f=h:s(h.semver,d.semver,n)&&(d=h)}),f.operator===o||f.operator===c||(!d.operator||d.operator===o)&&a(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}C.prerelease=Mw;function Mw(e,t){var r=Yr(e,t);return r&&r.prerelease.length?r.prerelease:null}C.intersects=Lw;function Lw(e,t,r){return e=new te(e,r),t=new te(t,r),e.intersects(t)}C.coerce=qw;function qw(e){if(e instanceof D)return e;if(typeof e!="string")return null;var t=e.match(V[kE]);return t==null?null:Yr(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var QE=p((Y1,YE)=>{var kw=Mo().wrap,Ip=1<<0,Cp=1<<1,Op=1<<2,Qo=1<<3,$=[],jw=0,Ne=!1,ir=[],ri,Pp;function Rp(e,t){var r=e.length,n=t.length,i=[];if(r===0&&n===0)return i;for(var a=0;a<r;a++)i[a]=e[a];if(n===0)return i;for(var s=0;s<n;s++){var o=!0;for(a=0;a<r;a++)if(e[a].uid===t[s].uid){o=!1;break}o&&i.push(t[s])}return i}process._fatalException?(Zo=!1,ri=function(t){var r=$.length;if(Zo||r===0)return!1;var n=!1;Zo=!0;for(var i=0;i<r;++i){var a=$[i];if((a.flags&Qo)!=0){var s=ni&&ni[a.uid];n=a.error(s,t)||n}}return Zo=!1,ir.length>0&&($=ir.pop()),ni=void 0,n&&!Ne},Pp=function(t,r,n){var i=[];Ne=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&Ip)!=0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o)}}return Ne=!1,function(){ni=i,ir.push($),$=Rp(r,$),Ne=!0;for(var c=0;c<n;++c)(r[c].flags&Cp)>0&&r[c].before(this,i[r[c].uid]);Ne=!1;var u=t.apply(this,arguments);for(Ne=!0,c=0;c<n;++c)(r[c].flags&Op)>0&&r[c].after(this,i[r[c].uid]);return Ne=!1,$=ir.pop(),ni=void 0,u}},kw(process,"_fatalException",function(e){return function(r){return ri(r)||e(r)}})):(Np=!1,ri=function(t){if(Np)throw t;for(var r=!1,n=$.length,i=0;i<n;++i){var a=$[i];(a.flags&Qo)!=0&&(r=a.error(null,t)||r)}if(!r&&Ne)throw t},Pp=function(t,r,n){var i=[];Ne=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&Ip)!=0){var o=s.create(s.data);o!==void 0&&(i[s.uid]=o)}}return Ne=!1,function(){var c=!1,u=!1;ir.push($),$=Rp(r,$),Ne=!0;for(var l=0;l<n;++l)(r[l].flags&Cp)>0&&r[l].before(this,i[r[l].uid]);Ne=!1;var f;try{f=t.apply(this,arguments)}catch(d){c=!0;for(var l=0;l<n;++l)if(($[l].flags&Qo)!=0)try{u=$[l].error(i[r[l].uid],d)||u}catch(m){throw Np=!0,m}if(!u)throw process.removeListener("uncaughtException",ri),process._originalNextTick(function(){process.addListener("uncaughtException",ri)}),d}finally{if(!c||u){for(Ne=!0,l=0;l<n;++l)(r[l].flags&Op)>0&&r[l].after(this,i[r[l].uid]);Ne=!1}$=ir.pop()}return f}},process.addListener("uncaughtException",ri));var Zo,ni,Np;function Hw(e,t,r){Ne=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return Ne=!1,function(){ir.push($),$=Rp(t,$);var a=e.apply(this,arguments);return $=ir.pop(),a}}function Uw(e){var t=$.length;if(t===0)return e;for(var r=$.slice(),n=0;n<t;++n)if(r[n].flags>0)return Pp(e,r,t);return Hw(e,r,t)}function gt(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=Ip),typeof e.before=="function"&&(this.before=e.before,this.flags|=Cp),typeof e.after=="function"&&(this.after=e.after,this.flags|=Op),typeof e.error=="function"&&(this.error=e.error,this.flags|=Qo),this.uid=++jw,this.data=t===void 0?null:t}gt.prototype.create=void 0;gt.prototype.before=void 0;gt.prototype.after=void 0;gt.prototype.error=void 0;gt.prototype.data=void 0;gt.prototype.uid=0;gt.prototype.flags=0;function WE(e,t){if(typeof e!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof gt?e:new gt(e,t)}function Bw(e,t){var r;e instanceof gt?r=e:r=WE(e,t);for(var n=!1,i=0;i<$.length;i++)if(r===$[i]){n=!0;break}return n||$.push(r),r}function Fw(e){for(var t=0;t<$.length;t++)if(e===$[t]){$.splice(t,1);break}}process.createAsyncListener=WE;process.addAsyncListener=Bw;process.removeAsyncListener=Fw;YE.exports=Uw});var JE=p((Z1,ZE)=>{"use strict";ZE.exports=(e,t)=>class extends e{constructor(n){var i,a;super(o);var s=this;try{n.apply(i,a)}catch(c){a[1](c)}return s;function o(c,u){i=this,a=[l,f];function l(d){return t(s,!1),c(d)}function f(d){return t(s,!1),u(d)}}}}});var sy=p(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var ey=Mo(),Jo=XE(),Ue=ey.wrap,ar=ey.massWrap,re=QE(),Gw=require("util"),Vw=Jo.gte(process.version,"6.0.0"),wp=Jo.gte(process.version,"7.0.0"),$w=Jo.gte(process.version,"8.0.0"),zw=Jo.gte(process.version,"11.0.0"),mt=require("net");wp&&!mt._normalizeArgs?mt._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],r={};typeof t=="object"&&t!==null?r=t:Qw(t)?r.path=t:(r.port=t,e.length>1&&typeof e[1]=="string"&&(r.host=e[1]));var n=e[e.length-1];return typeof n!="function"?[r,null]:[r,n]}:!wp&&!mt._normalizeConnectArgs&&(mt._normalizeConnectArgs=function(e){var t={};function r(i){return(i=Number(i))>=0?i:!1}typeof e[0]=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&r(e[0])===!1?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var n=e[e.length-1];return typeof n=="function"?[t,n]:[t]});"_setUpListenHandle"in mt.Server.prototype?Ue(mt.Server.prototype,"_setUpListenHandle",ty):Ue(mt.Server.prototype,"_listen2",ty);function ty(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=re(t._handle.onread))});try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=re(this._handle.onconnection))}}}function ry(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=re(t._originalOnread)}}Ue(mt.Socket.prototype,"connect",function(e){return function(){var t;$w&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=wp?mt._normalizeArgs(arguments):mt._normalizeConnectArgs(arguments),t[1]&&(t[1]=re(t[1]));var r=e.apply(this,t);return ry(this),r}});var Kw=require("http");Ue(Kw.Agent.prototype,"addRequest",function(e){return function(t){var r=t.onSocket;return t.onSocket=re(function(n){return ry(n),r.apply(this,arguments)}),e.apply(this,arguments)}});var Dp=require("child_process");function ny(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=re(t._handle.onread),Ue(t._handle,"close",tc))}),e._handle&&(e._handle.onexit=re(e._handle.onexit))}Dp.ChildProcess?Ue(Dp.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return ny(this),t}}):ar(Dp,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return ny(t),t}});process._fatalException||(process._originalNextTick=process.nextTick);var xp=[];process._nextDomainTick&&xp.push("_nextDomainTick");process._tickDomainCallback&&xp.push("_tickDomainCallback");ar(process,xp,Et);Ue(process,"nextTick",tc);var Mp=["setTimeout","setInterval"];global.setImmediate&&Mp.push("setImmediate");var iy=require("timers"),Xw=global.setTimeout===iy.setTimeout;ar(iy,Mp,tc);Xw&&ar(global,Mp,tc);var Lp=require("dns");ar(Lp,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Et);Lp.resolveNaptr&&Ue(Lp,"resolveNaptr",Et);var Qr=require("fs");ar(Qr,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Et);Qr.lchown&&Ue(Qr,"lchown",Et);Qr.lchmod&&Ue(Qr,"lchmod",Et);Qr.ftruncate&&Ue(Qr,"ftruncate",Et);var Ta;try{Ta=require("zlib")}catch(e){}Ta&&Ta.Deflate&&Ta.Deflate.prototype&&(Zr=Object.getPrototypeOf(Ta.Deflate.prototype),Zr._transform?Ue(Zr,"_transform",Et):Zr.write&&Zr.flush&&Zr.end&&ar(Zr,["write","flush","end"],Et));var Zr,qp;try{qp=require("crypto")}catch(e){}qp&&(kp=["pbkdf2","randomBytes"],zw||kp.push("pseudoRandomBytes"),ar(qp,kp,Et));var kp,ec=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ec&&(ay=process.addAsyncListener({create:function(){ec=!1}}),global.Promise.resolve(!0).then(function(){ec=!1}),process.removeAsyncListener(ay));var ay;ec&&Ww();function Ww(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var o,c,u=new e(l);u.__proto__=t.prototype;try{s.apply(o,c)}catch(f){c[1](f)}return u;function l(f,d){o=this,c=[h,m];function h(S){return n(u,!1),f(S)}function m(S){return n(u,!1),d(S)}}}if(Gw.inherits(t,e),Ue(e.prototype,"then",a),e.prototype.chain&&Ue(e.prototype,"chain",a),Vw)global.Promise=JE()(e,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s])}),global.Promise=t}function n(s,o){(!s.__asl_wrapper||o)&&(s.__asl_wrapper=re(i))}function i(s,o,c,u){var l;try{return l=o.call(s,c),{returnVal:l,error:!1}}catch(f){return{errorVal:f,error:!0}}finally{l instanceof e?u.__asl_wrapper=function(){var d=l.__asl_wrapper||i;return d.apply(this,arguments)}:n(u,!0)}}function a(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(d,h,m,S){return c.__asl_wrapper?(c.__asl_wrapper(d,function(){},null,u),u.__asl_wrapper(d,h,m,S)):i(d,h,m,S)},u;function l(f){return typeof f!="function"?f:re(function(d){var h=(c.__asl_wrapper||i)(this,f,d,u);if(h.error)throw h.errorVal;return h.returnVal})}}}}function Et(e){var t=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=re(arguments[n])}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=re(n)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=re(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof a=="function"&&(a=re(a)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=re(s)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof o=="function"&&(o=re(o)),e.call(this,r,n,i,a,s,o))};default:return t}}function tc(e){var t=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=re(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,o){return arguments.length!==6?t.apply(this,arguments):(typeof r=="function"&&(r=re(r)),e.call(this,r,n,i,a,s,o))};default:return t}}function Yw(e){return(e=Number(e))>=0?e:!1}function Qw(e){return typeof e=="string"&&Yw(e)===!1}});var py=p((tk,ly)=>{"use strict";var qt=require("assert"),Zw=ko(),Sa="cls@contexts",jp="error@context";process.addAsyncListener||sy();function ut(e){this.name=e,this.active=null,this._set=[],this.id=null}ut.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t};ut.prototype.get=function(e){if(!!this.active)return this.active[e]};ut.prototype.createContext=function(){return Object.create(this.active)};ut.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(r){throw r&&(r[jp]=t),r}finally{this.exit(t)}};ut.prototype.runAndReturn=function(e){var t;return this.run(function(r){t=e(r)}),t};ut.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(n){throw n&&(n[jp]=t),n}finally{r.exit(t)}}};ut.prototype.enter=function(e){qt.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e};ut.prototype.exit=function(e){if(qt.ok(e,"context must be provided for exiting"),this.active===e){qt.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);qt.ok(t>=0,"context not currently entered; can't exit"),qt.ok(t,"can't remove top context"),this._set.splice(t,1)};ut.prototype.bindEmitter=function(e){qt.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;function n(a){!a||(a[Sa]||(a[Sa]=Object.create(null)),a[Sa][r]={namespace:t,context:t.active})}function i(a){if(!(a&&a[Sa]))return a;var s=a,o=a[Sa];return Object.keys(o).forEach(function(c){var u=o[c];s=u.namespace.bind(s,u.context)}),s}Zw(e,n,i)};ut.prototype.fromException=function(e){return e[jp]};function oy(e){return process.namespaces[e]}function Jw(e){qt.ok(e,"namespace must be given a name!");var t=new ut(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(r,n){n&&t.enter(n)},after:function(r,n){n&&t.exit(n)},error:function(r){r&&t.exit(r)}}),process.namespaces[e]=t,t}function cy(e){var t=oy(e);qt.ok(t,"can't delete nonexistent namespace!"),qt.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function uy(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){cy(e)}),process.namespaces=Object.create(null)}process.namespaces||uy();ly.exports={getNamespace:oy,createNamespace:Jw,destroyNamespace:cy,reset:uy}});var gr=p(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.CorrelationContextManager=void 0;var fy=me(),eD=Eo(),ii=ta(),Hp=pl(),dy=Nl(),tD=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t},e.generateContextObject=function(t,r,n,i,a,s){return r=r||t,this.enabled?{operation:{name:n,id:t,parentId:r,traceparent:a,tracestate:s},customProperties:new rD(i)}:null},e.spanToContextObject=function(t,r,n){var i=new ii;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=ii.formatOpenTelemetryTraceFlags(t.traceFlags)||ii.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,n,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,(n={},n[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?(n={},n[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(e.forceClsHooked===!0||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=wE():this.cls=py()),e.session=this.cls.createNamespace("AI-CLS-Session"),eD.registerContextPreservation(function(r){return e.session.bind(r)})),this.enabled=!0}},e.startOperation=function(t,r){var n=t&&t.traceContext||null,i=t&&t.traceId?t:null,a=t&&t.headers;if(i){var s=new ii("00-"+i.traceId+"-"+i.spanId+"-01"),o=new Hp(i.traceState?i.traceState.serialize():null),c=e.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,s,o);return c}if(n){var s=new ii(n.traceparent),o=new Hp(n.tracestate),u=typeof r=="object"?new dy(r):null,c=e.generateContextObject(s.traceId,s.parentId,typeof r=="string"?r:u.getOperationName({}),u&&u.getCorrelationContextHeader()||void 0,s,o);return c}if(a){var s=new ii(a.traceparent?a.traceparent.toString():null),o=new Hp(a.tracestate?a.tracestate.toString():null),u=new dy(t),c=e.generateContextObject(s.traceId,s.parentId,u.getOperationName({}),u.getCorrelationContextHeader(),s,o);return c}return fy.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2},e.canUseClsHooked=function(){var t=process.versions.node.split("."),r=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,n=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(r&&n)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();rc.CorrelationContextManager=tD;var rD=function(){function e(t){this.props=[],this.addHeaderData(t)}return e.prototype.addHeaderData=function(t){var r=t?t.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value}).join(", ")},e.prototype.getProperty=function(t){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===t)return n.value}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r)){fy.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===t){i.value=r;return}}this.props.push({key:t,value:r})},e.bannedCharacters=/[,=]/,e}()});var _y=p(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.dispose=ai.enable=void 0;var hy=Me(),Up=ue(),Jr=[],Bp=function(e){var t=e.data.message;Jr.forEach(function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?hy.SeverityLevel.Warning:hy.SeverityLevel.Information}))})};function nD(e,t){e?(Jr.length===0&&Up.channel.subscribe("console",Bp),Jr.push(t)):(Jr=Jr.filter(function(r){return r!=t}),Jr.length===0&&Up.channel.unsubscribe("console",Bp))}ai.enable=nD;function iD(){Up.channel.unsubscribe("console",Bp),Jr=[]}ai.dispose=iD});var vy=p(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.dispose=oi.enable=void 0;var si=Me(),Fp=ue(),en=[],aD={10:si.SeverityLevel.Verbose,20:si.SeverityLevel.Verbose,30:si.SeverityLevel.Information,40:si.SeverityLevel.Warning,50:si.SeverityLevel.Error,60:si.SeverityLevel.Critical},Gp=function(e){var t=e.data.result;en.forEach(function(r){var n=aD[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})})};function sD(e,t){e?(en.length===0&&Fp.channel.subscribe("bunyan",Gp),en.push(t)):(en=en.filter(function(r){return r!=t}),en.length===0&&Fp.channel.unsubscribe("bunyan",Gp))}oi.enable=sD;function oD(){Fp.channel.unsubscribe("bunyan",Gp),en=[]}oi.dispose=oD});var gy=p(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.dispose=ci.enable=void 0;var Ie=Me(),Vp=ue(),tn=[],cD={syslog:function(e){var t={emerg:Ie.SeverityLevel.Critical,alert:Ie.SeverityLevel.Critical,crit:Ie.SeverityLevel.Critical,error:Ie.SeverityLevel.Error,warning:Ie.SeverityLevel.Warning,notice:Ie.SeverityLevel.Information,info:Ie.SeverityLevel.Information,debug:Ie.SeverityLevel.Verbose};return t[e]===void 0?Ie.SeverityLevel.Information:t[e]},npm:function(e){var t={error:Ie.SeverityLevel.Error,warn:Ie.SeverityLevel.Warning,info:Ie.SeverityLevel.Information,verbose:Ie.SeverityLevel.Verbose,debug:Ie.SeverityLevel.Verbose,silly:Ie.SeverityLevel.Verbose};return t[e]===void 0?Ie.SeverityLevel.Information:t[e]},unknown:function(e){return Ie.SeverityLevel.Information}},$p=function(e){var t=e.data.message;tn.forEach(function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=cD[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}})};function uD(e,t){e?(tn.length===0&&Vp.channel.subscribe("winston",$p),tn.push(t)):(tn=tn.filter(function(r){return r!=t}),tn.length===0&&Vp.channel.unsubscribe("winston",$p))}ci.enable=uD;function lD(){Vp.channel.unsubscribe("winston",$p),tn=[]}ci.dispose=lD});var Ey=p((sk,my)=>{"use strict";var pD=Eo(),fD=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(t,r){pD.IsInitialized&&(_y().enable(t&&r,this._client),vy().enable(t,this._client),gy().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();my.exports=fD});var Ty=p((ok,yy)=>{"use strict";var dD=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(a,s,o){o===void 0&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:!0}),a&&s&&process.listeners(s).length===1&&(console.error(o),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();yy.exports=dD});var kt=p(T=>{"use strict";var lt;Object.defineProperty(T,"__esModule",{value:!0});T.HeartBeatMetricName=T.DependencyTypeName=T.SpanAttribute=T.TelemetryTypeStringToQuickPulseDocumentType=T.TelemetryTypeStringToQuickPulseType=T.QuickPulseType=T.QuickPulseDocumentType=T.PerformanceToQuickPulseCounter=T.MetricId=T.PerformanceCounter=T.QuickPulseCounter=T.DEFAULT_LIVEMETRICS_HOST=T.DEFAULT_LIVEMETRICS_ENDPOINT=T.DEFAULT_BREEZE_ENDPOINT=void 0;T.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";T.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";T.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var we;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(we=T.QuickPulseCounter||(T.QuickPulseCounter={}));var nc;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(nc=T.PerformanceCounter||(T.PerformanceCounter={}));var hD;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"})(hD=T.MetricId||(T.MetricId={}));T.PerformanceToQuickPulseCounter=(lt={},lt[nc.PROCESSOR_TIME]=we.PROCESSOR_TIME,lt[nc.REQUEST_RATE]=we.REQUEST_RATE,lt[nc.REQUEST_DURATION]=we.REQUEST_DURATION,lt[we.COMMITTED_BYTES]=we.COMMITTED_BYTES,lt[we.REQUEST_FAILURE_RATE]=we.REQUEST_FAILURE_RATE,lt[we.DEPENDENCY_RATE]=we.DEPENDENCY_RATE,lt[we.DEPENDENCY_FAILURE_RATE]=we.DEPENDENCY_FAILURE_RATE,lt[we.DEPENDENCY_DURATION]=we.DEPENDENCY_DURATION,lt[we.EXCEPTION_RATE]=we.EXCEPTION_RATE,lt);T.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};T.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};T.TelemetryTypeStringToQuickPulseType={EventData:T.QuickPulseType.Event,ExceptionData:T.QuickPulseType.Exception,MessageData:T.QuickPulseType.Trace,MetricData:T.QuickPulseType.Metric,RequestData:T.QuickPulseType.Request,RemoteDependencyData:T.QuickPulseType.Dependency,AvailabilityData:T.QuickPulseType.Availability,PageViewData:T.QuickPulseType.PageView};T.TelemetryTypeStringToQuickPulseDocumentType={EventData:T.QuickPulseDocumentType.Event,ExceptionData:T.QuickPulseDocumentType.Exception,MessageData:T.QuickPulseDocumentType.Trace,MetricData:T.QuickPulseDocumentType.Metric,RequestData:T.QuickPulseDocumentType.Request,RemoteDependencyData:T.QuickPulseDocumentType.Dependency,AvailabilityData:T.QuickPulseDocumentType.Availability,PageViewData:T.QuickPulseDocumentType.PageView};T.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};T.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};T.HeartBeatMetricName="HeartBeat"});var ac=p((uk,Sy)=>{"use strict";var ic=require("os"),tt=kt(),_D=function(){function e(t,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=ic.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalRequestExecutionTime+=n,r===!1&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalDependencyExecutionTime+=n,r===!1&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var t=ic.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var r=0,n=0,i=0,a=0,s=0,o=0;!!t&&o<t.length;o++){var c=t[o],u=this._lastCpus[o],l="% cpu("+o+") ",f=c.model,d=c.speed,h=c.times,m=u.times,S=h.user-m.user||0;r+=S;var k=h.sys-m.sys||0;n+=k;var ce=h.nice-m.nice||0;i+=ce;var Ce=h.idle-m.idle||0;a+=Ce;var bt=h.irq-m.irq||0;s+=bt}var on=void 0;if(typeof process.cpuUsage=="function"){var Ii=process.cpuUsage(),cn=process.hrtime(),PS=Ii.user-this._lastAppCpuUsage.user+(Ii.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var RS=(cn[0]-this._lastHrtime[0])*1e6+(cn[1]-this._lastHrtime[1])/1e3||0;on=100*PS/(RS*t.length)}this._lastAppCpuUsage=Ii,this._lastHrtime=cn}var Cc=r+n+i+a+s||1;this._client.trackMetric({name:tt.PerformanceCounter.PROCESSOR_TIME,value:(Cc-a)/Cc*100}),this._client.trackMetric({name:tt.PerformanceCounter.PROCESS_TIME,value:on||r/Cc*100})}this._lastCpus=t},e.prototype._trackMemory=function(){var t=ic.freemem(),r=process.memoryUsage().rss,n=ic.totalmem()-t;this._client.trackMetric({name:tt.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:tt.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:tt.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var c=n/s,u=i/s;this._client.trackMetric({name:tt.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:tt.PerformanceCounter.REQUEST_DURATION,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:tt.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=r.time-t.time,s=a/1e3,o=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var c=n/s,u=i/s;this._client.trackMetric({name:tt.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:tt.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:tt.QuickPulseCounter.DEPENDENCY_DURATION,value:o})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time,a=i/1e3;if(i>0){var s=n/a;this._client.trackMetric({name:tt.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();Sy.exports=_D});var by=p(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.AggregatedMetricCounter=void 0;var vD=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return e}();sc.AggregatedMetricCounter=vD});var Ay=p(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.PreaggregatedMetricPropertyNames=void 0;oc.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var Kp=p((zp,Iy)=>{"use strict";var cc=zp&&zp.__assign||function(){return cc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cc.apply(this,arguments)},uc=kt(),gD=by(),mD=Ay(),ED=function(){function e(t,r){r===void 0&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._exceptionCountersCollection);r.totalCount++}},e.countTrace=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._traceCountersCollection);r.totalCount++}},e.countRequest=function(t,r){if(!!e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(!!e.isEnabled()){var n=e._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;n.intervalExecutionTime+=i,n.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(t,r){for(var n=!1,i=0;i<r.length;i++){if(t===r[i].dimensions)return r[i];if(Object.keys(t).length===Object.keys(r[i].dimensions).length){for(var a in t)if(t[a]!=r[i].dimensions[a]){n=!0;break}if(!n)return r[i];n=!1}}var s=new gD.AggregatedMetricCounter(t);return r.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:uc.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:uc.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:uc.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:uc.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(t){var r={};for(var n in t.dimensions)r[mD.PreaggregatedMetricPropertyNames[n]]=t.dimensions[n];r=cc(cc({},r),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();Iy.exports=ED});var ba=p((fk,Ry)=>{"use strict";var jt=require("os"),Cy=require("fs"),Oy=require("path"),yD=Me(),Py=me(),TD=function(){function e(t){this.keys=new yD.ContextTagKeys,this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||Oy.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(Cy.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.appVersion[t]=r.version)}catch(n){Py.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=jt&&jt.hostname(),this.tags[this.keys.deviceOSVersion]=jt&&jt.type()+" "+jt.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=jt&&jt.arch(),this.tags["ai.device.osPlatform"]=jt&&jt.platform()},e.prototype._loadInternalContext=function(){var t=Oy.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(Cy.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.sdkVersion=r.version)}catch(n){Py.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();Ry.exports=TD});var wy=p((Wp,Ny)=>{"use strict";var SD=Wp&&Wp.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pt=require("url"),Xp=Me(),bD=Ge(),AD=Bn(),ID=Ol(),CD=Gr(),OD=function(e){SD(t,e);function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return t.prototype.onError=function(r){this._setStatus(void 0,r)},t.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=bD.getCorrelationContextTarget(r,AD.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(r,n){var i=pt.parse(this.url);i.search=void 0,i.hash=void 0;var a=this.method.toUpperCase()+" "+i.pathname,s=Xp.RemoteDependencyDataConstants.TYPE_HTTP,o=i.hostname;i.port&&(o+=":"+i.port),this.correlationId?(s=Xp.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==CD.correlationIdPrefix&&(o+=" | "+this.correlationId)):s=Xp.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:n,name:a,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:o};if(r&&r.time?c.time=r.time:this.startTime&&(c.time=new Date(this.startTime)),r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},t._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=pt.parse(r);else{var i=pt.parse(r);i.host==="443"?r=pt.parse("https://"+r):r=pt.parse("http://"+r)}else{if(r&&typeof pt.URL=="function"&&r instanceof pt.URL)return pt.format(r);var a=r;r={},a&&Object.keys(a).forEach(function(c){r[c]=a[c]})}if(r.path){var s=pt.parse(r.path);r.pathname=s.pathname,r.search=s.search}if(r.host&&r.port){var o=pt.parse("http://"+r.host);!o.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",pt.format(r)},t}(ID);Ny.exports=OD});var Dy=p(ui=>{"use strict";var Aa=ui&&ui.__assign||function(){return Aa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Aa.apply(this,arguments)};Object.defineProperty(ui,"__esModule",{value:!0});ui.spanToTelemetryContract=void 0;var PD=F(),Be=kt();function Yp(e){var t=Aa({},e);return Object.keys(Be.SpanAttribute).forEach(function(r){delete t[r]}),t}function RD(e){var t="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",r=Math.round(e._duration[0]*1e3+e._duration[1]/1e6),n=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",i=e.attributes.component?e.attributes.component.toString():"",a=i.toUpperCase()===Be.DependencyTypeName.Http||!!e.attributes[Be.SpanAttribute.HttpUrl],s=i.toLowerCase()===Be.DependencyTypeName.Grpc;if(a){var o=e.attributes[Be.SpanAttribute.HttpMethod]||"GET",c=new URL(e.attributes[Be.SpanAttribute.HttpUrl].toString()),u=e.attributes[Be.SpanAttribute.HttpHost]||c.host,l=e.attributes[Be.SpanAttribute.HttpPort]||c.port||null,f=c.pathname||"/",d=o+" "+f,h=Be.DependencyTypeName.Http,m=l?(u+":"+l).toString():u.toString(),S=c.toString(),k=e.attributes[Be.SpanAttribute.HttpStatusCode]||e.status.code||0,ce=k<400;return{id:t,name:d,dependencyTypeName:h,target:m,data:S,success:ce,duration:r,url:S,resultCode:String(k),properties:Yp(e.attributes)}}else if(s){var o=e.attributes[Be.SpanAttribute.GrpcMethod]||"rpc",Ce=e.attributes[Be.SpanAttribute.GrpcService],bt=Ce?o+" "+Ce:e.name;return{id:t,duration:r,name:bt,target:Ce.toString(),data:Ce.toString()||bt,url:Ce.toString()||bt,dependencyTypeName:Be.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:e.status.code===0,properties:Yp(e.attributes)}}else{var on=e.name,Ii=e.links&&e.links.map(function(cn){return{operation_Id:cn.context.traceId,id:cn.context.spanId}});return{id:t,duration:r,name:on,target:n,data:n||on,url:n||on,dependencyTypeName:e.kind===PD.SpanKind.INTERNAL?Be.DependencyTypeName.InProc:i||e.name,resultCode:String(e.status.code||0),success:e.status.code===0,properties:Aa(Aa({},Yp(e.attributes)),{"_MS.links":Ii||void 0})}}}ui.spanToTelemetryContract=RD});var Ly=p(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.enable=sr.subscriber=void 0;var Qp=F(),xy=ue(),My=ta(),ND=Dy(),wD=Oc(),li=[],DD=function(e){var t=e.data,r=ND.spanToTelemetryContract(t),n=t.spanContext(),i=new My;i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=My.formatOpenTelemetryTraceFlags(n.traceFlags),i.parentId=t.parentSpanId?"|"+n.traceId+"."+t.parentSpanId+".":null,wD.AsyncScopeManager.with(t,function(){li.forEach(function(a){t.kind===Qp.SpanKind.SERVER?a.trackRequest(r):(t.kind===Qp.SpanKind.CLIENT||t.kind===Qp.SpanKind.INTERNAL)&&a.trackDependency(r)})})};sr.subscriber=DD;function xD(e,t){e?(li.length===0&&xy.channel.subscribe("azure-coretracing",sr.subscriber),li.push(t)):(li=li.filter(function(r){return r!=t}),li.length===0&&xy.channel.unsubscribe("azure-coretracing",sr.subscriber))}sr.enable=xD});var ky=p(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.enable=or.subscriber=void 0;var qy=ue(),pi=[],MD=function(e){e.data.event.commandName!=="ismaster"&&pi.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})})};or.subscriber=MD;function LD(e,t){e?(pi.length===0&&qy.channel.subscribe("mongodb",or.subscriber),pi.push(t)):(pi=pi.filter(function(r){return r!=t}),pi.length===0&&qy.channel.unsubscribe("mongodb",or.subscriber))}or.enable=LD});var Hy=p(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.enable=cr.subscriber=void 0;var jy=ue(),fi=[],qD=function(e){fi.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,a=r._connection||{},s=a.config||{},o=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})})};cr.subscriber=qD;function kD(e,t){e?(fi.length===0&&jy.channel.subscribe("mysql",cr.subscriber),fi.push(t)):(fi=fi.filter(function(r){return r!=t}),fi.length===0&&jy.channel.unsubscribe("mysql",cr.subscriber))}cr.enable=kD});var By=p(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.enable=ur.subscriber=void 0;var Uy=ue(),di=[],jD=function(e){di.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})})};ur.subscriber=jD;function HD(e,t){e?(di.length===0&&Uy.channel.subscribe("redis",ur.subscriber),di.push(t)):(di=di.filter(function(r){return r!=t}),di.length===0&&Uy.channel.unsubscribe("redis",ur.subscriber))}ur.enable=HD});var Gy=p(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.enable=lr.subscriber=void 0;var Fy=ue(),hi=[],UD=function(e){hi.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,a=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})})};lr.subscriber=UD;function BD(e,t){e?(hi.length===0&&Fy.channel.subscribe("postgres",lr.subscriber),hi.push(t)):(hi=hi.filter(function(r){return r!=t}),hi.length===0&&Fy.channel.unsubscribe("postgres",lr.subscriber))}lr.enable=BD});var gi=p((ef,Ky)=>{"use strict";var lc=ef&&ef.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n},_i=require("http"),vi=require("https"),Zp=me(),Vy=Ge(),pr=Bn(),FD=wy(),$y=gr(),zy=Gr(),Jp=ta(),GD=Eo(),VD=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),GD.IsInitialized&&(Ly().enable(!0,this._client),ky().enable(t,this._client),Hy().enable(t,this._client),By().enable(t,this._client),Gy().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=_i.request,n=vi.request,i=function(a,s){var o=!s[e.disableCollectionRequestOption]&&!a[e.alreadyAutoCollectedFlag];s.headers&&s.headers["user-agent"]&&s.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(o=!1),a[e.alreadyAutoCollectedFlag]=!0,a&&s&&o&&($y.CorrelationContextManager.wrapEmitter(a),e.trackRequest(t._client,{options:s,request:a}))};_i.request=function(a){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];var c=r.call.apply(r,lc([_i,a],s));return i(c,a),c},vi.request=function(a){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];var c=n.call.apply(n,lc([vi,a],s));return i(c,a),c},_i.get=function(a){for(var s,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var u=(s=_i.request).call.apply(s,lc([_i,a],o));return u.end(),u},vi.get=function(a){for(var s,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var u=(s=vi.request).call.apply(s,lc([vi,a],o));return u.end(),u}},e.trackRequest=function(t,r){if(!r.options||!r.request||!t){Zp.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t);return}var n=new FD(r.options,r.request),i=$y.CorrelationContextManager.getCurrentContext(),a,s;if(i&&i.operation&&i.operation.traceparent&&Jp.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),a=i.operation.traceparent.getBackCompatRequestId();else if(zy.w3cEnabled){var o=new Jp;s=o.toString(),a=o.getBackCompatRequestId()}else a=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(Vy.canIncludeCorrelationHeader(t,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var c=r.request.getHeader(pr.requestContextHeader);try{Vy.safeIncludeCorrelationHeader(t,r.request,c)}catch(f){Zp.warn("Request-Context header could not be set. Correlation of requests may be lost",f)}if(i&&i.operation)try{if(r.request.setHeader(pr.requestIdHeader,a),t.config.ignoreLegacyHeaders||(r.request.setHeader(pr.parentIdHeader,i.operation.id),r.request.setHeader(pr.rootIdHeader,a)),s||i.operation.traceparent)r.request.setHeader(pr.traceparentHeader,s||i.operation.traceparent.toString());else if(zy.w3cEnabled){var o=new Jp().toString();r.request.setHeader(pr.traceparentHeader,o)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(pr.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(pr.correlationContextHeader,l)}catch(f){Zp.warn("Correlation headers could not be set. Correlation of requests may be lost.",f)}}r.request.on&&(r.request.on("response",function(f){n.onResponse(f);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=f,t.trackDependency(d)}),r.request.on("error",function(f){n.onError(f);var d=n.getDependencyTelemetry(r,a);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=f,t.trackDependency(d)}),r.request.on("abort",function(){n.onError(new Error);var f=n.getDependencyTelemetry(r,a);f.contextObjects=f.contextObjects||{},f.contextObjects["http.RequestOptions"]=r.options,f.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(f)}))},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();Ky.exports=VD});var Yy=p((Ek,Wy)=>{"use strict";var $D=require("os"),Xy=kt(),zD=Ge(),KD=ba(),XD=gi(),WD="http://169.254.169.254/metadata/instance/compute",YD="api-version=2017-12-01",QD="format=json",ZD="ENETUNREACH",JD=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(t,r){var n=this,i=!1,a={},s=KD.sdkVersion;a.sdk=s,a.osType=$D.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&(this._isVM===void 0?(i=!0,this._getAzureComputeMetadata(t,function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:Xy.HeartBeatMetricName,value:0,properties:a}),r()})):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:Xy.HeartBeatMetricName,value:0,properties:a}),r())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(t,r){var n,i=this,a=WD+"?"+YD+"&"+QD,s=(n={method:"GET"},n[XD.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),o=zD.makeRequest(t,a,s,function(c){if(c.statusCode===200){i._isVM=!0;var u="";c.on("data",function(l){u+=l}),c.on("end",function(){i._vmData=i._isJSON(u)?JSON.parse(u):{},r()})}else r()});o&&(o.on("error",function(c){c&&c.message&&c.message.indexOf(ZD)>-1&&(i._isVM=!1),r()}),o.end())},e.prototype._isJSON=function(t){try{return JSON.parse(t)&&!!t}catch(r){return!1}},e}();Wy.exports=JD});var rf=p((yk,tT)=>{"use strict";var Qy=require("http"),Zy=require("https"),Jy=me(),eT=Ge(),ex=Bn(),tf=Nl(),Ht=gr(),tx=ac(),rx=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||tx.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(t,r){t&&!this._isAutoCorrelating?Ht.CorrelationContextManager.enable(r):!t&&this._isAutoCorrelating&&Ht.CorrelationContextManager.disable(),this._isAutoCorrelating=t},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(t){if(!!this._isAutoCorrelating)return Ht.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(o,c){Ht.CorrelationContextManager.wrapEmitter(o),Ht.CorrelationContextManager.wrapEmitter(c);var u=o&&!o[e.alreadyAutoCollectedFlag];if(o&&u){var l=new tf(o),f=t._generateCorrelationContext(l);Ht.CorrelationContextManager.runWithContext(f,function(){t._isEnabled&&(o[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:o,response:c},l)),typeof s=="function"&&s(o,c)})}else typeof s=="function"&&s(o,c)}}},n=function(s){var o=s.addListener.bind(s);s.addListener=function(c,u){switch(c){case"request":case"checkContinue":return o(c,r(u));default:return o(c,u)}},s.on=s.addListener},i=Qy.createServer;Qy.createServer=function(s,o){if(o&&typeof o=="function"){var c=i(s,r(o));return n(c),c}else{var c=i(r(s));return n(c),c}};var a=Zy.createServer;Zy.createServer=function(s,o){var c=a(s,r(o));return n(c),c}},e.trackRequestSync=function(t,r){if(!r.request||!r.response||!t){Jy.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t);return}e.addResponseCorrelationIdHeader(t,r.response);var n=Ht.CorrelationContextManager.getCurrentContext(),i=new tf(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)},e.trackRequest=function(t,r,n){if(!r.request||!r.response||!t){Jy.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t);return}var i=Ht.CorrelationContextManager.getCurrentContext(),a=n||new tf(r.request,i&&i.operation.parentId);eT.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){e.endRequest(t,a,r,null,null)}),r.request.on&&r.request.on("error",function(s){e.endRequest(t,a,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,a,r,null,s)})},e.addResponseCorrelationIdHeader=function(t,r){if(t.config&&t.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(ex.requestContextHeader);eT.safeIncludeCorrelationHeader(t,r,n)}},e.endRequest=function(t,r,n,i,a){a?r.onError(a,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(t.context.tags),n.tagOverrides)for(var o in n.tagOverrides)s.tagOverrides[o]=n.tagOverrides[o];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,t.trackRequest(s)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,Ht.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();tT.exports=rx});var iT=p((af,nT)=>{"use strict";var rt=af&&af.__assign||function(){return rt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rt.apply(this,arguments)},nf=require("os"),rn=Me(),rT=kt(),nx=Ge(),ix=me(),ax=nx.w3cTraceId(),sx=function(){function e(){}return e.createQuickPulseEnvelope=function(t,r,n,i){var a=nf&&typeof nf.hostname=="function"&&nf.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||a,o=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,c={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:ax,MachineName:a,Instance:s,RoleName:o};return c},e.createQuickPulseMetric=function(t){var r;return r={Name:t.name,Value:t.value,Weight:t.count||1},r},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case rn.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case rn.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case rn.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case rn.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case rn.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.name,i=rt(rt({},r),{Name:n});return i},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.severityLevel||0,i=rt(rt({},r),{Message:t.data.baseData.message,SeverityLevel:rn.SeverityLevel[n]});return i},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.exceptions,i="",a="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),a=n[0].message,s=n[0].typeName);var o=rt(rt({},r),{Exception:i,ExceptionMessage:a,ExceptionType:s});return o},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=rt(rt({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=rt(rt({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},e.createQuickPulseDocument=function(t){var r,n,i,a;t.data.baseType?(n=rT.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=rT.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):ix.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],a=e.aggregateProperties(t);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:a};return s},e.aggregateProperties=function(t){var r=[],n=t.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var a=n[i],s={key:i,value:a};r.push(s)}var o=t.data.baseData.properties||{};for(var i in o)if(o.hasOwnProperty(i)){var a=o[i],s={key:i,value:a};r.push(s)}return r},e.keys=new rn.ContextTagKeys,e}();nT.exports=sx});var sT=p((Tk,aT)=>{"use strict";var ox=function(){return(Date.now()+621355968e5)*1e4};aT.exports={getTransmissionTime:ox}});var pT=p((Ia,lT)=>{"use strict";var oT=Ia&&Ia.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?a(l.value):i(l.value).then(o,c)}u((n=n.apply(e,t||[])).next())})},cT=Ia&&Ia.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},cx=require("https"),ux=gi(),uT=me(),lx=sT(),px=Ge(),nt={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},fx=function(){function e(t){this._config=t,this._consecutiveErrors=0}return e.prototype.ping=function(t,r,n){var i=[{name:nt.streamId,value:t.StreamId},{name:nt.machineName,value:t.MachineName},{name:nt.roleName,value:t.RoleName},{name:nt.instanceName,value:t.Instance},{name:nt.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,r,n,"ping",i)},e.prototype.post=function(t,r,n){return oT(this,void 0,void 0,function(){return cT(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],r,n,"post")];case 1:return i.sent(),[2]}})})},e.prototype._submitData=function(t,r,n,i,a){return oT(this,void 0,void 0,function(){var s,o,c,u,l,f=this;return cT(this,function(d){return s=JSON.stringify(t),o=(u={},u[ux.disableCollectionRequestOption]=!0,u.host=r&&r.length>0?r:this._config.quickPulseHost,u.method=nt.method,u.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,u.headers=(l={Expect:"100-continue"},l[nt.time]=lx.getTransmissionTime(),l["Content-Type"]="application/json",l["Content-Length"]=Buffer.byteLength(s),l),u),a&&a.length>0&&a.forEach(function(h){return o.headers[h.name]=h.value}),this._config.httpsAgent?o.agent=this._config.httpsAgent:o.agent=px.tlsRestrictedAgent,c=cx.request(o,function(h){if(h.statusCode==200){var m=h.headers[nt.subscribed]==="true",S=h.headers[nt.endpointRedirect]?h.headers[nt.endpointRedirect].toString():null,k=h.headers[nt.pollingIntervalHint]?parseInt(h.headers[nt.pollingIntervalHint].toString()):null;f._consecutiveErrors=0,n(m,h,S,k)}else f._onError("StatusCode:"+h.statusCode+" StatusMessage:"+h.statusMessage),n()}),c.on("error",function(h){f._onError(h),n()}),c.write(s),c.end(),[2]})})},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",uT.warn(e.TAG,r,t)):uT.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();lT.exports=fx});var vT=p((Ca,_T)=>{"use strict";var fT=Ca&&Ca.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?a(l.value):i(l.value).then(o,c)}u((n=n.apply(e,t||[])).next())})},dT=Ca&&Ca.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hT=me(),sf=iT(),dx=pT(),hx=kt(),_x=ba(),vx=function(){function e(t,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=r||new _x,this._sender=new dx(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(t){this._collectors.push(t)},e.prototype.trackMetric=function(t){this._addMetric(t)},e.prototype.addDocument=function(t){var r=sf.telemetryEnvelopeToQuickPulseDocument(t);r&&this._documents.push(r)},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(r){r.enable(t)})},e.prototype._addMetric=function(t){var r=t.value,n=t.count||1,i=hx.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=sf.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return fT(this,void 0,void 0,function(){var t,r,n,i,a=this;return dT(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(o){return a._metrics[o]}),r=sf.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(t){return fT(this,void 0,void 0,function(){return dT(this,function(r){switch(r.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},e.prototype._quickPulseDone=function(t,r,n,i){t!=null?(this._isCollectingData!==t&&(hT.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,n&&n.length>0&&(this._redirectedHost=n,hT.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();_T.exports=vx});var ET=p((Sk,mT)=>{"use strict";var gT=kt(),gx=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR),n=r.reduce(function(a,s){var o=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(o.length===2){var c=o[0].toLowerCase(),u=o[1];a[c]=u}return a},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||gT.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||gT.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();mT.exports=gx});var cf=p((bk,ST)=>{"use strict";var of=Gr(),yT=ET(),mx=me(),TT=kt(),Ex=require("url"),yx=function(){function e(t){var r=this;this.endpointBase=TT.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],i=yT.parse(t),a=yT.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:t;this.instrumentationKey=i.instrumentationkey||s||a.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey)||mx.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||a.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(o){return r.correlationId=o},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||a.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||a.liveendpoint||process.env[e.ENV_quickPulseHost]||TT.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=Ex.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(t){of.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=t,this.correlationId=of.correlationIdPrefix,of.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(t){this._quickPulseHost=t},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||t=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(t){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(t)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();ST.exports=yx});var AT=p(mi=>{"use strict";var pc=mi&&mi.__assign||function(){return pc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pc.apply(this,arguments)};Object.defineProperty(mi,"__esModule",{value:!0});mi.AutoCollectNativePerformance=void 0;var bT=cf(),Oa=ba(),Tx=me(),Sx=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>=6},e.prototype.enable=function(t,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!e.isNodeVersionCompatible()){if(e._metricsAvailable==null&&t&&!this._isInitialized)try{var a=require("applicationinsights-native-metrics");e._emitter=new a,e._metricsAvailable=!0,Tx.info("Native metrics module successfully loaded!")}catch(s){e._metricsAvailable=!1;return}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(t){var r=process.env[bT.ENV_nativeMetricsDisableAll],n=process.env[bT.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),a={};if(i.length>0)for(var s=0,o=i;s<o.length;s++){var c=o[s];a[c]=!0}return typeof t=="object"?{isEnabled:!0,disabledMetrics:pc(pc({},t),a)}:{isEnabled:t,disabledMetrics:a}}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:t}},e.prototype._trackNativeMetrics=function(){var t=!0;typeof this._isEnabled!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:a,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Oa.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",a=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Oa.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var t,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),a=i.heapUsed,s=i.heapTotal,o=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Oa.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Oa.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:o-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+Oa.sdkVersion,n)})}},e}();mi.AutoCollectNativePerformance=Sx});var CT=p((Ik,IT)=>{"use strict";var bx=me(),Ax=function(){function e(t,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(t,r,n){this._sender.setDiskRetryMode(t,r,n)},e.prototype.send=function(t){var r=this;if(!this._isDisabled()){if(!t){bx.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(t,r){var n=this._buffer.length<1;n||(t?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},e}();IT.exports=Ax});var OT=p(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.azureRoleEnvironmentTelemetryProcessor=void 0;function Ix(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}fc.azureRoleEnvironmentTelemetryProcessor=Ix});var NT=p(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.getSamplingHashCode=Ei.samplingTelemetryProcessor=void 0;var PT=Me();function Cx(e,t){var r=e.sampleRate,n=!1;return r==null||r>=100||e.data&&PT.TelemetryType.Metric===PT.baseTypeToTelemetryType(e.data.baseType)?!0:(t.correlationContext&&t.correlationContext.operation?n=RT(t.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Ei.samplingTelemetryProcessor=Cx;function RT(e){var t=-2147483648,r=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(var i=0;i<e.length;i++)n=((n<<5)+n|0)+e.charCodeAt(i)|0;return n=n<=t?r:Math.abs(n),n/r*100}Ei.getSamplingHashCode=RT});var wT=p(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.performanceMetricsTelemetryProcessor=void 0;var uf=ac(),lf=Me();function Ox(e,t){switch(t&&t.addDocument(e),e.data.baseType){case lf.TelemetryTypeString.Exception:uf.countException();break;case lf.TelemetryTypeString.Request:var r=e.data.baseData;uf.countRequest(r.duration,r.success);break;case lf.TelemetryTypeString.Dependency:var n=e.data.baseData;uf.countDependency(n.duration,n.success);break}return!0}dc.performanceMetricsTelemetryProcessor=Ox});var DT=p(yi=>{"use strict";var yt=yi&&yi.__assign||function(){return yt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yt.apply(this,arguments)};Object.defineProperty(yi,"__esModule",{value:!0});yi.preAggregatedMetricsTelemetryProcessor=void 0;var Px=Me(),Pa=Kp(),hc=Me();function Rx(e,t){if(Pa.isEnabled())switch(e.data.baseType){case hc.TelemetryTypeString.Exception:var r=e.data.baseData;r.properties=yt(yt({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};Pa.countException(n);break;case hc.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=yt(yt({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:Px.SeverityLevel[i.severity]};Pa.countTrace(a);break;case hc.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=yt(yt({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var o={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};Pa.countRequest(s.duration,o);break;case hc.TelemetryTypeString.Dependency:var c=e.data.baseData;c.properties=yt(yt({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:c.success,dependencyType:c.type,dependencyTarget:c.target,dependencyResultCode:c.resultCode};Pa.countDependency(c.duration,u);break}return!0}yi.preAggregatedMetricsTelemetryProcessor=Rx});var xT=p(Tt=>{"use strict";var Nx=Tt&&Tt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_c=Tt&&Tt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Nx(t,e,r)};Object.defineProperty(Tt,"__esModule",{value:!0});_c(OT(),Tt);_c(NT(),Tt);_c(wT(),Tt);_c(DT(),Tt)});var qT=p((Ra,LT)=>{"use strict";var wx=Ra&&Ra.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(l){try{u(n.next(l))}catch(f){s(f)}}function c(l){try{u(n.throw(l))}catch(f){s(f)}}function u(l){l.done?a(l.value):i(l.value).then(o,c)}u((n=n.apply(e,t||[])).next())})},Dx=Ra&&Ra.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ye=require("fs"),MT=require("os"),Ut=require("path"),xx=require("zlib"),Ti=require("child_process"),Te=me(),Mx=gi(),vc=Ge(),Lx=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=Ut.join(MT.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=ye.existsSync(e.ICACLS_PATH)}catch(i){}e.OS_PROVIDES_FILE_PROTECTION||Te.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,Te.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return wx(this,void 0,void 0,function(){var n,i,a,s,o=this;return Dx(this,function(c){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},a="",t.forEach(function(u){var l=o._stringify(u);typeof l=="string"&&(a+=l+`
`)}),a.length>0&&(a=a.substring(0,a.length-1)),s=Buffer.from?Buffer.from(a):new Buffer(a),xx.gzip(s,function(u,l){var f=l;u?(Te.warn(u),f=s,i.headers["Content-Length"]=s.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=l.length.toString()),Te.info(e.TAG,i),i[Mx.disableCollectionRequestOption]=!0;var d=function(m){m.setEncoding("utf-8");var S="";m.on("data",function(k){S+=k}),m.on("end",function(){if(o._numConsecutiveFailures=0,o._enableDiskRetryMode){if(m.statusCode===200)o._resendTimer||(o._resendTimer=setTimeout(function(){o._resendTimer=null,o._sendFirstFileOnDisk()},o._resendInterval),o._resendTimer.unref());else if(o._isRetriable(m.statusCode))try{var k=JSON.parse(S),ce=[];k.errors.forEach(function(bt){o._isRetriable(bt.statusCode)&&ce.push(t[bt.index])}),ce.length>0&&o._storeToDisk(ce)}catch(bt){o._storeToDisk(t)}}if(m.statusCode===307||m.statusCode===308)if(o._numConsecutiveRedirects++,o._numConsecutiveRedirects<10){var Ce=m.headers.location?m.headers.location.toString():null;Ce&&(o._redirectedHost=Ce,o.send(t,r))}else typeof r=="function"&&r("Error sending telemetry because of circular redirects.");else o._numConsecutiveRedirects=0,typeof r=="function"&&r(S),Te.info(e.TAG,S),typeof o._onSuccess=="function"&&o._onSuccess(S)})},h=vc.makeRequest(o._config,n,i,d);h.on("error",function(m){if(o._numConsecutiveFailures++,!o._enableDiskRetryMode||o._numConsecutiveFailures>0&&o._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var S="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";o._enableDiskRetryMode&&(S="Ingestion endpoint could not be reached "+o._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),Te.warn(e.TAG,S,vc.dumpObj(m))}else{var S="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";Te.info(e.TAG,S,vc.dumpObj(m))}o._onErrorHelper(m),typeof r=="function"&&(m&&r(vc.dumpObj(m)),r("Error sending telemetry")),o._enableDiskRetryMode&&o._storeToDisk(t)}),h.write(f),h.end()})),[2]})})},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(t))},e.prototype._isRetriable=function(t){return t===206||t===408||t===429||t===439||t===500||t===503},e.prototype._runICACLS=function(t,r){var n=Ti.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,a){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},e.prototype._runICACLSSync=function(t){if(Ti.spawnSync){var r=Ti.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=Ti.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return t(i,null)}),r.on("close",function(i,a){return e.ACL_IDENTITY=n&&n.trim(),t(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(Ti.spawnSync){var t=Ti.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(t,r){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;if(!e.USE_ICACLS)return r(null);if(e.ACLED_DIRECTORIES[t]===void 0)e.ACLED_DIRECTORIES[t]=!1,this._getACLIdentity(function(i,a){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,a),function(s){return e.ACLED_DIRECTORIES[t]=!s,r(s)})});else return r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=!0;return}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(t,r){var n=this;ye.lstat(t,function(i,a){i&&i.code==="ENOENT"?ye.mkdir(t,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(t,r)}):!i&&a.isDirectory()?n._applyACLRules(t,r):r(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(t,r){ye.readdir(t,function(n,i){if(n)return r(n,-1);var a=null,s=0,o=0;if(i.length===0){r(null,0);return}for(var c=0;c<i.length;c++)ye.stat(Ut.join(t,i[c]),function(u,l){o++,u?a=u:l.isFile()&&(s+=l.size),o===i.length&&(a?r(a,-1):r(a,s))})})},e.prototype._getShallowDirectorySizeSync=function(t){for(var r=ye.readdirSync(t),n=0,i=0;i<r.length;i++)n+=ye.statSync(Ut.join(t,r[i])).size;return n},e.prototype._storeToDisk=function(t){var r=this;Te.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(n){if(n){Te.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),r._onErrorHelper(n);return}r._getShallowDirectorySize(r._tempDir,function(i,a){if(i||a<0){Te.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),r._onErrorHelper(i);return}else if(a>r._maxBytesOnDisk){Te.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);return}var s=new Date().getTime()+".ai.json",o=Ut.join(r._tempDir,s);Te.info(e.TAG,"saving data to disk at: "+o),ye.writeFile(o,r._stringify(t),{mode:384},function(c){return r._onErrorHelper(c)})})})},e.prototype._storeToDiskSync=function(t){try{Te.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),ye.existsSync(this._tempDir)||ye.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){Te.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=Ut.join(this._tempDir,n);Te.info(e.TAG,"saving data before crash to disk at: "+i),ye.writeFileSync(i,t,{mode:384})}catch(a){Te.warn(e.TAG,"Error while saving data to disk: "+(a&&a.message)),this._onErrorHelper(a)}},e.prototype._sendFirstFileOnDisk=function(){var t=this;ye.exists(this._tempDir,function(r){r&&ye.readdir(t._tempDir,function(n,i){if(n)t._onErrorHelper(n);else if(i=i.filter(function(o){return Ut.basename(o).indexOf(".ai.json")>-1}),i.length>0){var a=i[0],s=Ut.join(t._tempDir,a);ye.readFile(s,function(o,c){o?t._onErrorHelper(o):ye.unlink(s,function(u){if(u)t._onErrorHelper(u);else try{var l=JSON.parse(c.toString());t.send(l)}catch(f){Te.warn("Failed to read persisted file",f)}})})}})})},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t)},e.prototype._stringify=function(t){try{return JSON.stringify(t)}catch(r){Te.warn("Failed to serialize payload",r,t)}},e.prototype._fileCleanupTask=function(){var t=this;ye.exists(this._tempDir,function(r){r&&ye.readdir(t._tempDir,function(n,i){n?t._onErrorHelper(n):(i=i.filter(function(a){return Ut.basename(a).indexOf(".ai.json")>-1}),i.length>0&&i.forEach(function(a){var s=new Date(parseInt(a.split(".ai.json")[0])),o=new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>s;if(o){var c=Ut.join(t._tempDir,a);ye.unlink(c,function(u){u&&t._onErrorHelper(u)})}}))})})},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS=MT.type()==="Windows_NT",e}();LT.exports=Lx});var HT=p((wk,jT)=>{"use strict";var b=Me(),it=Ge(),qx=gr(),kx=function(){function e(){}return e.createEnvelope=function(t,r,n,i,a){var s=null;switch(r){case b.TelemetryType.Trace:s=e.createTraceData(t);break;case b.TelemetryType.Dependency:s=e.createDependencyData(t);break;case b.TelemetryType.Event:s=e.createEventData(t);break;case b.TelemetryType.Exception:s=e.createExceptionData(t);break;case b.TelemetryType.Request:s=e.createRequestData(t);break;case b.TelemetryType.Metric:s=e.createMetricData(t);break;case b.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case b.TelemetryType.PageView:s=e.createPageViewData(t);break}if(n&&b.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var o in n)s.baseData.properties[o]||(s.baseData.properties[o]=n[o]);s.baseData.properties=it.validateStringMap(s.baseData.properties)}var c=a&&a.instrumentationKey||"",u=new b.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,t.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=a?a.samplingPercentage:100,r===b.TelemetryType.Metric&&(u.sampleRate=100),u},e.createTraceData=function(t){var r=new b.MessageData;r.message=t.message,r.properties=t.properties,isNaN(t.severity)?r.severityLevel=b.SeverityLevel.Information:r.severityLevel=t.severity;var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Trace),n.baseData=r,n},e.createDependencyData=function(t){var r=new b.RemoteDependencyData;typeof t.name=="string"&&(r.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),r.data=t.data,r.target=t.target,r.duration=it.msToTimeSpan(t.duration),r.success=t.success,r.type=t.dependencyTypeName,r.properties=t.properties,r.resultCode=t.resultCode?t.resultCode+"":"",t.id?r.id=t.id:r.id=it.w3cTraceId();var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Dependency),n.baseData=r,n},e.createEventData=function(t){var r=new b.EventData;r.name=t.name,r.properties=t.properties,r.measurements=t.measurements;var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Event),n.baseData=r,n},e.createExceptionData=function(t){var r=new b.ExceptionData;r.properties=t.properties,isNaN(t.severity)?r.severityLevel=b.SeverityLevel.Error:r.severityLevel=t.severity,r.measurements=t.measurements,r.exceptions=[];var n=t.exception.stack,i=new b.ExceptionDetails;i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=it.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var a=new b.Data;return a.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Exception),a.baseData=r,a},e.createRequestData=function(t){var r=new b.RequestData;t.id?r.id=t.id:r.id=it.w3cTraceId(),r.name=t.name,r.url=t.url,r.source=t.source,r.duration=it.msToTimeSpan(t.duration),r.responseCode=t.resultCode?t.resultCode+"":"",r.success=t.success,r.properties=t.properties;var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Request),n.baseData=r,n},e.createMetricData=function(t){var r=new b.MetricData;r.metrics=[];var n=new b.DataPoint;n.count=isNaN(t.count)?1:t.count,n.kind=b.DataPointType.Aggregation,n.max=isNaN(t.max)?t.value:t.max,n.min=isNaN(t.min)?t.value:t.min,n.name=t.name,n.stdDev=isNaN(t.stdDev)?0:t.stdDev,n.value=t.value,r.metrics.push(n),r.properties=t.properties;var i=new b.Data;return i.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Metric),i.baseData=r,i},e.createAvailabilityData=function(t){var r=new b.AvailabilityData;t.id?r.id=t.id:r.id=it.w3cTraceId(),r.name=t.name,r.duration=it.msToTimeSpan(t.duration),r.success=t.success,r.runLocation=t.runLocation,r.message=t.message,r.measurements=t.measurements,r.properties=t.properties;var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.Availability),n.baseData=r,n},e.createPageViewData=function(t){var r=new b.PageViewData;r.name=t.name,r.duration=it.msToTimeSpan(t.duration),r.url=t.url,r.measurements=t.measurements,r.properties=t.properties;var n=new b.Data;return n.baseType=b.telemetryTypeToBaseType(b.TelemetryType.PageView),n.baseData=r,n},e.getTags=function(t,r){var n=qx.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var a in t.tags)i[a]=t.tags[a];if(r)for(var a in r)i[a]=r[a];return n&&(i[t.keys.operationId]=i[t.keys.operationId]||n.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||n.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||n.operation.parentId),i},e.parseStack=function(t){var r=void 0;if(typeof t=="string"){var n=t.split(`
`);r=[];for(var i=0,a=0,s=0;s<=n.length;s++){var o=n[s];if(kT.regex.test(o)){var c=new kT(n[s],i++);a+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(a>u)for(var l=0,f=r.length-1,d=0,h=l,m=f;l<f;){var S=r[l].sizeInBytes,k=r[f].sizeInBytes;if(d+=S+k,d>u){var ce=m-h+1;r.splice(h,ce);break}h=l,m=f,l++,f--}}return r},e}(),kT=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=it.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=it.trim(n[2])||this.method,this.fileName=it.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();jT.exports=kx});var GT=p((Dk,FT)=>{"use strict";var jx=require("url"),Hx=cf(),Ux=ba(),Bt=Me(),Bx=CT(),gc=xT(),UT=gr(),Fx=qT(),pf=Ge(),BT=me(),Gx=HT(),Vx=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new Hx(t);this.config=r,this.context=new Ux,this.commonProperties={};var n=new Fx(this.config);this.channel=new Bx(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return e.prototype.trackAvailability=function(t){this.track(t,Bt.TelemetryType.Availability)},e.prototype.trackPageView=function(t){this.track(t,Bt.TelemetryType.PageView)},e.prototype.trackTrace=function(t){this.track(t,Bt.TelemetryType.Trace)},e.prototype.trackMetric=function(t){this.track(t,Bt.TelemetryType.Metric)},e.prototype.trackException=function(t){t&&t.exception&&!pf.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,Bt.TelemetryType.Exception)},e.prototype.trackEvent=function(t){this.track(t,Bt.TelemetryType.Event)},e.prototype.trackRequest=function(t){this.track(t,Bt.TelemetryType.Request)},e.prototype.trackDependency=function(t){t&&!t.target&&t.data&&(t.target=jx.parse(t.data).host),this.track(t,Bt.TelemetryType.Dependency)},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:!1,t?t.callback:void 0)},e.prototype.track=function(t,r){if(t&&Bt.telemetryTypeToBaseType(r)){var n=Gx.createEnvelope(t,r,this.commonProperties,this.context,this.config);t.time&&(n.time=t.time.toISOString()),this._enableAzureProperties&&gc.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,t.contextObjects);i=i&&gc.samplingTelemetryProcessor(n,{correlationContext:UT.CorrelationContextManager.getCurrentContext()}),gc.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(gc.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else BT.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=UT.CorrelationContextManager.getCurrentContext();for(var a=0;a<i;++a)try{var s=this._telemetryProcessors[a];if(s&&s.apply(null,[t,r])===!1){n=!1;break}}catch(o){n=!0,BT.warn("One of telemetry processors failed, telemetry item will be sent.",o,t)}return n&&(t&&t.tags&&(t.tags=pf.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=pf.validateStringMap(t.data.baseData.properties))),n},e}();FT.exports=Vx});var zT=p((ff,$T)=>{"use strict";var $x=ff&&ff.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zx=GT(),VT=rf(),Kx=gi(),mc=me(),Xx=function(e){$x(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?VT.trackRequestSync(this,r):mc.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&mc.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?VT.trackRequest(this,r):mc.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(r){r&&r.request?Kx.trackRequest(this,r):mc.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(zx);$T.exports=Xx});var XT=p(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0})});var _S=p(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.dispose=E.Configuration=E.wrapWithCorrelationContext=E.startOperation=E.getCorrelationContext=E.start=E.setup=E.liveMetricsClient=E.defaultClient=E.DistributedTracingModes=void 0;var df=gr(),Wx=Ey(),Yx=Ty(),WT=ac(),Qx=Kp(),Zx=Yy(),Jx=gi(),eM=rf(),YT=Gr(),Na=me(),tM=vT(),QT=AT();E.TelemetryClient=zT();E.Contracts=Me();E.azureFunctionsTypes=XT();var ZT;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"})(ZT=E.DistributedTracingModes||(E.DistributedTracingModes={}));var JT=!0,eS=!1,tS=!0,rS=!0,nS=!0,iS=!1,aS=!0,sS=!0,oS=!0,hf=!0,cS,Ec=!1,uS=!0,lS,pS=void 0,fS=void 0,wa,Da,xa,Ma,La,Si,nn,qa,St=!1,dS;function rM(e){return E.defaultClient?Na.info("The default client is already setup"):(E.defaultClient=new E.TelemetryClient(e),wa=new Wx(E.defaultClient),Da=new Yx(E.defaultClient),xa=new WT(E.defaultClient),Ma=new Qx(E.defaultClient),La=new Zx(E.defaultClient),nn=new eM(E.defaultClient),qa=new Jx(E.defaultClient),Si||(Si=new QT.AutoCollectNativePerformance(E.defaultClient))),E.defaultClient&&E.defaultClient.channel&&E.defaultClient.channel.setUseDiskRetryCaching(oS,pS,fS),_f}E.setup=rM;function hS(){return E.defaultClient?(St=!0,wa.enable(JT,eS),Da.enable(tS),xa.enable(rS),Ma.enable(nS),La.enable(iS,E.defaultClient.config),Si.enable(uS,lS),nn.useAutoCorrelation(hf,cS),nn.enable(aS),qa.enable(sS),E.liveMetricsClient&&Ec&&E.liveMetricsClient.enable(Ec)):Na.warn("Start cannot be called before setup"),_f}E.start=hS;function nM(){return hf?df.CorrelationContextManager.getCurrentContext():null}E.getCorrelationContext=nM;function iM(e,t){return df.CorrelationContextManager.startOperation(e,t)}E.startOperation=iM;function aM(e,t){return df.CorrelationContextManager.wrapCallback(e,t)}E.wrapWithCorrelationContext=aM;var _f=function(){function e(){}return e.setDistributedTracingMode=function(t){return YT.w3cEnabled=t===ZT.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,r){return r===void 0&&(r=!1),JT=t,eS=r,St&&wa.enable(t,r),e},e.setAutoCollectExceptions=function(t){return tS=t,St&&Da.enable(t),e},e.setAutoCollectPerformance=function(t,r){r===void 0&&(r=!0),rS=t;var n=QT.AutoCollectNativePerformance.parseEnabled(r);return uS=n.isEnabled,lS=n.disabledMetrics,St&&(xa.enable(t),Si.enable(n.isEnabled,n.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return nS=t,St&&Ma.enable(t),e},e.setAutoCollectHeartbeat=function(t){return iS=t,St&&La.enable(t,E.defaultClient.config),e},e.setAutoCollectRequests=function(t){return aS=t,St&&nn.enable(t),e},e.setAutoCollectDependencies=function(t){return sS=t,St&&qa.enable(t),e},e.setAutoDependencyCorrelation=function(t,r){return hf=t,cS=r,St&&nn.useAutoCorrelation(t,r),e},e.setUseDiskRetryCaching=function(t,r,n){return oS=t,pS=r,fS=n,E.defaultClient&&E.defaultClient.channel&&E.defaultClient.channel.setUseDiskRetryCaching(t,r,n),e},e.setInternalLogging=function(t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Na.enableDebug=t,Na.disableWarnings=!r,e},e.setSendLiveMetrics=function(t){return t===void 0&&(t=!1),E.defaultClient?(!E.liveMetricsClient&&t?(E.liveMetricsClient=new tM(E.defaultClient.config,null),dS=new WT(E.liveMetricsClient,1e3,!0),E.liveMetricsClient.addCollector(dS),E.defaultClient.quickPulseClient=E.liveMetricsClient):E.liveMetricsClient&&E.liveMetricsClient.enable(t),Ec=t,e):(Na.warn("Live metrics client cannot be setup without the default client"),e)},e.start=hS,e}();E.Configuration=_f;function sM(){YT.w3cEnabled=!0,E.defaultClient=null,St=!1,wa&&wa.dispose(),Da&&Da.dispose(),xa&&xa.dispose(),Ma&&Ma.dispose(),La&&La.dispose(),Si&&Si.dispose(),nn&&nn.dispose(),qa&&qa.dispose(),E.liveMetricsClient&&(E.liveMetricsClient.enable(!1),Ec=!1,E.liveMetricsClient=void 0)}E.dispose=sM});var SS=p(TS=>{var oM=Object.create,ka=Object.defineProperty,cM=Object.getOwnPropertyDescriptor,uM=Object.getOwnPropertyNames,vS=Object.getOwnPropertySymbols,lM=Object.getPrototypeOf,gS=Object.prototype.hasOwnProperty,pM=Object.prototype.propertyIsEnumerable,mS=(e,t,r)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bi=(e,t)=>{for(var r in t||(t={}))gS.call(t,r)&&mS(e,r,t[r]);if(vS)for(var r of vS(t))pM.call(t,r)&&mS(e,r,t[r]);return e},ES=e=>ka(e,"__esModule",{value:!0}),fM=(e,t)=>{ES(e);for(var r in t)ka(e,r,{get:t[r],enumerable:!0})},dM=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of uM(t))!gS.call(e,n)&&n!=="default"&&ka(e,n,{get:()=>t[n],enumerable:!(r=cM(t,n))||r.enumerable});return e},yc=e=>dM(ES(ka(e!=null?oM(lM(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);fM(TS,{default:()=>_M});var yS=yc(require("os")),Tc=yc(require("vscode")),Sc=yc(_S()),Q=yc(require("vscode"));function vf(){return globalThis.telemetryOutputChannel===void 0&&(globalThis.telemetryOutputChannel=Q.window.createOutputChannel("Log (Extension Telemetry)")),globalThis.telemetryOutputChannel}var gf=class{constructor(e,t,r,n,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!i,this.updateUserOptStatus(),Q.env.onDidChangeTelemetryEnabled!==void 0?this.optOutListener=Q.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus()):this.optOutListener=Q.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus())}updateUserOptStatus(){let e=Q.workspace.getConfiguration(gf.TELEMETRY_CONFIG_ID),t=Q.env.isTelemetryEnabled===void 0?e.get(gf.TELEMETRY_CONFIG_ENABLED_ID,!0):Q.env.isTelemetryEnabled;this.userOptIn!==t&&(this.userOptIn=t)}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(r=>{e.indexOf(`${r}+`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=Q.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.firstParty?this.cleanRemoteName(Q.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===Q.ExtensionKind.Workspace||Q.env.uiKind===Q.UIKind.Web):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Q&&Q.env){switch(e["common.vscodemachineid"]=Q.env.machineId,e["common.vscodesessionid"]=Q.env.sessionId,e["common.vscodeversion"]=Q.version,e["common.isnewappinstall"]=Q.env.isNewAppInstall,Q.env.uiKind){case Q.UIKind.Web:e["common.uikind"]="web";break;case Q.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Q.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];Q.env.appRoot!==""&&n.push(new RegExp(Q.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let a=[];for(let u of n)for(;(r=u.exec(e))&&r;)a.push([r.index,u.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=o.exec(e))&&r;)r[0]&&!s.test(r[0])&&a.every(([u,l])=>r.index<u||r.index>=l)&&(i+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=o.lastIndex);c<e.length&&(i+=e.substr(c))}for(let a of n)i=i.replace(a,"");return i}sendTelemetryEvent(e,t,r){if(this.userOptIn&&e!==""){t=bi(bi({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(i,a)=>this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:n,measurements:r}),vf().appendLine(`${this.extensionId}/${e} ${JSON.stringify({properties:n,measurements:r})}`)}}sendTelemetryErrorEvent(e,t,r,n){if(this.userOptIn&&e!==""){t=bi(bi({},t),this.getCommonProperties());let i=this.cloneAndChange(t,(a,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(a)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:i,measurements:r}),vf().appendLine(`${this.extensionId}/${e} ${JSON.stringify({properties:i,measurements:r})}`)}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.userOptIn&&e){t=bi(bi({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(i,a)=>this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logException(e,{properties:n,measurements:r}),vf().appendLine(`${this.extensionId}/${e.name} ${JSON.stringify({properties:n,measurements:r})}`)}}dispose(){return this.telemetryAppender.flush(),this.optOutListener.dispose()}},mf=gf;mf.TELEMETRY_CONFIG_ID="telemetry",mf.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry";var hM=class{constructor(e){Sc.defaultClient?(this._appInsightsClient=new Sc.TelemetryClient(e),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(Sc.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=Sc.defaultClient),Tc&&Tc.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=Tc.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=Tc.env.sessionId),e&&e.indexOf("AIF-")===0&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}logEvent(e,t){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:e,properties:t.properties,measurements:t.measurements})}logException(e,t){!this._appInsightsClient||this._appInsightsClient.trackException({exception:e,properties:t.properties,measurements:t.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}},_M=class extends mf{constructor(e,t,r,n){let i=new hM(r);r&&r.indexOf("AIF-")===0&&(n=!0),super(e,t,i,{release:yS.release(),platform:yS.platform()},n)}}});LS(exports,{activate:()=>gM,deactivate:()=>mM});var hr=_r(require("vscode")),CS=_r(SS());var fr=_r(require("vscode"));var bS=_r(require("vscode"));function bc(){let e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}async function AS(){return bS.window.showInputBox({placeHolder:"Enter offset to go to",validateInput:e=>e.length>8||new RegExp("^[a-fA-F0-9]+$").test(e)?null:"Invalid offset string"})}var Ef=class{constructor(t){this._extensionURI=t}resolveWebviewView(t,r,n){this._view=t,t.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},t.webview.html=this._getWebviewHTML(t.webview),t.webview.onDidReceiveMessage(i=>{i.type==="ready"&&t.show()}),this._view.onDidDispose(()=>this._view=void 0),t.onDidChangeVisibility(()=>{t.visible&&this._lastMessage&&t.webview.postMessage(this._lastMessage)}),this._lastMessage&&t.webview.postMessage(this._lastMessage)}handleEditorMessage(t){var r;this._lastMessage=t,(r=this._view)==null||r.webview.postMessage(t)}show(t){var r;(t==null?void 0:t.autoReveal)&&!fr.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!(t==null?void 0:t.forceFocus)?this._view.show():fr.commands.executeCommand(`${Ef.viewType}.focus`),this._lastMessage&&((r=this._view)==null||r.webview.postMessage(this._lastMessage)))}_getWebviewHTML(t){let r=t.asWebviewUri(fr.Uri.joinPath(this._extensionURI,"dist","inspector.js")),n=t.asWebviewUri(fr.Uri.joinPath(this._extensionURI,"dist","inspector.css")),i=fr.workspace.getConfiguration().get("hexeditor.defaultEndianness"),a=bc();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${t.cspSource}; script-src 'nonce-${a}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${n}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
                  <div class="grid-item">
                    <label for="binary8">8 bit Binary</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="binary8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int8">Int8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint8">UInt8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int16">Int16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint16">UInt16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int24">Int24</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int24" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint24">UInt24</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint24" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int32">Int32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint32">UInt32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int64">Int64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int64" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint64">UInt64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint64" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="utf8">UTF-8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="utf8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="utf16">UTF-16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="utf16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="float32">Float 32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="float32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="float64">Float 64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="float64" readonly/>
                  </div>
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${i==="little"?"selected":""}>Little Endian</option>
                      <option value="big" ${i==="big"?"selected":""}>Big Endian</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${a}" src="${r}"><\/script>
            </body>
            </html>`}},ja=Ef;ja.viewType="hexEditor.dataInspectorView";var oe=_r(require("vscode"));var Se=_r(require("vscode"));function yf(e){for(;e.length;){let t=e.pop();t&&t.dispose()}}var Tf=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,yf(this._disposables))}_register(t){return this._isDisposed?t.dispose():this._disposables.push(t),t}get isDisposed(){return this._isDisposed}};var dr=class{constructor(t){this._cancelled=!1;this._documentDataWithEdits=t.documentDataWithEdits}async textSearch(t,r){let n={result:[],partial:!1};return r.regex?new Promise(i=>{this.regexTextSearch(t,r.caseSensitive,n,String.fromCharCode.apply(null,Array.from(this._documentDataWithEdits)),i)}):new Promise(i=>{this.normalTextSearch(t,r.caseSensitive,0,n,i)})}async hexSearch(t){let r={result:[],partial:!1};return new Promise(n=>{this.normalHexSearch(t,0,r,n)})}normalHexSearch(t,r,n,i){let a=Date.now();for(;r<this._documentDataWithEdits.length;r++){let s=[];for(let o=0;o<t.length;o++){if(r+o>=this._documentDataWithEdits.length){i(n);return}let c=this._documentDataWithEdits[r+o].toString(16).toUpperCase();c=c.length!==2?"0"+c:c;let u=t[o].toUpperCase();if(u==="??"||u===c)s.push(r+o);else break}if(s.length===t.length&&(n.result.push(s),n.result.length===dr._searchResultLimit)){n.partial=!0,i(n);return}if(this._cancelled){this._cancelled=!1,n.partial=!0,i(n);return}if(Date.now()-a>dr._interruptTime){setImmediate(()=>this.normalHexSearch(t,r,n,i));return}}i(n)}regexTextSearch(t,r,n,i,a){let s=Date.now(),o=r?"g":"gi",c=new RegExp(t,o),u;for(;(u=c.exec(i))!==null;){if(u.index===void 0)continue;let l=[];for(let f=u.index;f<u.index+u[0].length;f++)l.push(f);if(n.result.push(l),this._cancelled){this._cancelled=!1,n.partial=!0,a(n);return}if(Date.now()-s>dr._interruptTime){setImmediate(()=>this.regexTextSearch(t,r,n,i,a));return}if(n.result.length===dr._searchResultLimit){n.partial=!0,a(n);return}}a(n)}normalTextSearch(t,r,n,i,a){let s=Date.now();for(;n<this._documentDataWithEdits.length;n++){let o=[];for(let c=0;c<t.length;c++){if(n+c>=this._documentDataWithEdits.length){a(i);return}let u=String.fromCharCode(this._documentDataWithEdits[n+c]),l=t[c];if(r||(u=u.toUpperCase(),l=l.toUpperCase()),l===u)o.push(n+c);else break}if(o.length===t.length&&(i.result.push(o),i.result.length===dr._searchResultLimit)){i.partial=!0,a(i);return}if(this._cancelled){this._cancelled=!1,i.partial=!0,a(i);return}if(Date.now()-s>dr._interruptTime){setImmediate(this.normalTextSearch.bind(this),t,r,n,i,a);return}}a(i)}cancelSearch(){this._cancelled=!0}},Ha=dr;Ha._searchResultLimit=1e5,Ha._interruptTime=100;var Sf=class{constructor(t){this._document=t}createNewRequest(){return this._request=new Ha(this._document),this._request}cancelRequest(){this._request!==void 0&&(this._request.cancelSearch(),this._request=void 0)}};var bf=_r(require("vscode")),Ac=class{static async getFileSize(t,r){var n;return t.scheme==="untitled"?(n=r==null?void 0:r.length)!=null?n:0:(await bf.workspace.fs.stat(t)).size}static async readFile(t,r){return t.scheme==="untitled"?r!=null?r:new Uint8Array:bf.workspace.fs.readFile(t)}};function IS(e,t){if(e===void 0||t===void 0)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let n=e[r],i=t[r];if(n.offset!==i.offset||n.oldValue!=i.oldValue||n.newValue!=i.newValue)return!1}return!0}var an=class extends Tf{constructor(t,r,n,i,a){super();this._edits=[];this._unsavedEdits=[];this.lastSave=Date.now();this._onDidDispose=this._register(new Se.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidChangeDocument=this._register(new Se.EventEmitter);this.onDidChangeContent=this._onDidChangeDocument.event;this._onDidChange=this._register(new Se.EventEmitter);this.onDidChange=this._onDidChange.event;this._uri=t,this._documentData=r,this._bytesize=n,this._baseAddress=a,this._unsavedEdits=i,this._edits=Array.from(i),this.searchProvider=new Sf(this)}static async create(t,r,n){let i=r.backupId,a=typeof i=="string"?Se.Uri.parse(i):t,s=typeof i=="string"?Se.Uri.parse(i+".json"):void 0,o=await Ac.getFileSize(t,r.untitledDocumentData),c=an.parseQuery(t.query),u=c.baseAddress?an.parseHexOrDecInt(c.baseAddress):0;n.sendTelemetryEvent("fileOpen",{},{fileSize:o});let l,f=Se.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,d=[];if(o>f&&!i)l=new Uint8Array;else if(l=await Ac.readFile(a,r.untitledDocumentData),s){let h=await Se.workspace.fs.readFile(s);d=JSON.parse(Buffer.from(h).toString("utf-8"))}return new an(t,l,o,d,u)}get uri(){return this._uri}get filesize(){let t=0;return this.unsavedEdits.flat().forEach(r=>{r.newValue!==void 0&&r.oldValue===void 0?t++:r.oldValue!==void 0&&r.newValue===void 0&&r.offset<this._bytesize&&t--}),this._bytesize+t}get baseAddress(){return this._baseAddress}get documentData(){return this._documentData}get documentDataWithEdits(){let t=Array.from(this.documentData),r=this._unsavedEdits.flat(),n=[];for(let i of r)i.oldValue!==void 0&&i.newValue!==void 0?t[i.offset]=i.newValue:i.oldValue===void 0&&i.newValue!==void 0?t.push(i.newValue):n.push(i.offset);n=n.sort((i,a)=>a-i);for(let i of n)t.splice(i,1);return t}dispose(){this._onDidDispose.fire(),super.dispose()}async openAnyways(){this._documentData=await Se.workspace.fs.readFile(this.uri)}get unsavedEdits(){return this._unsavedEdits}makeEdit(t){t.forEach(r=>r.sameOnDisk=!1),this._edits.push(t),this._unsavedEdits.push(t),this._onDidChange.fire({undo:async()=>{let r=this._edits.pop();if(!r)return;let n=!1;IS(this._unsavedEdits[this._unsavedEdits.length-1],r)&&(this._unsavedEdits.pop(),n=!0);let i=[];for(let a of r)a.sameOnDisk=a.oldValue!==void 0&&a.oldValue===this.documentData[a.offset]||!1,!a.sameOnDisk&&!n&&i.push({newValue:a.oldValue,oldValue:a.newValue,offset:a.offset,sameOnDisk:a.sameOnDisk});i.length!==0&&this._unsavedEdits.push(i),this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"undo",edits:r})},redo:async()=>{this._edits.push(t);let r=t;if(this._unsavedEdits[this._unsavedEdits.length-1]!==void 0){let i=this._unsavedEdits[this._unsavedEdits.length-1].slice(0);i=i.map(a=>(a.newValue===void 0&&a.oldValue!==void 0&&(a.newValue=a.oldValue,a.oldValue=void 0),a)),IS(i,r)&&this._unsavedEdits.pop()}let n=[];for(let i of r)i.sameOnDisk=i.offset<this._bytesize&&i.newValue===this.documentData[i.offset]||!1,i.sameOnDisk||n.push(i);n.length!==0&&this._unsavedEdits.push(n),this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"redo",edits:r})}})}async save(t){await this.saveAs(this.uri,t)}async saveAs(t,r){this._documentData=new Uint8Array(this.documentDataWithEdits),this._bytesize=this.documentData.length;let n=this.documentData;r&&r.isCancellationRequested||(await Se.workspace.fs.writeFile(t,n),this.lastSave=Date.now(),this._unsavedEdits=[])}async revert(t){let r=await Se.workspace.fs.readFile(this.uri);this._bytesize=r.length,this._documentData=r,this._unsavedEdits=[],this._edits=[],this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"revert",edits:[]})}async backup(t,r){return await this.saveAs(t,r),await Se.workspace.fs.writeFile(Se.Uri.parse(t.path+".json"),Buffer.from(JSON.stringify(this.unsavedEdits),"utf-8")),{id:t.toString(),delete:async()=>{try{await Se.workspace.fs.delete(t),await Se.workspace.fs.delete(Se.Uri.parse(t.path+".json"))}catch(n){}}}}replace(t,r,n){let i=[],a=this.documentDataWithEdits;for(let s of r){let o=[];for(let c=0;c<t.length&&c<s.length;c++){if(n){let u=String.fromCharCode(t[c]),l=String.fromCharCode(a[s[c]]);l.toUpperCase()===l&&l.toLowerCase()!=l?t[c]=u.toUpperCase().charCodeAt(0):l.toLowerCase()===l&&l.toUpperCase()!=l&&(t[c]=u.toLowerCase().charCodeAt(0))}if(t[c]!==a[s[c]]){let u={oldValue:a[s[c]],newValue:t[c],offset:s[c],sameOnDisk:!1};o.push(u),i.push(u)}}}return i.length!==0&&this.makeEdit(i),i}static parseQuery(t){let r={};if(t){let n=(t[0]==="?"?t.substr(1):t).split("&");for(let i of n){let a=i.split("="),s=a.shift();s&&(r[s]=a.join("="))}}return r}static parseHexOrDecInt(t){return t=t.toLowerCase(),t.startsWith("0x")?parseInt(t.substring(2),16):parseInt(t,10)}};var Af=class{constructor(){this._webviews=new Set}*get(t){let r=t.toString();for(let n of this._webviews)n.resource===r&&(yield n.webviewPanel)}add(t,r){let n={resource:t.toString(),webviewPanel:r};this._webviews.add(n),r.onDidDispose(()=>{this._webviews.delete(n)})}};var sn=class{constructor(t,r,n){this._context=t;this._telemetryReporter=r;this._dataInspectorView=n;this.webviews=new Af;this._onDidChangeCustomDocument=new oe.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event;this._requestId=1;this._callbacks=new Map}static register(t,r,n){return oe.window.registerCustomEditorProvider(sn.viewType,new sn(t,r,n),{supportsMultipleEditorsPerDocument:!1})}async openCustomDocument(t,r,n){let i=await an.create(t,r,this._telemetryReporter),a=[];a.push(i.onDidChange(o=>{this._onDidChangeCustomDocument.fire({document:i,...o})})),a.push(i.onDidChangeContent(o=>{for(let c of this.webviews.get(i.uri))this.postMessage(c,"update",{fileSize:o.fileSize,baseAddress:o.baseAddress,type:o.type,edits:o.edits})}));let s=oe.workspace.createFileSystemWatcher(t.fsPath);return a.push(s),a.push(s.onDidChange(o=>{if(o.fsPath===t.fsPath)if(i.unsavedEdits.length>0){let c="This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes.";oe.window.showWarningMessage(c,"Overwrite","Revert").then(u=>{u==="Overwrite"?oe.commands.executeCommand("workbench.action.files.save"):u==="Revert"&&oe.commands.executeCommand("workbench.action.files.revert")})}else Date.now()-i.lastSave<500||i.revert()})),a.push(s.onDidDelete(o=>{o.toString()===t.toString()&&oe.window.showWarningMessage("This file has been deleted! Saving now will create a new file on disk.","Overwrite","Close Editor").then(c=>{c==="Overwrite"?oe.commands.executeCommand("workbench.action.files.save"):c==="Close Editor"&&oe.commands.executeCommand("workbench.action.closeActiveEditor")})})),i.onDidDispose(()=>{oe.commands.executeCommand("setContext","hexEditor:openEditor",!1),yf(a)}),i}async resolveCustomEditor(t,r,n){this.webviews.add(t.uri,r),sn.currentWebview=r.webview,oe.commands.executeCommand("setContext","hexEditor:openEditor",!0),this._dataInspectorView.show({autoReveal:!0}),r.webview.options={enableScripts:!0},r.webview.html=this.getHtmlForWebview(r.webview),r.onDidChangeViewState(i=>{oe.commands.executeCommand("setContext","hexEditor:openEditor",i.webviewPanel.visible),i.webviewPanel.visible?(sn.currentWebview=i.webviewPanel.webview,this._dataInspectorView.show({autoReveal:!0,forceFocus:!0})):sn.currentWebview=void 0}),r.webview.onDidReceiveMessage(i=>this.onMessage(r,t,i)),r.webview.onDidReceiveMessage(i=>{i.type==="ready"&&this.postMessage(r,"init",{fileSize:t.filesize,editorFontSize:oe.workspace.getConfiguration("editor").get("fontSize"),baseAddress:t.baseAddress,html:t.documentData.length===t.filesize||t.unsavedEdits.length!=0?this.getBodyHTML():void 0})}),r.webview.onDidReceiveMessage(async i=>{i.type=="open-anyways"&&(await t.openAnyways(),this.postMessage(r,"init",{fileSize:t.filesize,editorFontSize:oe.workspace.getConfiguration("editor").get("fontSize"),baseAddress:t.baseAddress,html:this.getBodyHTML()}))})}saveCustomDocument(t,r){for(let n of this.webviews.get(t.uri))this.postMessage(n,"save",{});return t.save(r)}saveCustomDocumentAs(t,r,n){return t.saveAs(r,n)}revertCustomDocument(t,r){return t.revert(r)}backupCustomDocument(t,r,n){return t.backup(r.destination,n)}getHtmlForWebview(t){let r=t.asWebviewUri(oe.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),n=t.asWebviewUri(oe.Uri.joinPath(this._context.extensionUri,"dist","hexEdit.css")),i=t.asWebviewUri(oe.Uri.joinPath(this._context.extensionUri,"node_modules","@vscode","codicons","dist","codicon.css")),a=bc();return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${t.cspSource} blob:; font-src ${t.cspSource}; style-src ${t.cspSource}; script-src 'nonce-${a}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${n}" rel="stylesheet" />
				<link href="${i}" rel="stylesheet" />
				<script nonce="${a}" src="${r}" defer><\/script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}getBodyHTML(){return`
		<div class="column left">
			<div class="header" aria-hidden="true">00000000</div>
			<div class="rowwrapper" id="hexaddr">
			</div>
		</div>
		<div id="editor-container">
			<div class="column middle">
				<div class="header">
					<span>00</span><span>01</span><span>02</span><span>03</span><span>04</span><span>05</span><span>06</span><span>07</span><span>08</span><span>09</span><span>0A</span><span>0B</span><span>0C</span><span>0D</span><span>0E</span><span>0F</span>
				</div>
				<div class="rowwrapper" id="hexbody">
				</div>
			</div>
			<div class="column right">
				<div class="header">DECODED TEXT</div>
				<div class="rowwrapper" id="ascii">
				</div>
			</div>
			<div id="scrollbar">
				<div role="scrollbar" id="scroll-thumb">
				</div>
			</div>
		</div>
		<div id="search-container">
		</div>
		`}postMessageWithResponse(t,r,n){let i=this._requestId++,a=new Promise(s=>this._callbacks.set(i,s));return t.webview.postMessage({type:r,requestId:i,body:n}),a}postMessage(t,r,n){t.webview.postMessage({type:r,body:n})}async onMessage(t,r,n){switch(n.type){case"packet":let i=n.body,a=Array.from(r.documentData.slice(i.initialOffset,i.initialOffset+i.numElements)),s=[];r.unsavedEdits.flat().forEach(u=>{u.offset>=i.initialOffset&&u.offset<i.initialOffset+i.numElements&&(s.push(u),u.oldValue===void 0&&u.newValue!==void 0&&a.push(u.newValue))}),t.webview.postMessage({type:"packet",requestId:n.requestId,body:{fileSize:r.filesize,baseAddress:r.baseAddress,data:a,offset:i.initialOffset,edits:s}});return;case"edit":r.makeEdit(n.body),t.webview.postMessage({type:"edit",requestId:n.requestId,body:{fileSize:r.filesize,baseAddress:r.baseAddress}});return;case"search":if(n.body.cancel){r.searchProvider.cancelRequest();return}let o;n.body.type==="ascii"?o=await r.searchProvider.createNewRequest().textSearch(n.body.query,n.body.options):o=await r.searchProvider.createNewRequest().hexSearch(n.body.query),o!==void 0&&t.webview.postMessage({type:"search",requestId:n.requestId,body:{results:o}});return;case"replace":let c=r.replace(n.body.query,n.body.offsets,n.body.preserveCase);t.webview.postMessage({type:"replace",requestId:n.requestId,body:{edits:c}});return;case"dataInspector":this._dataInspectorView.handleEditorMessage(n.body)}}},Ai=sn;Ai.viewType="hexEditor.hexedit";var OS="ms-vscode.hexeditor",Ic;function vM(e){let t=hr.extensions.getExtension(e).packageJSON;return{version:t.version,aiKey:t.aiKey}}function gM(e){let t=new ja(e.extensionUri),r=vM(OS);e.subscriptions.push(hr.window.registerWebviewViewProvider(ja.viewType,t)),Ic=new CS.default(OS,r.version,r.aiKey);let n=hr.commands.registerTextEditorCommand("hexEditor.openFile",a=>{hr.commands.executeCommand("vscode.openWith",a.document.uri,"hexEditor.hexedit")}),i=hr.commands.registerCommand("hexEditor.goToOffset",async()=>{let a=await AS();a&&Ai.currentWebview&&Ai.currentWebview.postMessage({type:"goToOffset",body:{offset:a}})});e.subscriptions.push(i),e.subscriptions.push(n),e.subscriptions.push(Ic),e.subscriptions.push(Ai.register(e,Ic,t))}function mM(){Ic.dispose()}0&&(module.exports={activate,deactivate});
