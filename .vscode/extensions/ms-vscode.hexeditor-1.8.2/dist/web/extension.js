var Ss=Object.create;var Qr=Object.defineProperty;var Cs=Object.getOwnPropertyDescriptor;var Is=Object.getOwnPropertyNames;var ws=Object.getPrototypeOf,Ts=Object.prototype.hasOwnProperty;var wo=t=>Qr(t,"__esModule",{value:!0});var Es=(t,e)=>{wo(t);for(var r in e)Qr(t,r,{get:e[r],enumerable:!0})},bs=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Is(e))!Ts.call(t,n)&&n!=="default"&&Qr(t,n,{get:()=>e[n],enumerable:!(r=Cs(e,n))||r.enumerable});return t},Ut=t=>bs(wo(Qr(t!=null?Ss(ws(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);Es(exports,{activate:()=>Jc,deactivate:()=>Xc});var Lt=Ut(require("vscode"));var To={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5};var rt="function",Ue="object",ke="undefined",ve="prototype",Pr="hasOwnProperty";var nt=Object,ir=nt[ve],or=nt.assign,en=nt.create,tn=nt.defineProperty,Ot=ir[Pr];function Je(){return typeof globalThis!==ke&&globalThis?globalThis:typeof self!==ke&&self?self:typeof window!==ke&&window?window:typeof global!==ke&&global?global:null}function ar(t){throw new TypeError(t)}function Ht(t){var e=en;if(e)return e(t);if(t==null)return{};var r=typeof t;r!==Ue&&r!==rt&&ar("Object prototype may only be an Object:"+t);function n(){}return n[ve]=t,new n}var nu=(Je()||{}).Symbol,iu=(Je()||{}).Reflect;var Ps=function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)ir[Pr].call(e,i)&&(t[i]=e[i])}return t},lt=or||Ps,Vn=function(t,e){return Vn=nt.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[Pr](i)&&(r[i]=n[i])},Vn(t,e)};function O(t,e){typeof e!==rt&&e!==null&&ar("Class extends value "+String(e)+" is not a constructor or null"),Vn(t,e);function r(){this.constructor=t}t[ve]=e===null?Ht(e):(r[ve]=e[ve],new r)}var rn="constructor",gt="prototype",nn="function",on="_dynInstFuncs",Bn="_isDynProxy",sr="_dynClass",As="_dynCls$",qn="_dynInstChk",Ar=qn,Eo="_dfOpts",bo="_unknown_",ks="__proto__",Gn="useBaseInst",Do="setInstFuncs",an=Object,kr=an.getPrototypeOf,Po=0;function Tt(t,e){return t&&an[gt].hasOwnProperty.call(t,e)}function Ao(t){return t&&(t===an[gt]||t===Array[gt])}function Wn(t){return Ao(t)||t===Function[gt]}function zt(t){if(t){if(kr)return kr(t);var e=t[ks]||t[gt]||(t[rn]?t[rn][gt]:null);if(e)return e}return null}function sn(t,e){var r=[],n=an.getOwnPropertyNames;if(n)r=n(t);else for(var i in t)typeof i=="string"&&Tt(t,i)&&r.push(i);if(r&&r.length>0)for(var o=0;o<r.length;o++)e(r[o])}function Kn(t,e,r){return e!==rn&&typeof t[e]===nn&&(r||Tt(t,e))}function cn(t){throw new TypeError("DynamicProto: "+t)}function Ns(t){var e={};return sn(t,function(r){!e[r]&&Kn(t,r,!1)&&(e[r]=t[r])}),e}function Jn(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}function Fs(t,e,r,n){function i(a,u,l){var f=u[l];if(f[Bn]&&n){var m=a[on]||{};m[Ar]!==!1&&(f=(m[u[sr]]||{})[l]||f)}return function(){return f.apply(a,arguments)}}var o={};sn(r,function(a){o[a]=i(e,r,a)});for(var s=zt(t),c=[];s&&!Wn(s)&&!Jn(c,s);)sn(s,function(a){!o[a]&&Kn(s,a,!kr)&&(o[a]=i(e,s,a))}),c.push(s),s=zt(s);return o}function Rs(t,e,r,n){var i=null;if(t&&Tt(r,sr)){var o=t[on]||{};if(i=(o[r[sr]]||{})[e],i||cn("Missing ["+e+"] "+nn),!i[qn]&&o[Ar]!==!1){for(var s=!Tt(t,e),c=zt(t),a=[];s&&c&&!Wn(c)&&!Jn(a,c);){var u=c[e];if(u){s=u===n;break}a.push(c),c=zt(c)}try{s&&(t[e]=i),i[qn]=1}catch(l){o[Ar]=!1}}}return i}function Ms(t,e,r){var n=e[t];return n===r&&(n=zt(e)[t]),typeof n!==nn&&cn("["+t+"] is not a "+nn),n}function _s(t,e,r,n,i){function o(a,u){var l=function(){var f=Rs(this,u,a,l)||Ms(u,a,l);return f.apply(this,arguments)};return l[Bn]=1,l}if(!Ao(t)){var s=r[on]=r[on]||{},c=s[e]=s[e]||{};s[Ar]!==!1&&(s[Ar]=!!i),sn(r,function(a){Kn(r,a,!1)&&r[a]!==n[a]&&(c[a]=r[a],delete r[a],(!Tt(t,a)||t[a]&&!t[a][Bn])&&(t[a]=o(t,a)))})}}function Ls(t,e){if(kr)for(var r=[],n=zt(e);n&&!Wn(n)&&!Jn(r,n);){if(n===t)return!0;r.push(n),n=zt(n)}return!1}function Xn(t,e){return Tt(t,gt)?t.name||e||bo:((t||{})[rn]||{}).name||e||bo}function $n(t,e,r,n){Tt(t,gt)||cn("theClass is an invalid class definition.");var i=t[gt];Ls(i,e)||cn("["+Xn(t)+"] is not in class hierarchy of ["+Xn(e)+"]");var o=null;Tt(i,sr)?o=i[sr]:(o=As+Xn(t,"_")+"$"+Po,Po++,i[sr]=o);var s=$n[Eo],c=!!s[Gn];c&&n&&n[Gn]!==void 0&&(c=!!n[Gn]);var a=Ns(e),u=Fs(i,e,a,c);r(e,u);var l=!!kr&&!!s[Do];l&&n&&(l=!!n[Do]),_s(i,o,e,a,l!==!1)}var Us={setInstFuncs:!0,useBaseInst:!0};$n[Eo]=Us;var W=$n;var y;(function(t){t[t.CRITICAL=1]="CRITICAL",t[t.WARNING=2]="WARNING"})(y||(y={}));var h={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103};var ko="on",No="attachEvent",Fo="addEventListener",Ro="detachEvent",Mo="removeEventListener",_o=tn,Au=nt.freeze,ku=nt.seal;function Yn(t){return ir.toString.call(t)}function ue(t){return t===void 0||typeof t===ke}function S(t){return t===null||ue(t)}function Zn(t){return!S(t)}function Nr(t,e){return t&&Ot.call(t,e)}function it(t){return typeof t===Ue}function z(t){return typeof t===rt}function jt(t,e,r,n){n===void 0&&(n=!1);var i=!1;if(!S(t))try{S(t[Fo])?S(t[No])||(t[No](ko+e,r),i=!0):(t[Fo](e,r,n),i=!0)}catch(o){}return i}function un(t,e,r,n){if(n===void 0&&(n=!1),!S(t))try{S(t[Mo])?S(t[Ro])||t[Ro](ko+e,r):t[Mo](e,r,n)}catch(i){}}function Qn(t){var e=t,r=/([^\w\d_$])/g;return r.test(t)&&(e=t.replace(r,"_")),e}function Y(t,e){if(t)for(var r in t)Ot.call(t,r)&&e.call(t,r,t[r])}function ei(t,e){if(t&&e){var r=e.length,n=t.length;if(t===e)return!0;if(n>=r){for(var i=n-1,o=r-1;o>=0;o--){if(t[i]!=e[o])return!1;i--}return!0}}return!1}function ge(t,e){return t&&e?t.indexOf(e)!==-1:!1}function ln(t){return Yn(t)==="[object Date]"}function Ne(t){return Yn(t)==="[object Array]"}function cr(t){return Yn(t)==="[object Error]"}function L(t){return typeof t=="string"}function ur(t){return typeof t=="number"}function Fe(t){if(ln(t)){var e=function(r){var n=String(r);return n.length===1&&(n="0"+n),n};return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function R(t,e,r){for(var n=t.length,i=0;i<n&&!(i in t&&e.call(r||t,t[i],i,t)===-1);i++);}function Vt(t,e,r){for(var n=t.length,i=r||0,o=Math.max(i>=0?i:n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}function Bt(t,e,r){for(var n=t.length,i=r||t,o=new Array(n),s=0;s<n;s++)s in t&&(o[s]=e.call(i,t[s],t));return o}function fn(t,e,r){var n=t.length,i=0,o;if(arguments.length>=3)o=arguments[2];else{for(;i<n&&!(i in t);)i++;o=t[i++]}for(;i<n;)i in t&&(o=e(o,t[i],i,t)),i++;return o}function se(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")}var Os=!{toString:null}.propertyIsEnumerable("toString"),ti=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Xe(t){var e=typeof t;e!==rt&&(e!==Ue||t===null)&&ar("objKeys called on non-object");var r=[];for(var n in t)t&&Ot.call(t,n)&&r.push(n);if(Os)for(var i=ti.length,o=0;o<i;o++)t&&Ot.call(t,ti[o])&&r.push(ti[o]);return r}function Et(t,e,r,n){if(_o)try{var i={enumerable:!0,configurable:!0};return r&&(i.get=r),n&&(i.set=n),_o(t,e,i),!0}catch(o){}return!1}function he(){var t=Date;return t.now?t.now():new t().getTime()}function G(t){return cr(t)?t.name:""}function q(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}function le(t,e,r){var n;return t?(n=t[e],!n&&S(n)&&(n=ue(r)?{}:r,t[e]=n)):n=ue(r)?{}:r,n}function dn(t){return!t}function lr(t){return!!t}function Pe(t){throw new Error(t)}function ri(t,e,r){if(t&&e&&t!==e&&it(t)&&it(e)){var n=function(o){if(L(o)){var s=e[o];z(s)?(!r||r(o,!0,e,t))&&(t[o]=function(c){return function(){var a=arguments;return e[c].apply(e,a)}}(o)):(!r||r(o,!1,e,t))&&(Nr(t,o)&&delete t[o],Et(t,o,function(){return e[o]},function(c){e[o]=c})||(t[o]=s))}};for(var i in e)n(i)}return t}function ni(t){return function(){function e(){var r=this;t&&Y(t,function(n,i){r[n]=i})}return e}()}function pn(t){return t&&(t=nt(or?or({},t):t)),t}"use strict";var Lo="window",Hs="document",zs="navigator",js="history",Vs="location",Bs="console",qs="performance",Uo="JSON",Gs="crypto",Ws="msCrypto",Ks="ReactNative",ii="msie",oi="trident/",ai=null,si=null,Js=!1;function Ie(t){var e=Je();return e&&e[t]?e[t]:t===Lo&&qt()?window:null}function qt(){return Boolean(typeof window===Ue&&window)}function ft(){return qt()?window:Ie(Lo)}function mn(){return Boolean(typeof document===Ue&&document)}function we(){return mn()?document:Ie(Hs)}function Oo(){return Boolean(typeof navigator===Ue&&navigator)}function be(){return Oo()?navigator:Ie(zs)}function Ho(){return Boolean(typeof history===Ue&&history)}function ci(){return Ho()?history:Ie(js)}function He(t){if(t&&Js){var e=Ie("__mockLocation");if(e)return e}return typeof location===Ue&&location?location:Ie(Vs)}function ui(){return typeof console!==ke?console:Ie(Bs)}function ze(){return Ie(qs)}function ot(){return Boolean(typeof JSON===Ue&&JSON||Ie(Uo)!==null)}function xe(){return ot()?JSON||Ie(Uo):null}function li(){return Ie(Gs)}function fi(){return Ie(Ws)}function di(){var t=be();return t&&t.product?t.product===Ks:!1}function Gt(){var t=be();if(t&&(t.userAgent!==si||ai===null)){si=t.userAgent;var e=(si||"").toLowerCase();ai=ge(e,ii)||ge(e,oi)}return ai}function fr(t){if(t===void 0&&(t=null),!t){var e=be()||{};t=e?(e.userAgent||"").toLowerCase():""}var r=(t||"").toLowerCase();if(ge(r,ii))return parseInt(r.split(ii)[1]);if(ge(r,oi)){var n=parseInt(r.split(oi)[1]);if(n)return n+4}return null}function U(t){var e=Object[ve].toString.call(t),r="";return e==="[object Error]"?r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":ot()&&(r=xe().stringify(t)),e+r}"use strict";var Xs="AI (Internal): ",$s="AI: ",Ys="AITR_";function zo(t){return t?'"'+t.replace(/\"/g,"")+'"':""}var ht=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o.messageId=e,o.message=(n?$s:Xs)+e;var s="";ot()&&(s=xe().stringify(i));var c=(r?" message:"+zo(r):"")+(i?" props:"+zo(s):"");o.message+=c}return t.dataType="MessageData",t}();function xt(t,e){return(t||{}).logger||new vn(e)}var vn=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={};W(t,this,function(i){S(e)&&(e={}),i.consoleLoggingLevel=function(){return o("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return o("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return o("maxMessageLimit",25)},i.enableDebugExceptions=function(){return o("enableDebugExceptions",!1)},i.throwInternal=function(c,a,u,l,f){f===void 0&&(f=!1);var m=new ht(a,u,f,l);if(i.enableDebugExceptions())throw m;if(!ue(m.message)){var C=i.consoleLoggingLevel();if(f){var w=+m.messageId;!n[w]&&C>=y.WARNING&&(i.warnToConsole(m.message),n[w]=!0)}else C>=y.WARNING&&i.warnToConsole(m.message);i.logInternalMessage(c,m)}},i.warnToConsole=function(c){var a=ui();if(a){var u="log";a.warn&&(u="warn"),z(a[u])&&a[u](c)}},i.resetInternalMessageCount=function(){r=0,n={}},i.logInternalMessage=function(c,a){if(!s()){var u=!0,l=Ys+a.messageId;if(n[l]?u=!1:n[l]=!0,u&&(c<=i.telemetryLoggingLevel()&&(i.queue.push(a),r++),r===i.maxInternalMessageLimit())){var f="Internal events throttle limit per PageView reached for this app.",m=new ht(h.MessageLimitPerPVExceeded,f,!1);i.queue.push(m),i.warnToConsole(f)}}};function o(c,a){var u=e[c];return S(u)?a:u}function s(){return r>=i.maxInternalMessageLimit()}})}return t}();var dr="ctx",Fr=function(){function t(e,r,n){var i=this,o=!1;if(i.start=he(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},z(r)){var s;o=Et(i,"payload",function(){return!s&&z(r)&&(s=r(),r=null),s})}i.getCtx=function(c){return c?c===t.ParentContextKey||c===t.ChildrenContextKey?i[c]:(i[dr]||{})[c]:null},i.setCtx=function(c,a){if(c)if(c===t.ParentContextKey)i[c]||(i.isChildEvt=function(){return!0}),i[c]=a;else if(c===t.ChildrenContextKey)i[c]=a;else{var u=i[dr]=i[dr]||{};u[c]=a}},i.complete=function(){var c=0,a=i.getCtx(t.ChildrenContextKey);if(Ne(a))for(var u=0;u<a.length;u++){var l=a[u];l&&(c+=l.time)}i.time=he()-i.start,i.exTime=i.time-c,i.complete=function(){},!o&&z(r)&&(i.payload=r())}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}();var pi=function(){function t(e){this.ctx={},W(t,this,function(r){r.create=function(n,i,o){return new Fr(n,i,o)},r.fire=function(n){n&&(n.complete(),e&&e.perfEvent(n))},r.setCtx=function(n,i){if(n){var o=r[dr]=r[dr]||{};o[n]=i}},r.getCtx=function(n){return(r[dr]||{})[n]}})}return t}();var mi="CoreUtils.doPerf";function dt(t,e,r,n,i){if(t){var o=t;if(z(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var s=void 0,c=o.getCtx(mi);try{if(s=o.create(e(),n,i),s){if(c&&s.setCtx&&(s.setCtx(Fr.ParentContextKey,c),c.getCtx&&c.setCtx)){var a=c.getCtx(Fr.ChildrenContextKey);a||(a=[],c.setCtx(Fr.ChildrenContextKey,a)),a.push(s)}return o.setCtx(mi,s),r(s)}}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&o.fire(s),o.setCtx(mi,c)}}}return r()}"use strict";var jo=function(){function t(e,r){var n=this,i=null,o=z(e.processTelemetry),s=z(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(c){i=c},n.processTelemetry=function(c,a){a||(a=r);var u=e?e.identifier:"TelemetryPluginChain";dt(a?a.core():null,function(){return u+":processTelemetry"},function(){if(e&&o){n._hasRun=!0;try{a.setNext(i),s&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(c,a)}catch(f){var l=i&&i._hasRun;(!i||!l)&&a.diagLog().throwInternal(y.CRITICAL,h.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+f),i&&!l&&i.processTelemetry(c,a)}}else i&&(n._hasRun=!0,i.processTelemetry(c,a))},function(){return{item:c}},!c.sync)}}return t}();"use strict";function vi(t,e){var r=[];if(t&&t.length>0)for(var n=null,i=0;i<t.length;i++){var o=t[i];if(o&&z(o.processTelemetry)){var s=new jo(o,e);r.push(s),n&&n.setNext(s),n=s}}return r.length>0?r[0]:null}function Zs(t,e,r){var n=[],i=!r;if(t)for(;t;){var o=t.getPlugin();(i||o===r)&&(i=!0,n.push(o)),t=t.getNext()}return i||n.push(r),vi(n,e)}function Qs(t,e,r){var n=t,i=!1;return r&&t&&(n=[],R(t,function(o){(i||o===r)&&(i=!0,n.push(o))})),r&&!i&&(n||(n=[]),n.push(r)),vi(n,e)}var yt=function(){function t(e,r,n,i){var o=this,s=null;i!==null&&(e&&z(e.getPlugin)?s=Zs(e,o,i||e.getPlugin()):i?s=Qs(e,o,i):ue(i)&&(s=vi(e,o))),o.core=function(){return n},o.diagLog=function(){return xt(n,r)},o.getCfg=function(){return r},o.getExtCfg=function(c,a){a===void 0&&(a={});var u;if(r){var l=r.extensionConfig;l&&c&&(u=l[c])}return u||a},o.getConfig=function(c,a,u){u===void 0&&(u=!1);var l,f=o.getExtCfg(c,null);return f&&!S(f[a])?l=f[a]:r&&!S(r[a])&&(l=r[a]),S(l)?u:l},o.hasNext=function(){return s!=null},o.getNext=function(){return s},o.setNext=function(c){s=c},o.processNext=function(c){var a=s;a&&(s=a.getNext(),a.processTelemetry(c,o))},o.createNew=function(c,a){return c===void 0&&(c=null),new t(c||s,r,n,a)}}return t}();var Vo="iKey",gn="extensionConfig";"use strict";var hn="getPlugin",at=function(){function t(){var e=this,r=!1,n=null,i=null;e.core=null,e.diagLog=function(o){return e._getTelCtx(o).diagLog()},e.isInitialized=function(){return r},e.setInitialized=function(o){r=o},e.setNextPlugin=function(o){i=o},e.processNext=function(o,s){s?s.processNext(o):i&&z(i.processTelemetry)&&i.processTelemetry(o,null)},e._getTelCtx=function(o){o===void 0&&(o=null);var s=o;if(!s){var c=n||new yt(null,{},e.core);i&&i[hn]?s=c.createNew(null,i[hn]):s=c.createNew(null,i)}return s},e._baseTelInit=function(o,s,c,a){o&&q(o,gn,[],null,S),!a&&s&&(a=s.getProcessTelContext().getNext());var u=i;i&&i[hn]&&(u=i[hn]()),e.core=s,n=new yt(a,o,s,u),r=!0}}return t.prototype.initialize=function(e,r,n,i){this._baseTelInit(e,r,n,i)},t}();"use strict";var gi="processTelemetry",Bo="priority",qo="setNextPlugin",Go="isInitialized";function Rr(t,e){for(var r=[],n=null,i=t.getNext();i;){var o=i.getPlugin();o&&(n&&z(n[qo])&&z(o[gi])&&n[qo](o),(!z(o[Go])||!o[Go]())&&r.push(o),n=o,i=i.getNext())}R(r,function(s){s.initialize(t.getCfg(),t.core(),e,t.getNext())})}function hi(t){return t.sort(function(e,r){var n=0,i=z(r[gi]);return z(e[gi])?n=i?e[Bo]-r[Bo]:1:i&&(n=-1),n})}"use strict";var xi=500,ec="Channel has invalid priority",Wo=function(t){O(e,t);function e(){var r=t.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=xi;var n;W(e,r,function(c,a){c.setNextPlugin=function(u){},c.processTelemetry=function(u,l){n&&R(n,function(f){if(f.length>0){var m=r._getTelCtx(l).createNew(f);m.processNext(u)}})},c.getChannelControls=function(){return n},c.initialize=function(u,l,f){c.isInitialized()||(a.initialize(u,l,f),s((u||{}).channels,f),R(n,function(m){return Rr(new yt(m,u,l),f)}))}});function i(c){R(c,function(a){a.priority<xi&&Pe(ec+a.identifier)})}function o(c){c&&c.length>0&&(c=c.sort(function(a,u){return a.priority-u.priority}),i(c),n.push(c))}function s(c,a){if(n=[],c&&R(c,function(l){return o(l)}),a){var u=[];R(a,function(l){l.priority>xi&&u.push(l)}),o(u)}}return r}return e._staticInit=function(){var r=e.prototype;Et(r,"ChannelControls",r.getChannelControls),Et(r,"channelQueue",r.getChannelControls)}(),e}(at);var Ko="toGMTString",Jo="toUTCString",yi="cookie",Si="expires",Ci="enabled",Xo="isCookieUseDisabled",$o="disableCookiesUsage",bt="_ckMgr",st="",xn=null,Ii=null,Yo=null,Mr=we(),Zo={},yn={};function tc(t,e){var r=Kt[bt]||yn[bt];return r||(r=Kt[bt]=Kt(t,e),yn[bt]=r),r}function Sn(t){return t?t.isEnabled():!0}function rc(t){var e=t.cookieCfg=t.cookieCfg||{};if(q(e,"domain",t.cookieDomain,Zn,S),q(e,"path",t.cookiePath||"/",null,S),S(e[Ci])){var r=void 0;ue(t[Xo])||(r=!t[Xo]),ue(t[$o])||(r=!t[$o]),e[Ci]=r}return e}function Wt(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n[bt]?r=n[bt]:r=Kt(e)}return r||(r=tc(e,(t||{}).logger)),r}function Kt(t,e){var r=rc(t||yn),n=r.path||"/",i=r.domain,o=r[Ci]!==!1,s={isEnabled:function(){var c=o&&wi(e),a=yn[bt];return c&&a&&s!==a&&(c=Sn(a)),c},setEnabled:function(c){o=c!==!1},set:function(c,a,u,l,f){if(Sn(s)){var m={},C=se(a||st),w=C.indexOf(";");if(w!==-1&&(C=se(a.substring(0,w)),m=Qo(a.substring(w+1))),q(m,"domain",l||i,lr,ue),!S(u)){var b=Gt();if(ue(m[Si])){var d=he(),g=d+u*1e3;if(g>0){var x=new Date;x.setTime(g),q(m,Si,ea(x,b?Ko:Jo)||ea(x,b?Ko:Jo)||st,lr)}}b||q(m,"max-age",st+u,null,ue)}var T=He();T&&T.protocol==="https:"&&(q(m,"secure",null,null,ue),Ii===null&&(Ii=!Ti((be()||{}).userAgent)),Ii&&q(m,"SameSite","None",null,ue)),q(m,"path",f||n,null,ue);var M=r.setCookie||ra;M(c,ta(C,m))}},get:function(c){var a=st;return Sn(s)&&(a=(r.getCookie||nc)(c)),a},del:function(c,a){Sn(s)&&s.purge(c,a)},purge:function(c,a){if(wi(e)){var u=(f={},f.path=a||"/",f[Si]="Thu, 01 Jan 1970 00:00:01 GMT",f);Gt()||(u["max-age"]="0");var l=r.delCookie||ra;l(c,ta(st,u))}var f}};return s[bt]=s,s}function wi(t){if(xn===null){xn=!1;try{var e=Mr||{};xn=e[yi]!==void 0}catch(r){t&&t.throwInternal(y.WARNING,h.CannotAccessCookie,"Cannot access document.cookie - "+G(r),{exception:U(r)})}}return xn}function Qo(t){var e={};if(t&&t.length){var r=se(t).split(";");R(r,function(n){if(n=se(n||st),n){var i=n.indexOf("=");i===-1?e[n]=null:e[se(n.substring(0,i))]=se(n.substring(i+1))}})}return e}function ea(t,e){return z(t[e])?t[e]():null}function ta(t,e){var r=t||st;return Y(e,function(n,i){r+="; "+n+(S(i)?st:"="+i)}),r}function nc(t){var e=st;if(Mr){var r=Mr[yi]||st;Yo!==r&&(Zo=Qo(r),Yo=r),e=se(Zo[t]||st)}return e}function ra(t,e){Mr&&(Mr[yi]=t+"="+e)}function Ti(t){return L(t)?!!(ge(t,"CPU iPhone OS 12")||ge(t,"iPad; CPU OS 12")||ge(t,"Macintosh; Intel Mac OS X 10_14")&&ge(t,"Version/")&&ge(t,"Safari")||ge(t,"Macintosh; Intel Mac OS X 10_14")&&ei(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||ge(t,"Chrome/5")||ge(t,"Chrome/6")||ge(t,"UnrealEngine")&&!ge(t,"Chrome")||ge(t,"UCBrowser/12")||ge(t,"UCBrowser/11")):!1}"use strict";var ic="Extensions must provide callback to initialize",na="_notificationManager",ia=function(){function t(){var e=!1,r,n,i,o,s;W(t,this,function(c){c._extensions=new Array,n=new Wo,c.logger=Ht({throwInternal:function(a,u,l,f,m){m===void 0&&(m=!1)},warnToConsole:function(a){},resetInternalMessageCount:function(){}}),r=[],c.isInitialized=function(){return e},c.initialize=function(a,u,l,f){c.isInitialized()&&Pe("Core should not be initialized more than once"),(!a||S(a.instrumentationKey))&&Pe("Please provide instrumentation key"),i=f,c[na]=f,c.config=a||{},a.extensions=S(a.extensions)?[]:a.extensions;var m=le(a,gn);m.NotificationManager=f,l&&(c.logger=l);var C=[];C.push.apply(C,u.concat(a.extensions)),C=hi(C);var w=[],b=[],d={};R(C,function(g){(S(g)||S(g.initialize))&&Pe(ic);var x=g.priority,T=g.identifier;g&&x&&(S(d[x])?d[x]=T:l.warnToConsole("Two extensions have same priority #"+x+" - "+d[x]+", "+T)),!x||x<n.priority?w.push(g):b.push(g)}),C.push(n),w.push(n),C=hi(C),c._extensions=C,Rr(new yt([n],a,c),C),Rr(new yt(w,a,c),C),c._extensions=w,c.getTransmissionControls().length===0&&Pe("No channels available"),e=!0,c.releaseQueue()},c.getTransmissionControls=function(){return n.getChannelControls()},c.track=function(a){q(a,Vo,c.config.instrumentationKey,null,dn),q(a,"time",Fe(new Date),null,dn),q(a,"ver","4.0",null,S),c.isInitialized()?c.getProcessTelContext().processNext(a):r.push(a)},c.getProcessTelContext=function(){var a=c._extensions,u=a;return(!a||a.length===0)&&(u=[n]),new yt(u,c.config,c)},c.getNotifyMgr=function(){return i||(i=Ht({addNotificationListener:function(a){},removeNotificationListener:function(a){},eventsSent:function(a){},eventsDiscarded:function(a,u){},eventsSendRequest:function(a,u){}}),c[na]=i),i},c.getCookieMgr=function(){return s||(s=Kt(c.config,c.logger)),s},c.setCookieMgr=function(a){s=a},c.getPerfMgr=function(){return o||c.config&&c.config.enablePerfMgr&&(o=new pi(c.getNotifyMgr())),o},c.setPerfMgr=function(a){o=a},c.eventCnt=function(){return r.length},c.releaseQueue=function(){r.length>0&&(R(r,function(a){c.getProcessTelContext().processNext(a)}),r=[])}})}return t}();var oa=function(){function t(e){this.listeners=[];var r=!!(e||{}).perfEvtsSendAll;W(t,this,function(n){n.addNotificationListener=function(i){n.listeners.push(i)},n.removeNotificationListener=function(i){for(var o=Vt(n.listeners,i);o>-1;)n.listeners.splice(o,1),o=Vt(n.listeners,i)},n.eventsSent=function(i){R(n.listeners,function(o){o&&o.eventsSent&&setTimeout(function(){return o.eventsSent(i)},0)})},n.eventsDiscarded=function(i,o){R(n.listeners,function(s){s&&s.eventsDiscarded&&setTimeout(function(){return s.eventsDiscarded(i,o)},0)})},n.eventsSendRequest=function(i,o){R(n.listeners,function(s){if(s&&s.eventsSendRequest)if(o)setTimeout(function(){return s.eventsSendRequest(i,o)},0);else try{s.eventsSendRequest(i,o)}catch(c){}})},n.perfEvent=function(i){i&&(r||!i.isChildEvt())&&R(n.listeners,function(o){if(o&&o.perfEvent)if(i.isAsync)setTimeout(function(){return o.perfEvent(i)},0);else try{o.perfEvent(i)}catch(s){}})}})}return t}();var Ei=function(t){O(e,t);function e(){var r=t.call(this)||this;return W(e,r,function(n,i){n.initialize=function(c,a,u,l){i.initialize(c,a,u||new vn(c),l||new oa(c))},n.track=function(c){dt(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){c===null&&(s(c),Pe("Invalid telemetry item")),o(c),i.track(c)},function(){return{item:c}},!c.sync)},n.addNotificationListener=function(c){var a=n.getNotifyMgr();a&&a.addNotificationListener(c)},n.removeNotificationListener=function(c){var a=n.getNotifyMgr();a&&a.removeNotificationListener(c)},n.pollInternalLogs=function(c){var a=n.config.diagnosticLogInterval;return(!a||!(a>0))&&(a=1e4),setInterval(function(){var u=n.logger?n.logger.queue:[];R(u,function(l){var f={name:c||"InternalMessageId: "+l.messageId,iKey:n.config.instrumentationKey,time:Fe(new Date),baseType:ht.dataType,baseData:{message:l.message}};n.track(f)}),u.length=0},a)};function o(c){if(S(c.name))throw s(c),Error("telemetry name required")}function s(c){var a=n.getNotifyMgr();a&&a.eventsDiscarded([c],To.InvalidEvent)}}),r}return e}(ia);var aa=4294967296,Jt=4294967295,sa=!1,_r=123456789,Lr=987654321;function oc(t){t<0&&(t>>>=0),_r=123456789+t&Jt,Lr=987654321-t&Jt,sa=!0}function ac(){try{var t=he()&2147483647;oc((Math.random()*aa^t)+t)}catch(e){}}function pr(t){var e,r=li()||fi();return r&&r.getRandomValues?e=r.getRandomValues(new Uint32Array(1))[0]&Jt:Gt()?(sa||ac(),e=ca()&Jt):e=Math.floor(aa*Math.random()|0),t||(e>>>=0),e}function ca(t){Lr=36969*(Lr&65535)+(Lr>>16)&Jt,_r=18e3*(_r&65535)+(_r>>16)&Jt;var e=(Lr<<16)+(_r&65535)>>>0&Jt|0;return t||(e>>>=0),e}"use strict";function Dt(t,e){var r=!1,n=ft();n&&(r=jt(n,t,e),r=jt(n.body,t,e)||r);var i=we();return i&&(r=Pt.Attach(i,t,e)||r),r}function mr(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=pr()>>>0,n=0,i="";i.length<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(pr()<<2&4294967295|r&3)>>>0,n=0);return i}function Oe(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e="",r,n=0;n<4;n++)r=pr(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(pr()&3)|0];return e.substr(0,8)+e.substr(9,4)+"4"+e.substr(13,3)+i+e.substr(16,3)+e.substr(19,12)}var Pt={Attach:jt,AttachEvent:jt,Detach:un,DetachEvent:un};var ua="_aiHooks",la=["req","rsp","hkErr","fnErr"],uc="__proto__",lc="constructor";function bi(t,e){if(t)for(var r=0;r<t.length&&!e(t[r],r);r++);}function Di(t,e,r,n,i){i>=0&&i<=2&&bi(t,function(o,s){var c=o.cbks,a=c[la[i]];if(a){e.ctx=function(){var f=n[s]=n[s]||{};return f};try{a.apply(e.inst,r)}catch(f){var u=e.err;try{var l=c[la[2]];l&&(e.err=f,l.apply(e.inst,r))}catch(m){}finally{e.err=u}}}})}function fc(t){return function(){var e=this,r=arguments,n=t.h,i={name:t.n,inst:e,ctx:null,set:a},o=[],s=c([i],r);function c(l,f){return bi(f,function(m){l.push(m)}),l}function a(l,f){r=c([],r),r[l]=f,s=c([i],r)}Di(n,i,s,o,0);var u=t.f;try{i.rslt=u.apply(e,r)}catch(l){throw i.err=l,Di(n,i,s,o,3),l}return Di(n,i,s,o,1),i.rslt}}var fa=Object.getPrototypeOf;function dc(t){if(t){if(fa)return fa(t);var e=t[uc]||t[ve]||t[lc];if(e)return e}return null}function da(t,e,r){var n=null;return t&&(Nr(t,e)?n=t:r&&(n=da(dc(t),e,!1))),n}function Pi(t,e,r){return t?Ur(t[ve],e,r,!1):null}function Ur(t,e,r,n){if(n===void 0&&(n=!0),t&&e&&r){var i=da(t,e,n);if(i){var o=i[e];if(typeof o===rt){var s=o[ua];if(!s){s={i:0,n:e,f:o,h:[]};var c=fc(s);c[ua]=s,i[e]=c}var a={id:s.i,cbks:r,rm:function(){var u=this.id;bi(s.h,function(l,f){if(l.id===u)return s.h.splice(f,1),1})}};return s.i++,s.h.push(a),a}}}return null}var Z={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"};function Ai(t,e,r){var n=e.length,i=pa(t,e);if(i.length!==n){for(var o=0,s=i;r[s]!==void 0;)o++,s=i.substring(0,150-3)+ma(o);i=s}return i}function pa(t,e){var r;return e&&(e=se(e.toString()),e.length>150&&(r=e.substring(0,150),t.throwInternal(y.WARNING,h.NameTooLong,"name is too long.  It has been truncated to "+150+" characters.",{name:e},!0))),r||e}function te(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=se(e),e.toString().length>r&&(n=e.toString().substring(0,r),t.throwInternal(y.WARNING,h.StringValueTooLong,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}function St(t,e){return Fi(t,e,2048,h.UrlTooLong)}function Or(t,e){var r;return e&&e.length>32768&&(r=e.substring(0,32768),t.throwInternal(y.WARNING,h.MessageTruncated,"message is too long, it has been truncated to "+32768+" characters.",{message:e},!0)),r||e}function ki(t,e){var r;if(e){var n=""+e;n.length>32768&&(r=n.substring(0,32768),t.throwInternal(y.WARNING,h.ExceptionTruncated,"exception is too long, it has been truncated to "+32768+" characters.",{exception:e},!0))}return r||e}function Re(t,e){if(e){var r={};Y(e,function(n,i){if(it(i)&&ot())try{i=xe().stringify(i)}catch(o){t.throwInternal(y.WARNING,h.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:o},!0)}i=te(t,i,8192),n=Ai(t,n,r),r[n]=i}),e=r}return e}function Me(t,e){if(e){var r={};Y(e,function(n,i){n=Ai(t,n,r),r[n]=i}),e=r}return e}function Ni(t,e){return e&&Fi(t,e,128,h.IdTooLong).toString()}function Fi(t,e,r,n){var i;return e&&(e=se(e),e.length>r&&(i=e.substring(0,r),t.throwInternal(y.WARNING,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}function ma(t){var e="00"+t;return e.substr(e.length-3)}function Xt(t){var e=null;if(z(Event))e=new Event(t);else{var r=we();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}function $e(t,e){return e===void 0&&(e=!1),t==null?e:t.toString().toLowerCase()==="true"}function je(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=""+t%1e3,r=""+Math.floor(t/1e3)%60,n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e.length===1?"00"+e:e.length===2?"0"+e:e,r=r.length<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,(o>0?o+".":"")+i+":"+n+":"+r+"."+e}function Cn(){var t=be();return"sendBeacon"in t&&t.sendBeacon}function Ri(t,e){var r=null;return R(t,function(n){if(n.identifier===e)return r=n,-1}),r}function Mi(t,e,r,n,i){return!i&&L(t)&&(t==="Script error."||t==="Script error")}var Ct="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",vr="sampleRate",gr="ProcessLegacy",Hr="http.method",In="https://dc.services.visualstudio.com",fe="not_specified";var At;(function(t){t[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage"})(At||(At={}));var Ye;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C",t[t.W3C=2]="W3C"})(Ye||(Ye={}));var $t=void 0,Yt=void 0;function _i(){return Tn()?wn(At.LocalStorage):null}function wn(t){try{if(S(Je()))return null;var e=new Date,r=Ie(t===At.LocalStorage?"localStorage":"sessionStorage");r.setItem(e.toString(),e.toString());var n=r.getItem(e.toString())!==e.toString();if(r.removeItem(e.toString()),!n)return r}catch(i){}return null}function Li(){return Zt()?wn(At.SessionStorage):null}function Ui(){$t=!1,Yt=!1}function Tn(){return $t===void 0&&($t=!!wn(At.LocalStorage)),$t}function Oi(t,e){var r=_i();if(r!==null)try{return r.getItem(e)}catch(n){$t=!1,t.throwInternal(y.WARNING,h.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+G(n),{exception:U(n)})}return null}function Hi(t,e,r){var n=_i();if(n!==null)try{return n.setItem(e,r),!0}catch(i){$t=!1,t.throwInternal(y.WARNING,h.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+G(i),{exception:U(i)})}return!1}function zi(t,e){var r=_i();if(r!==null)try{return r.removeItem(e),!0}catch(n){$t=!1,t.throwInternal(y.WARNING,h.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+G(n),{exception:U(n)})}return!1}function Zt(){return Yt===void 0&&(Yt=!!wn(At.SessionStorage)),Yt}function hr(t,e){var r=Li();if(r!==null)try{return r.getItem(e)}catch(n){Yt=!1,t.throwInternal(y.WARNING,h.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+G(n),{exception:U(n)})}return null}function xr(t,e,r){var n=Li();if(n!==null)try{return n.setItem(e,r),!0}catch(i){Yt=!1,t.throwInternal(y.WARNING,h.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+G(i),{exception:U(i)})}return!1}function ji(t,e){var r=Li();if(r!==null)try{return r.removeItem(e),!0}catch(n){Yt=!1,t.throwInternal(y.WARNING,h.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+G(n),{exception:U(n)})}return!1}var va=we()||{},ga=0,xc=[null,null,null,null,null];function zr(t){var e=ga,r=xc,n=r[e];return va.createElement?r[e]||(n=r[e]=va.createElement("a")):n={host:Vi(t,!0)},n.href=t,e++,e>=r.length&&(e=0),ga=e,n}function En(t){var e,r=zr(t);return r&&(e=r.href),e}function bn(t,e){return t?t.toUpperCase()+" "+e:e}function Vi(t,e){var r=Dn(t,e)||"";if(r){var n=r.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(n!=null&&n.length>3&&L(n[2])&&n[2].length>0)return n[2]+(n[3]||"")}return r}function Dn(t,e){var r=null;if(t){var n=t.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(n!=null&&n.length>2&&L(n[2])&&n[2].length>0&&(r=n[2]||"",e&&n.length>2)){var i=(n[1]||"").toLowerCase(),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}var Sc=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"];function jr(t){return Sc.indexOf(t.toLowerCase())!==-1}var It={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t.correlationHeaderExcludePatterns){for(var n=0;n<t.correlationHeaderExcludePatterns.length;n++)if(t.correlationHeaderExcludePatterns[n].test(e))return!1}var i=zr(e).host.toLowerCase();if(i&&(i.indexOf(":443")!==-1||i.indexOf(":80")!==-1)&&(i=(Dn(e,!0)||"").toLowerCase()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var s;if(R(o,function(u){var l=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||l.test(i)}),!s)return!1}var c=t&&t.correlationHeaderExcludedDomains;if(!c||c.length===0)return!0;for(var n=0;n<c.length;n++){var a=new RegExp(c[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(a.test(i))return!1}return i&&i.length>0},getCorrelationContext:function(t){if(t){var e=It.getCorrelationContextValue(t,Z.requestContextTargetKey);if(e&&e!==It.correlationIdPrefix)return e}},getCorrelationContextValue:function(t,e){if(t)for(var r=t.split(","),n=0;n<r.length;++n){var i=r[n].split("=");if(i.length===2&&i[0]===e)return i[1]}}};function ha(t,e,r,n){var i,o=n,s=n;if(e&&e.length>0){var c=zr(e);if(i=c.host,!o)if(c.pathname!=null){var a=c.pathname.length===0?"/":c.pathname;a.charAt(0)!=="/"&&(a="/"+a),s=c.pathname,o=te(t,r?r+" "+a:a)}else o=te(t,e)}else i=n,o=n;return{target:i,name:o,data:s}}function yr(){var t=ze();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return he()}function ye(t,e){var r=null;return t!==0&&e!==0&&!S(t)&&!S(e)&&(r=e-t),r}var Cc=";",Ic="=";function Bi(t){if(!t)return{};var e=t.split(Cc),r=fn(e,function(i,o){var s=o.split(Ic);if(s.length===2){var c=s[0].toLowerCase(),a=s[1];i[c]=a}return i},{});if(Xe(r).length>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+n+"dc."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||In}return r}var qi=function(){function t(){}return t}();var Gi=function(t){O(e,t);function e(){return t.call(this)||this}return e}(qi);var xa=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();var Pn=function(t){O(e,t);function e(r,n,i){var o=t.call(this)||this;return o.name=te(r,i)||fe,o.data=n,o.time=Fe(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1},o}return e}(xa);var An=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return t}();var Ve=function(t){O(e,t);function e(r,n,i,o){var s=t.call(this)||this;return s.aiDataContract={ver:1,name:1,properties:0,measurements:0},s.name=te(r,n)||fe,s.properties=Re(r,i),s.measurements=Me(r,o),s}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(An);var ya=function(){function t(){}return t}();var Sa=function(){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}return t}();var Ca=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();var wc="<no_method>",Sr="error",Ze="stack",Wi="stackDetails",Ia="errorSrc",Ki="message",wa="description";function Ji(t,e){var r=t;return r&&!L(r)&&(JSON&&JSON.stringify?(r=JSON.stringify(t),e&&(!r||r==="{}")&&(z(t.toString)?r=t.toString():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}function Ta(t,e){var r=t;return t&&(r=t[Ki]||t[wa]||"",r&&!L(r)&&(r=Ji(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&(r||"").indexOf(e)===-1&&(r=e+": "+r),r||""}function Tc(t){return it(t)?"hasFullStack"in t&&"typeName"in t:!1}function Ec(t){return it(t)?"ver"in t&&"exceptions"in t&&"properties"in t:!1}function Ea(t){return t&&t.src&&L(t.src)&&t.obj&&Ne(t.obj)}function Cr(t){var e=t||"";L(e)||(L(e[Ze])?e=e[Ze]:e=""+e);var r=e.split(`
`);return{src:e,obj:r}}function bc(t){for(var e=[],r=t.split(`
`),n=0;n<r.length;n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e.push(i)}return{src:t,obj:e}}function ba(t){var e=null;if(t)try{if(t[Ze])e=Cr(t[Ze]);else if(t[Sr]&&t[Sr][Ze])e=Cr(t[Sr][Ze]);else if(t.exception&&t.exception[Ze])e=Cr(t.exception[Ze]);else if(Ea(t))e=t;else if(Ea(t[Wi]))e=t[Wi];else if(window.opera&&t[Ki])e=bc(t.message);else if(L(t))e=Cr(t);else{var r=t[Ki]||t[wa]||"";L(t[Ia])&&(r&&(r+=`
`),r+=" from "+t[Ia]),r&&(e=Cr(r))}}catch(n){e=Cr(n)}return e||{src:"",obj:null}}function Dc(t){var e="";return t&&(t.obj?R(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}function Pc(t){var e,r=t.obj;if(r&&r.length>0){e=[];var n=0,i=0;R(r,function(w){var b=w.toString();if($i.regex.test(b)){var d=new $i(b,n++);i+=d.sizeInBytes,e.push(d)}});var o=32*1024;if(i>o)for(var s=0,c=e.length-1,a=0,u=s,l=c;s<c;){var f=e[s].sizeInBytes,m=e[c].sizeInBytes;if(a+=f+m,a>o){var C=l-u+1;e.splice(u,C);break}u=s,l=c,s++,c--}}return e}function kn(t){var e="";if(t&&(e=t.typeName||t.name||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor.toString());e=n&&n.length>1?n[1]:""}catch(i){}return e}function Xi(t){if(t)try{if(!L(t)){var e=kn(t),r=Ji(t,!1);return(!r||r==="{}")&&(t[Sr]&&(t=t[Sr],e=kn(t)),r=Ji(t,!0)),r.indexOf(e)!==0&&e!=="String"?e+":"+r:r}}catch(n){}return""+(t||"")}var De=function(t){O(e,t);function e(r,n,i,o,s,c){var a=t.call(this)||this;return a.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},Ec(n)?(a.exceptions=n.exceptions,a.properties=n.properties,a.measurements=n.measurements,n.severityLevel&&(a.severityLevel=n.severityLevel),n.id&&(a.id=n.id),n.problemGroup&&(a.problemGroup=n.problemGroup),a.ver=2,S(n.isManual)||(a.isManual=n.isManual)):(i||(i={}),a.exceptions=[new Da(r,n,i)],a.properties=Re(r,i),a.measurements=Me(r,o),s&&(a.severityLevel=s),c&&(a.id=c)),a}return e.CreateAutoException=function(r,n,i,o,s,c,a,u){var l=kn(s||c||r);return{message:Ta(r,l),url:n,lineNumber:i,columnNumber:o,error:Xi(s||c||r),evt:Xi(c||r),typeName:l,stackDetails:ba(a||s||c),errorSrc:u}},e.CreateFromInterface=function(r,n,i,o){var s=n.exceptions&&Bt(n.exceptions,function(a){return Da.CreateFromInterface(r,a)}),c=new e(r,lt({},n,{exceptions:s}),i,o);return c},e.prototype.toInterface=function(){var r=this,n=r.exceptions,i=r.properties,o=r.measurements,s=r.severityLevel,c=r.ver,a=r.problemGroup,u=r.id,l=r.isManual,f=n instanceof Array&&Bt(n,function(m){return m.toInterface()})||void 0;return{ver:"4.0",exceptions:f,severityLevel:s,properties:i,measurements:o,problemGroup:a,id:u,isManual:l}},e.CreateSimpleException=function(r,n,i,o,s,c){return{exceptions:[{hasFullStack:!0,message:r,stack:s,typeName:n}]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=Xi,e}(Sa);var Da=function(t){O(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},Tc(n))o.typeName=n.typeName,o.message=n.message,o[Ze]=n[Ze],o.parsedStack=n.parsedStack,o.hasFullStack=n.hasFullStack;else{var s=n,c=s&&s.evt;cr(s)||(s=s[Sr]||c||s),o.typeName=te(r,kn(s))||fe,o.message=Or(r,Ta(n||s,o.typeName))||fe;var a=n[Wi]||ba(n);o.parsedStack=Pc(a),o[Ze]=ki(r,Dc(a)),o.hasFullStack=Ne(o.parsedStack)&&o.parsedStack.length>0,i&&(i.typeName=i.typeName||o.typeName)}return o}return e.prototype.toInterface=function(){var r=this.parsedStack instanceof Array&&Bt(this.parsedStack,function(i){return i.toInterface()}),n={id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[Ze],parsedStack:r||void 0};return n},e.CreateFromInterface=function(r,n){var i=n.parsedStack instanceof Array&&Bt(n.parsedStack,function(s){return $i.CreateFromInterface(s)})||n.parsedStack,o=new e(r,lt({},n,{parsedStack:i}));return o},e}(Ca);var $i=function(t){O(e,t);function e(r,n){var i=t.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},typeof r=="string"){var o=r;i.level=n,i.method=wc,i.assembly=se(o),i.fileName="",i.line=0;var s=o.match(e.regex);s&&s.length>=5&&(i.method=se(s[2])||i.method,i.fileName=se(s[4]),i.line=parseInt(s[5])||0)}else i.level=r.level,i.method=r.method,i.assembly=r.assembly,i.fileName=r.fileName,i.line=r.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=e.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return e.CreateFromInterface=function(r){return new e(r,null)},e.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(ya);var Pa=function(){function t(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}return t}();var Nn;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(Nn||(Nn={}));var Aa=function(){function t(){this.kind=Nn.Measurement}return t}();var ka=function(t){O(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},r}return e}(Aa);var Be=function(t){O(e,t);function e(r,n,i,o,s,c,a,u){var l=t.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var f=new ka;return f.count=o>0?o:void 0,f.max=isNaN(c)||c===null?void 0:c,f.min=isNaN(s)||s===null?void 0:s,f.name=te(r,n)||fe,f.value=i,l.metrics=[f],l.properties=Re(r,a),l.measurements=Me(r,u),l}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(Pa);var Vr=function(t){O(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(An);var _e=function(t){O(e,t);function e(r,n,i,o,s,c,a){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},u.id=Ni(r,a),u.url=St(r,i),u.name=te(r,n)||fe,isNaN(o)||(u.duration=je(o)),u.properties=Re(r,s),u.measurements=Me(r,c),u}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(Vr);var Na=function(){function t(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}return t}();var qe=function(t){O(e,t);function e(r,n,i,o,s,c,a,u,l,f,m,C){l===void 0&&(l="Ajax");var w=t.call(this)||this;w.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},w.id=n,w.duration=je(s),w.success=c,w.resultCode=a+"",w.type=te(r,l);var b=ha(r,i,u,o);return w.data=St(r,o)||b.data,w.target=te(r,b.target),f&&(w.target=w.target+" | "+f),w.name=te(r,b.name),w.properties=Re(r,m),w.measurements=Me(r,C),w}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(Na);var Fa=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return t}();var ct=function(t){O(e,t);function e(r,n,i,o,s){var c=t.call(this)||this;return c.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||fe,c.message=Or(r,n),c.properties=Re(r,o),c.measurements=Me(r,s),i&&(c.severityLevel=i),c}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(Fa);var Ra=function(t){O(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Vr);var ut=function(t){O(e,t);function e(r,n,i,o,s,c,a){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},u.url=St(r,i),u.name=te(r,n)||fe,u.properties=Re(r,s),u.measurements=Me(r,c),a&&(u.domProcessing=a.domProcessing,u.duration=a.duration,u.networkConnect=a.networkConnect,u.perfTotal=a.perfTotal,u.receivedResponse=a.receivedResponse,u.sentRequest=a.sentRequest),u}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(Ra);var pt=function(t){O(e,t);function e(r,n){var i=t.call(this)||this;return i.aiDataContract={baseType:1,baseData:1},i.baseType=r,i.baseData=n,i}return e}(Gi);var Ir;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Ir||(Ir={}));function kt(t){var e="ai."+t+".";return function(r){return e+r}}var Br=kt("application"),Se=kt("device"),Fn=kt("location"),wr=kt("operation"),Yi=kt("session"),Nt=kt("user"),Qt=kt("cloud"),qr=kt("internal"),Tr=function(t){O(e,t);function e(){return t.call(this)||this}return e}(ni({applicationVersion:Br("ver"),applicationBuild:Br("build"),applicationTypeId:Br("typeId"),applicationId:Br("applicationId"),applicationLayer:Br("layer"),deviceId:Se("id"),deviceIp:Se("ip"),deviceLanguage:Se("language"),deviceLocale:Se("locale"),deviceModel:Se("model"),deviceFriendlyName:Se("friendlyName"),deviceNetwork:Se("network"),deviceNetworkName:Se("networkName"),deviceOEMName:Se("oemName"),deviceOS:Se("os"),deviceOSVersion:Se("osVersion"),deviceRoleInstance:Se("roleInstance"),deviceRoleName:Se("roleName"),deviceScreenResolution:Se("screenResolution"),deviceType:Se("type"),deviceMachineName:Se("machineName"),deviceVMName:Se("vmName"),deviceBrowser:Se("browser"),deviceBrowserVersion:Se("browserVersion"),locationIp:Fn("ip"),locationCountry:Fn("country"),locationProvince:Fn("province"),locationCity:Fn("city"),operationId:wr("id"),operationName:wr("name"),operationParentId:wr("parentId"),operationRootId:wr("rootId"),operationSyntheticSource:wr("syntheticSource"),operationCorrelationVector:wr("correlationVector"),sessionId:Yi("id"),sessionIsFirst:Yi("isFirst"),sessionIsNew:Yi("isNew"),userAccountAcquisitionDate:Nt("accountAcquisitionDate"),userAccountId:Nt("accountId"),userAgent:Nt("userAgent"),userId:Nt("id"),userStoreRegion:Nt("storeRegion"),userAuthUserId:Nt("authUserId"),userAnonymousUserAcquisitionDate:Nt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Nt("authUserAcquisitionDate"),cloudName:Qt("name"),cloudRole:Qt("role"),cloudRoleVer:Qt("roleVer"),cloudRoleInstance:Qt("roleInstance"),cloudEnvironment:Qt("environment"),cloudLocation:Qt("location"),cloudDeploymentUnit:Qt("deploymentUnit"),internalNodeName:qr("nodeName"),internalSdkVersion:qr("sdkVersion"),internalAgentVersion:qr("agentVersion"),internalSnippet:qr("snippet"),internalSdkSrc:qr("sdkSrc")}));var Qe=function(){function t(){}return t.create=function(e,r,n,i,o,s){if(n=te(i,n)||fe,S(e)||S(r)||S(n))throw Error("Input doesn't contain all required fields");var c={name:n,time:Fe(new Date),iKey:"",ext:s||{},tags:[],data:{},baseType:r,baseData:e};return S(o)||Y(o,function(a,u){c.data[a]=u}),c},t}();var Ae={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Q=new Tr;var Ft="AppInsightsPropertiesPlugin",Gr="AppInsightsChannelPlugin",Zi="ApplicationInsightsAnalytics";var Ma=function(){function t(e,r,n,i){W(t,this,function(o){var s=null,c=[],a=!1,u;n&&(u=n.logger);function l(){n&&R(n.getTransmissionControls(),function(m){R(m,function(C){return C.flush(!0)})})}function f(m){c.push(m),s||(s=setInterval(function(){var C=c.slice(0),w=!1;c=[],R(C,function(b){b()?w=!0:c.push(b)}),c.length===0&&(clearInterval(s),s=null),w&&l()},100))}o.trackPageView=function(m,C){var w=m.name;if(S(w)||typeof w!="string"){var b=we();w=m.name=b&&b.title||""}var d=m.uri;if(S(d)||typeof d!="string"){var g=He();d=m.uri=g&&g.href||""}if(!i.isPerformanceTimingSupported()){e.sendPageViewInternal(m,C),l(),u.throwInternal(y.WARNING,h.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var x=!1,T,M=i.getPerformanceTiming().navigationStart;M>0&&(T=ye(M,+new Date),i.shouldCollectDuration(T)||(T=void 0));var k;!S(C)&&!S(C.duration)&&(k=C.duration),(r||!isNaN(k))&&(isNaN(k)&&(C||(C={}),C.duration=T),e.sendPageViewInternal(m,C),l(),x=!0);var J=6e4;C||(C={}),f(function(){var pe=!1;try{if(i.isPerformanceTimingDataReady()){pe=!0;var K={name:w,uri:d};i.populatePageViewPerformanceEvent(K),!K.isValid&&!x?(C.duration=T,e.sendPageViewInternal(m,C)):(x||(C.duration=K.durationMs,e.sendPageViewInternal(m,C)),a||(e.sendPageViewPerformanceInternal(K,C),a=!0))}else M>0&&ye(M,+new Date)>J&&(pe=!0,x||(C.duration=J,e.sendPageViewInternal(m,C)))}catch(ce){u.throwInternal(y.CRITICAL,h.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+G(ce),{exception:U(ce)})}return pe})}})}return t}();var _a=function(){function t(e,r){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=r,this._logger=e}return t.prototype.trackPreviousPageVisit=function(e,r){try{var n=this.restartPageVisitTimer(e,r);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+U(i))}},t.prototype.restartPageVisitTimer=function(e,r){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,r),n}catch(i){return this._logger.warnToConsole("Call to restart failed: "+U(i)),null}},t.prototype.startPageVisitTimer=function(e,r){try{if(Zt()){hr(this._logger,this.prevPageVisitDataKeyName)!=null&&Pe("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new Mc(e,r),i=xe().stringify(n);xr(this._logger,this.prevPageVisitDataKeyName,i)}}catch(o){this._logger.warnToConsole("Call to start failed: "+U(o))}},t.prototype.stopPageVisitTimer=function(){try{if(Zt()){var e=he(),r=hr(this._logger,this.prevPageVisitDataKeyName);if(r&&ot()){var n=xe().parse(r);return n.pageVisitTime=e-n.pageVisitStartTime,ji(this._logger,this.prevPageVisitDataKeyName),n}else return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+U(i)),null}},t}();var Mc=function(){function t(e,r){this.pageVisitStartTime=he(),this.pageName=e,this.pageUrl=r}return t}();var La=function(){function t(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return t.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var r=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),i=0,o=0,s=0,c=0,a=0;(r||n)&&(r?(i=r.duration,o=r.startTime===0?r.connectEnd:ye(r.startTime,r.connectEnd),s=ye(r.requestStart,r.responseStart),c=ye(r.responseStart,r.responseEnd),a=ye(r.responseEnd,r.loadEventEnd)):(i=ye(n.navigationStart,n.loadEventEnd),o=ye(n.navigationStart,n.connectEnd),s=ye(n.requestStart,n.responseStart),c=ye(n.responseStart,n.responseEnd),a=ye(n.responseEnd,n.loadEventEnd)),i===0?this._logger.throwInternal(y.WARNING,h.ErrorPVCalc,"error calculating page view performance.",{total:i,network:o,request:s,response:c,dom:a}):this.shouldCollectDuration(i,o,s,c,a)?i<Math.floor(o)+Math.floor(s)+Math.floor(c)+Math.floor(a)?this._logger.throwInternal(y.WARNING,h.ClientPerformanceMathError,"client performance math error.",{total:i,network:o,request:s,response:c,dom:a}):(e.durationMs=i,e.perfTotal=e.duration=je(i),e.networkConnect=je(o),e.sentRequest=je(s),e.receivedResponse=je(c),e.domProcessing=je(a),e.isValid=!0):this._logger.throwInternal(y.WARNING,h.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:o,request:s,response:c,dom:a}))},t.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?ze().timing:null},t.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?ze().getEntriesByType("navigation")[0]:null},t.prototype.isPerformanceNavigationTimingSupported=function(){var e=ze();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},t.prototype.isPerformanceTimingSupported=function(){var e=ze();return e&&e.timing},t.prototype.isPerformanceTimingDataReady=function(){var e=ze(),r=e?e.timing:0;return r&&r.domainLookupStart>0&&r.navigationStart>0&&r.responseStart>0&&r.requestStart>0&&r.loadEventEnd>0&&r.responseEnd>0&&r.connectEnd>0&&r.domLoading>0},t.prototype.shouldCollectDuration=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=be()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],o=n.userAgent,s=!1;if(o)for(var c=0;c<i.length;c++)s=s||o.toLowerCase().indexOf(i[c])!==-1;if(s)return!1;for(var c=0;c<e.length;c++)if(e[c]<0||e[c]>=this.MAX_DURATION_ALLOWED)return!1;return!0},t}();var Ua="duration",Qi="event";function Wr(t,e){t&&t.dispatchEvent&&e&&t.dispatchEvent(e)}var eo=function(t){O(e,t);function e(){var r=t.call(this)||this;r.identifier=Zi,r.priority=180,r.autoRoutePVDelay=500;var n,i,o,s=0,c,a;return W(e,r,function(u,l){var f=He(!0);c=f&&f.href||"",u.getCookieMgr=function(){return Wt(u.core)},u.processTelemetry=function(d,g){dt(u.core,function(){return u.identifier+":processTelemetry"},function(){var x=!1,T=u._telemetryInitializers.length;g=u._getTelCtx(g);for(var M=0;M<T;++M){var k=u._telemetryInitializers[M];if(k)try{if(k.apply(null,[d])===!1){x=!0;break}}catch(J){g.diagLog().throwInternal(y.CRITICAL,h.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+G(J),{exception:U(J)},!0)}}x||u.processNext(d,g)},function(){return{item:d}},!d.sync)},u.trackEvent=function(d,g){try{var x=Qe.create(d,Ve.dataType,Ve.envelopeType,u.diagLog(),g);u.core.track(x)}catch(T){u.diagLog().throwInternal(y.WARNING,h.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+G(T),{exception:U(T)})}},u.startTrackEvent=function(d){try{n.start(d)}catch(g){u.diagLog().throwInternal(y.CRITICAL,h.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+G(g),{exception:U(g)})}},u.stopTrackEvent=function(d,g,x){try{n.stop(d,void 0,g)}catch(T){u.diagLog().throwInternal(y.CRITICAL,h.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+G(T),{exception:U(T)})}},u.trackTrace=function(d,g){try{var x=Qe.create(d,ct.dataType,ct.envelopeType,u.diagLog(),g);u.core.track(x)}catch(T){u.diagLog().throwInternal(y.WARNING,h.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+G(T),{exception:U(T)})}},u.trackMetric=function(d,g){try{var x=Qe.create(d,Be.dataType,Be.envelopeType,u.diagLog(),g);u.core.track(x)}catch(T){u.diagLog().throwInternal(y.CRITICAL,h.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+G(T),{exception:U(T)})}},u.trackPageView=function(d,g){try{var x=d||{};u._pageViewManager.trackPageView(x,lt({},x.properties,x.measurements,g)),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(x.name,x.uri)}catch(T){u.diagLog().throwInternal(y.CRITICAL,h.TrackPVFailed,"trackPageView failed, page view will not be collected: "+G(T),{exception:U(T)})}},u.sendPageViewInternal=function(d,g,x){var T=we();T&&(d.refUri=d.refUri===void 0?T.referrer:d.refUri);var M=Qe.create(d,_e.dataType,_e.envelopeType,u.diagLog(),g,x);u.core.track(M),s=0},u.sendPageViewPerformanceInternal=function(d,g,x){var T=Qe.create(d,ut.dataType,ut.envelopeType,u.diagLog(),g,x);u.core.track(T)},u.trackPageViewPerformance=function(d,g){try{u._pageViewPerformanceManager.populatePageViewPerformanceEvent(d),u.sendPageViewPerformanceInternal(d,g)}catch(x){u.diagLog().throwInternal(y.CRITICAL,h.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+G(x),{exception:U(x)})}},u.startTrackPage=function(d){try{if(typeof d!="string"){var g=we();d=g&&g.title||""}i.start(d)}catch(x){u.diagLog().throwInternal(y.CRITICAL,h.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+G(x),{exception:U(x)})}},u.stopTrackPage=function(d,g,x,T){try{if(typeof d!="string"){var M=we();d=M&&M.title||""}if(typeof g!="string"){var k=He();g=k&&k.href||""}i.stop(d,g,x,T),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(d,g)}catch(J){u.diagLog().throwInternal(y.CRITICAL,h.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+G(J),{exception:U(J)})}},u.sendExceptionInternal=function(d,g,x){var T=d.exception||d.error||new Error(fe),M=new De(u.diagLog(),T,d.properties||g,d.measurements,d.severityLevel,d.id).toInterface(),k=Qe.create(M,De.dataType,De.envelopeType,u.diagLog(),g,x);u.core.track(k)},u.trackException=function(d,g){try{u.sendExceptionInternal(d,g)}catch(x){u.diagLog().throwInternal(y.CRITICAL,h.TrackExceptionFailed,"trackException failed, exception will not be collected: "+G(x),{exception:U(x)})}},u._onerror=function(d){var g=d&&d.error,x=d&&d.evt;try{if(!x){var T=ft();T&&(x=T[Qi])}var M=d&&d.url||(we()||{}).URL,k=d.errorSrc||"window.onerror@"+M+":"+(d.lineNumber||0)+":"+(d.columnNumber||0),J={errorSrc:k,url:M,lineNumber:d.lineNumber||0,columnNumber:d.columnNumber||0,message:d.message};Mi(d.message,d.url,d.lineNumber,d.columnNumber,d.error)?b(De.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",M,d.lineNumber||0,d.columnNumber||0,g,x,null,k),J):(d.errorSrc||(d.errorSrc=k),u.trackException({exception:d,severityLevel:Ir.Error},J))}catch(K){var pe=g?g.name+", "+g.message:"null";u.diagLog().throwInternal(y.CRITICAL,h.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+G(K),{exception:U(K),errorString:pe})}},u.addTelemetryInitializer=function(d){u._telemetryInitializers.push(d)},u.initialize=function(d,g,x,T){if(!u.isInitialized()){if(S(g))throw Error("Error initializing");l.initialize(d,g,x,T),u.setInitialized(!1);var M=u._getTelCtx(),k=u.identifier;u.config=M.getExtCfg(k);var J=e.getDefaultConfig(d);J!==void 0&&Y(J,function(D,H){u.config[D]=M.getConfig(k,D,H),u.config[D]===void 0&&(u.config[D]=H)}),u.config.isStorageUseDisabled&&Ui();var pe={instrumentationKey:function(){return d.instrumentationKey},accountId:function(){return u.config.accountId||d.accountId},sessionRenewalMs:function(){return u.config.sessionRenewalMs||d.sessionRenewalMs},sessionExpirationMs:function(){return u.config.sessionExpirationMs||d.sessionExpirationMs},sampleRate:function(){return u.config.samplingPercentage||d.samplingPercentage},sdkExtension:function(){return u.config.sdkExtension||d.sdkExtension},isBrowserLinkTrackingEnabled:function(){return u.config.isBrowserLinkTrackingEnabled||d.isBrowserLinkTrackingEnabled},appId:function(){return u.config.appId||d.appId}};u._pageViewPerformanceManager=new La(u.core),u._pageViewManager=new Ma(r,u.config.overridePageViewDuration,u.core,u._pageViewPerformanceManager),u._pageVisitTimeManager=new _a(u.diagLog(),function(D,H,_){return m(D,H,_)}),u._telemetryInitializers=u._telemetryInitializers||[],C(pe),n=new Oa(u.diagLog(),"trackEvent"),n.action=function(D,H,_,B){B||(B={}),B[Ua]=_.toString(),u.trackEvent({name:D,properties:B})},i=new Oa(u.diagLog(),"trackPageView"),i.action=function(D,H,_,B,X){S(B)&&(B={}),B[Ua]=_.toString();var ee={name:D,uri:H,properties:B,measurements:X};u.sendPageViewInternal(ee,B)};var K=ft(),ce=ci(),Ce=He(!0),et=r;if(u.config.disableExceptionTracking===!1&&!u.config.autoExceptionInstrumented&&K){var Ke="onerror",tt=K[Ke];K.onerror=function(D,H,_,B,X){var ee=K[Qi],wt=tt&&tt(D,H,_,B,X);return wt!==!0&&et._onerror(De.CreateAutoException(D,H,_,B,X,ee)),wt},u.config.autoExceptionInstrumented=!0}if(u.config.disableExceptionTracking===!1&&u.config.enableUnhandledPromiseRejectionTracking===!0&&!u.config.autoUnhandledPromiseInstrumented&&K){var p="onunhandledrejection",I=K[p];K[p]=function(D){var H=K[Qi],_=I&&I.call(K,D);return _!==!0&&et._onerror(De.CreateAutoException(D.reason.toString(),Ce?Ce.href:"",0,0,D,H)),_},u.config.autoUnhandledPromiseInstrumented=!0}if(u.config.enableAutoRouteTracking===!0&&ce&&z(ce.pushState)&&z(ce.replaceState)&&K&&typeof Event!="undefined"){var P=r;R(x,function(D){D.identifier===Ft&&(o=D)}),ce.pushState=function(D){return function(){var _=D.apply(this,arguments);return Wr(K,Xt(P.config.namePrefix+"pushState")),Wr(K,Xt(P.config.namePrefix+"locationchange")),_}}(ce.pushState),ce.replaceState=function(D){return function(){var _=D.apply(this,arguments);return Wr(K,Xt(P.config.namePrefix+"replaceState")),Wr(K,Xt(P.config.namePrefix+"locationchange")),_}}(ce.replaceState),K.addEventListener&&(K.addEventListener(P.config.namePrefix+"popstate",function(){Wr(K,Xt(P.config.namePrefix+"locationchange"))}),K.addEventListener(P.config.namePrefix+"locationchange",function(){if(o&&o.context&&o.context.telemetryTrace){o.context.telemetryTrace.traceID=Oe();var D="_unknown_";Ce&&Ce.pathname&&(D=Ce.pathname+(Ce.hash||"")),o.context.telemetryTrace.name=D}a&&(c=a),a=Ce&&Ce.href||"",setTimeout(function(H){P.trackPageView({refUri:H,properties:{duration:0}})}.bind(r,c),P.autoRoutePVDelay)}))}u.setInitialized(!0)}};function m(d,g,x){var T={PageName:d,PageUrl:g};u.trackMetric({name:"PageVisitTime",average:x,max:x,min:x,sampleCount:1},T)}function C(d){if(!d.isBrowserLinkTrackingEnabled()){var g=["/browserLinkSignalR/","/__browserLink/"],x=function(T){if(T.baseType===qe.dataType){var M=T.baseData;if(M){for(var k=0;k<g.length;k++)if(M.target&&M.target.indexOf(g[k])>=0)return!1}}return!0};w(x)}}function w(d){u._telemetryInitializers.push(d)}function b(d,g){var x=Qe.create(d,De.dataType,De.envelopeType,u.diagLog(),g);u.core.track(x)}}),r}return e.getDefaultConfig=function(r){return r||(r={}),r.sessionRenewalMs=30*60*1e3,r.sessionExpirationMs=24*60*60*1e3,r.disableExceptionTracking=$e(r.disableExceptionTracking),r.autoTrackPageVisitTime=$e(r.autoTrackPageVisitTime),r.overridePageViewDuration=$e(r.overridePageViewDuration),r.enableUnhandledPromiseRejectionTracking=$e(r.enableUnhandledPromiseRejectionTracking),(isNaN(r.samplingPercentage)||r.samplingPercentage<=0||r.samplingPercentage>=100)&&(r.samplingPercentage=100),r.isStorageUseDisabled=$e(r.isStorageUseDisabled),r.isBrowserLinkTrackingEnabled=$e(r.isBrowserLinkTrackingEnabled),r.enableAutoRouteTracking=$e(r.enableAutoRouteTracking),r.namePrefix=r.namePrefix||"",r.enableDebug=$e(r.enableDebug),r.disableFlushOnBeforeUnload=$e(r.disableFlushOnBeforeUnload),r.disableFlushOnUnload=$e(r.disableFlushOnUnload,r.disableFlushOnBeforeUnload),r},e.Version="2.6.4",e}(at);var Oa=function(){function t(e,r){var n=this,i={};n.start=function(o){typeof i[o]!="undefined"&&e.throwInternal(y.WARNING,h.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),i[o]=+new Date},n.stop=function(o,s,c,a){var u=i[o];if(isNaN(u))e.throwInternal(y.WARNING,h.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:o,key:o},!0);else{var l=+new Date,f=ye(u,l);n.action(o,s,f,c,a)}delete i[o],i[o]=void 0}}return t}();var Ha=function(){function t(e){var r=[];W(t,this,function(n){n.enqueue=function(i){r.push(i)},n.count=function(){return r.length},n.clear=function(){r.length=0},n.getItems=function(){return r.slice(0)},n.batchPayloads=function(i){if(i&&i.length>0){var o=e.emitLineDelimitedJson()?i.join(`
`):"["+i.join(",")+"]";return o}return null},n.markAsSent=function(i){n.clear()},n.clearSent=function(i){}})}return t}();var za=function(){function t(e,r){var n=!1,i;W(t,this,function(o){var s=u(t.BUFFER_KEY),c=u(t.SENT_BUFFER_KEY);i=s.concat(c),i.length>t.MAX_BUFFER_SIZE&&(i.length=t.MAX_BUFFER_SIZE),l(t.SENT_BUFFER_KEY,[]),l(t.BUFFER_KEY,i),o.enqueue=function(f){if(i.length>=t.MAX_BUFFER_SIZE){n||(e.throwInternal(y.WARNING,h.SessionStorageBufferFull,"Maximum buffer size reached: "+i.length,!0),n=!0);return}i.push(f),l(t.BUFFER_KEY,i)},o.count=function(){return i.length},o.clear=function(){i=[],l(t.BUFFER_KEY,[]),l(t.SENT_BUFFER_KEY,[]),n=!1},o.getItems=function(){return i.slice(0)},o.batchPayloads=function(f){if(f&&f.length>0){var m=r.emitLineDelimitedJson()?f.join(`
`):"["+f.join(",")+"]";return m}return null},o.markAsSent=function(f){i=a(f,i),l(t.BUFFER_KEY,i);var m=u(t.SENT_BUFFER_KEY);m instanceof Array&&f instanceof Array&&(m=m.concat(f),m.length>t.MAX_BUFFER_SIZE&&(e.throwInternal(y.CRITICAL,h.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+m.length,!0),m.length=t.MAX_BUFFER_SIZE),l(t.SENT_BUFFER_KEY,m))},o.clearSent=function(f){var m=u(t.SENT_BUFFER_KEY);m=a(f,m),l(t.SENT_BUFFER_KEY,m)};function a(f,m){var C=[];return R(m,function(w){!z(w)&&Vt(f,w)===-1&&C.push(w)}),C}function u(f){var m=f;try{m=r.namePrefix&&r.namePrefix()?r.namePrefix()+"_"+m:m;var C=hr(e,m);if(C){var w=xe().parse(C);if(L(w)&&(w=xe().parse(w)),w&&Ne(w))return w}}catch(b){e.throwInternal(y.CRITICAL,h.FailedToRestoreStorageBuffer," storage key: "+m+", "+G(b),{exception:U(b)})}return[]}function l(f,m){var C=f;try{C=r.namePrefix&&r.namePrefix()?r.namePrefix()+"_"+C:C;var w=JSON.stringify(m);xr(e,C,w)}catch(b){xr(e,C,JSON.stringify([])),e.throwInternal(y.WARNING,h.FailedToSetStorageBuffer," storage key: "+C+", "+G(b)+". Buffer cleared",{exception:U(b)})}}})}return t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}();var to="baseType",re="baseData",Te="properties",ja="true";function de(t,e,r){return q(t,e,r,lr)}var oe=function(){function t(){}return t.extractPropsAndMeasurements=function(e,r,n){S(e)||Y(e,function(i,o){ur(o)?n[i]=o:L(o)?r[i]=o:ot()&&(r[i]=xe().stringify(o))})},t.createEnvelope=function(e,r,n,i){var o=new Pn(e,i,r);de(o,"sampleRate",n[vr]),(n[re]||{}).startTime&&(o.time=Fe(n[re].startTime)),o.iKey=n.iKey;var s=n.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",s),t.extractPartAExtensions(n,o),n.tags=n.tags||[],pn(o)},t.extractPartAExtensions=function(e,r){var n=r.tags=r.tags||{},i=e.ext=e.ext||{},o=e.tags=e.tags||[],s=i.user;s&&(de(n,Q.userAuthUserId,s.authId),de(n,Q.userId,s.id||s.localId));var c=i.app;c&&de(n,Q.sessionId,c.sesId);var a=i.device;a&&(de(n,Q.deviceId,a.id||a.localId),de(n,Q.deviceType,a.deviceClass),de(n,Q.deviceIp,a.ip),de(n,Q.deviceModel,a.model),de(n,Q.deviceType,a.deviceType));var u=e.ext.web;if(u){de(n,Q.deviceLanguage,u.browserLang),de(n,Q.deviceBrowserVersion,u.browserVer),de(n,Q.deviceBrowser,u.browser);var l=r.data=r.data||{},f=l[re]=l[re]||{},m=f[Te]=f[Te]||{};de(m,"domain",u.domain),de(m,"isManual",u.isManual?ja:null),de(m,"screenRes",u.screenRes),de(m,"userConsent",u.userConsent?ja:null)}var C=i.os;C&&de(n,Q.deviceOS,C.name);var w=i.trace;w&&(de(n,Q.operationParentId,w.parentID),de(n,Q.operationName,w.name),de(n,Q.operationId,w.traceID));for(var b={},d=o.length-1;d>=0;d--){var g=o[d];Y(g,function(T,M){b[T]=M}),o.splice(d,1)}Y(o,function(T,M){b[T]=M});var x=lt({},n,b);x[Q.internalSdkVersion]||(x[Q.internalSdkVersion]="javascript:"+t.Version),r.tags=pn(x)},t.prototype.Init=function(e,r){this._logger=e,S(r[re])&&this._logger.throwInternal(y.CRITICAL,h.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},t.Version="2.6.4",t}();var Va=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[re].measurements||{},o=n[re][Te]||{};oe.extractPropsAndMeasurements(n.data,o,i);var s=n[re];if(S(s))return r.warnToConsole("Invalid input for dependency data"),null;var c=s[Te]&&s[Te][Hr]?s[Te][Hr]:"GET",a=new qe(r,s.id,s.target,s.name,s.duration,s.success,s.responseCode,c,s.type,s.correlationContext,o,i),u=new pt(qe.dataType,a);return oe.createEnvelope(r,qe.envelopeType,n,u)},e.DependencyEnvelopeCreator=new e,e}(oe);var ro=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i={},o={};n[to]!==Ve.dataType&&(i.baseTypeSource=n[to]),n[to]===Ve.dataType?(i=n[re][Te]||{},o=n[re].measurements||{}):n[re]&&oe.extractPropsAndMeasurements(n[re],i,o),oe.extractPropsAndMeasurements(n.data,i,o);var s=n[re].name,c=new Ve(r,s,i,o),a=new pt(Ve.dataType,c);return oe.createEnvelope(r,Ve.envelopeType,n,a)},e.EventEnvelopeCreator=new e,e}(oe);var Ba=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[re].measurements||{},o=n[re][Te]||{};oe.extractPropsAndMeasurements(n.data,o,i);var s=n[re],c=De.CreateFromInterface(r,s,o,i),a=new pt(De.dataType,c);return oe.createEnvelope(r,De.envelopeType,n,a)},e.ExceptionEnvelopeCreator=new e,e}(oe);var qa=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[re],o=i[Te]||{},s=i.measurements||{};oe.extractPropsAndMeasurements(n.data,o,s);var c=new Be(r,i.name,i.average,i.sampleCount,i.min,i.max,o,s),a=new pt(Be.dataType,c);return oe.createEnvelope(r,Be.envelopeType,n,a)},e.MetricEnvelopeCreator=new e,e}(oe);var Ga=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i="duration",o,s=n[re];!S(s)&&!S(s[Te])&&!S(s[Te][i])?(o=s[Te][i],delete s[Te][i]):!S(n.data)&&!S(n.data[i])&&(o=n.data[i],delete n.data[i]);var c=n[re],a;((n.ext||{}).trace||{}).traceID&&(a=n.ext.trace.traceID);var u=c.id||a,l=c.name,f=c.uri,m=c[Te]||{},C=c.measurements||{};if(S(c.refUri)||(m.refUri=c.refUri),S(c.pageType)||(m.pageType=c.pageType),S(c.isLoggedIn)||(m.isLoggedIn=c.isLoggedIn.toString()),!S(c[Te])){var w=c[Te];Y(w,function(g,x){m[g]=x})}oe.extractPropsAndMeasurements(n.data,m,C);var b=new _e(r,l,f,o,m,C,u),d=new pt(_e.dataType,b);return oe.createEnvelope(r,_e.envelopeType,n,d)},e.PageViewEnvelopeCreator=new e,e}(oe);var Wa=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[re],o=i.name,s=i.uri||i.url,c=i[Te]||{},a=i.measurements||{};oe.extractPropsAndMeasurements(n.data,c,a);var u=new ut(r,o,s,void 0,c,a,i),l=new pt(ut.dataType,u);return oe.createEnvelope(r,ut.envelopeType,n,l)},e.PageViewPerformanceEnvelopeCreator=new e,e}(oe);var Ka=function(t){O(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[re].message,o=n[re].severityLevel,s=n[re][Te]||{},c=n[re].measurements||{};oe.extractPropsAndMeasurements(n.data,s,c);var a=new ct(r,i,o,s,c),u=new pt(ct.dataType,a);return oe.createEnvelope(r,ct.envelopeType,n,u)},e.TraceEnvelopeCreator=new e,e}(oe);var Ja=function(){function t(e){W(t,this,function(r){r.serialize=function(s){var c=n(s,"root");try{return xe().stringify(c)}catch(a){e.throwInternal(y.CRITICAL,h.CannotSerializeObject,a&&z(a.toString)?a.toString():"Error serializing object",null,!0)}};function n(s,c){var a="__aiCircularRefCheck",u={};if(!s)return e.throwInternal(y.CRITICAL,h.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:c},!0),u;if(s[a])return e.throwInternal(y.WARNING,h.CircularReferenceDetected,"Circular reference detected while serializing object",{name:c},!0),u;if(!s.aiDataContract){if(c==="measurements")u=o(s,"number",c);else if(c==="properties")u=o(s,"string",c);else if(c==="tags")u=o(s,"string",c);else if(Ne(s))u=i(s,c);else{e.throwInternal(y.WARNING,h.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:c},!0);try{xe().stringify(s),u=s}catch(l){e.throwInternal(y.CRITICAL,h.CannotSerializeObject,l&&z(l.toString)?l.toString():"Error serializing object",null,!0)}}return u}return s[a]=!0,Y(s.aiDataContract,function(l,f){var m=z(f)?f()&1:f&1,C=z(f)?f()&4:f&4,w=f&2,b=s[l]!==void 0,d=it(s[l])&&s[l]!==null;if(m&&!b&&!w)e.throwInternal(y.CRITICAL,h.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:l,name:c});else if(!C){var g=void 0;d?w?g=i(s[l],l):g=n(s[l],l):g=s[l],g!==void 0&&(u[l]=g)}}),delete s[a],u}function i(s,c){var a;if(s)if(!Ne(s))e.throwInternal(y.CRITICAL,h.ItemNotInArray,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:c},!0);else{a=[];for(var u=0;u<s.length;u++){var l=s[u],f=n(l,c+"["+u+"]");a.push(f)}}return a}function o(s,c,a){var u;return s&&(u={},Y(s,function(l,f){if(c==="string")f===void 0?u[l]="undefined":f===null?u[l]="null":f.toString?u[l]=f.toString():u[l]="invalid field: toString() is not defined.";else if(c==="number")if(f===void 0)u[l]="undefined";else if(f===null)u[l]="null";else{var m=parseFloat(f);isNaN(m)?u[l]="NaN":u[l]=m}else u[l]="invalid field: "+a+" is of unknown type.",e.throwInternal(y.CRITICAL,u[l],null,!0)})),u}})}return t}();var _c=function(){function t(){var e=ft(),r=we(),n=!1,i=!0;W(t,this,function(o){try{if(e&&Pt.Attach(e,"online",a)&&(Pt.Attach(e,"offline",u),n=!0),r){var s=r.body||r;ue(s.ononline)||(s.ononline=a,s.onoffline=u,n=!0)}if(n){var c=be();c&&!S(c.onLine)&&(i=c.onLine)}}catch(l){n=!1}o.isListening=n,o.isOnline=function(){var l=!0,f=be();return n?l=i:f&&!S(f.onLine)&&(l=f.onLine),l},o.isOffline=function(){return!o.isOnline()};function a(){i=!0}function u(){i=!1}})}return t.Offline=new t,t}();var no=_c.Offline;var Xa=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e.length<t.MIN_INPUT_LENGTH;)e=e.concat(e);for(var r=5381,n=0;n<e.length;++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t.MIN_INPUT_LENGTH=8,t}();var $a=function(){function t(){this.hashCodeGeneragor=new Xa,this.keys=new Tr}return t.prototype.getSamplingScore=function(e){var r=0;return e.tags&&e.tags[this.keys.userId]?r=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?r=this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?r=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?r=this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):r=Math.random()*100,r},t}();var Ya=function(){function t(e,r){this.INT_MAX_VALUE=2147483647,this._logger=r||xt(null),(e>100||e<0)&&(this._logger.throwInternal(y.WARNING,h.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new $a}return t.prototype.isSampledIn=function(e){var r=this.sampleRate,n=!1;return r==null||r>=100||e.baseType===Be.dataType?!0:(n=this.samplingScoreGenerator.getSamplingScore(e)<r,n)},t}();function Rn(t){try{return t.responseText}catch(e){}return null}var io=function(t){O(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=Gr,r._XMLHttpRequestSupported=!1;var n,i,o,s,c,a,u={};return W(e,r,function(l,f){function m(){Pe("Method not implemented.")}l.pause=m,l.resume=m,l.flush=function(){try{l.triggerSend(!0,null,1)}catch(p){l.diagLog().throwInternal(y.CRITICAL,h.FlushFailed,"flush failed, telemetry will not be collected: "+G(p),{exception:U(p)})}},l.onunloadFlush=function(){if((l._senderConfig.onunloadDisableBeacon()===!1||l._senderConfig.isBeaconApiDisabled()===!1)&&Cn())try{l.triggerSend(!0,d,2)}catch(p){l.diagLog().throwInternal(y.CRITICAL,h.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+G(p),{exception:U(p)})}else l.flush()},l.teardown=m,l.addHeader=function(p,I){u[p]=I},l.initialize=function(p,I,P,D){f.initialize(p,I,P,D);var H=l._getTelCtx(),_=l.identifier;c=new Ja(I.logger),n=0,i=null,o=0,l._sender=null,a=0;var B=e._getDefaultAppInsightsChannelConfig();if(l._senderConfig=e._getEmptyAppInsightsChannelConfig(),Y(B,function(v,E){l._senderConfig[v]=function(){return H.getConfig(_,v,E())}}),l._buffer=l._senderConfig.enableSessionStorageBuffer()&&Zt()?new za(l.diagLog(),l._senderConfig):new Ha(l._senderConfig),l._sample=new Ya(l._senderConfig.samplingPercentage(),l.diagLog()),tt(p)||l.diagLog().throwInternal(y.CRITICAL,h.InvalidInstrumentationKey,"Invalid Instrumentation key "+p.instrumentationKey),!jr(l._senderConfig.endpointUrl())&&l._senderConfig.customHeaders()&&l._senderConfig.customHeaders().length>0&&R(l._senderConfig.customHeaders(),function(v){r.addHeader(v.header,v.value)}),!l._senderConfig.isBeaconApiDisabled()&&Cn())l._sender=d;else{var X=Ie("XMLHttpRequest");if(X){var ee=new X;"withCredentials"in ee?(l._sender=g,l._XMLHttpRequestSupported=!0):typeof XDomainRequest!==ke&&(l._sender=ce)}else{var wt=Ie("fetch");wt&&(l._sender=x)}}},l.processTelemetry=function(p,I){I=l._getTelCtx(I);try{if(l._senderConfig.disableTelemetry())return;if(!p){I.diagLog().throwInternal(y.CRITICAL,h.CannotSendEmptyTelemetry,"Cannot send empty telemetry");return}if(p.baseData&&!p.baseType){I.diagLog().throwInternal(y.CRITICAL,h.InvalidEvent,"Cannot send telemetry without baseData and baseType");return}if(p.baseType||(p.baseType="EventData"),!l._sender){I.diagLog().throwInternal(y.CRITICAL,h.SenderNotInitialized,"Sender was not initialized");return}if(C(p))p[vr]=l._sample.sampleRate;else{I.diagLog().throwInternal(y.WARNING,h.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:l._sample.sampleRate});return}var P=e.constructEnvelope(p,l._senderConfig.instrumentationKey(),I.diagLog());if(!P){I.diagLog().throwInternal(y.CRITICAL,h.CreateEnvelopeError,"Unable to create an AppInsights envelope");return}var D=!1;if(p.tags&&p.tags[gr]&&(R(p.tags[gr],function(X){try{X&&X(P)===!1&&(D=!0,I.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(ee){I.diagLog().throwInternal(y.CRITICAL,h.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+G(ee),{exception:U(ee)},!0)}}),delete p.tags[gr]),D)return;var H=c.serialize(P),_=l._buffer.getItems(),B=l._buffer.batchPayloads(_);B&&B.length+H.length>l._senderConfig.maxBatchSizeInBytes()&&l.triggerSend(!0,null,10),l._buffer.enqueue(H),J()}catch(X){I.diagLog().throwInternal(y.WARNING,h.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+G(X),{exception:U(X)})}l.processNext(p,I)},l._xhrReadyStateChange=function(p,I,P){p.readyState===4&&w(p.status,I,p.responseURL,P,K(p),Rn(p)||p.response)},l.triggerSend=function(p,I,P){p===void 0&&(p=!0);try{if(l._senderConfig.disableTelemetry())l._buffer.clear();else{if(l._buffer.count()>0){var D=l._buffer.getItems();Ke(P||0,p),I?I.call(r,D,p):l._sender(D,p)}o=+new Date}clearTimeout(s),s=null,i=null}catch(_){var H=fr();(!H||H>9)&&l.diagLog().throwInternal(y.CRITICAL,h.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+G(_),{exception:U(_)})}},l._onError=function(p,I,P){l.diagLog().throwInternal(y.WARNING,h.OnError,"Failed to send telemetry.",{message:I}),l._buffer.clearSent(p)},l._onPartialSuccess=function(p,I){for(var P=[],D=[],H=I.errors.reverse(),_=0,B=H;_<B.length;_++){var X=B[_],ee=p.splice(X.index,1)[0];pe(X.statusCode)?D.push(ee):P.push(ee)}p.length>0&&l._onSuccess(p,I.itemsAccepted),P.length>0&&l._onError(P,K(null,["partial success",I.itemsAccepted,"of",I.itemsReceived].join(" "))),D.length>0&&(M(D),l.diagLog().throwInternal(y.WARNING,h.TransmissionFailed,"Partial success. Delivered: "+p.length+", Failed: "+P.length+". Will retry to send "+D.length+" our of "+I.itemsReceived+" items"))},l._onSuccess=function(p,I){l._buffer.clearSent(p)},l._xdrOnLoad=function(p,I){var P=Rn(p);if(p&&(P+""=="200"||P===""))n=0,l._onSuccess(I,0);else{var D=T(P);D&&D.itemsReceived&&D.itemsReceived>D.itemsAccepted&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(I,D):l._onError(I,Ce(p))}};function C(p){return l._sample.isSampledIn(p)}function w(p,I,P,D,H,_){var B=null;if(l._appId||(B=T(_),B&&B.appId&&(l._appId=B.appId)),(p<200||p>=300)&&p!==0){if((p===301||p===307||p===308)&&!b(P)){l._onError(I,H);return}!l._senderConfig.isRetryDisabled()&&pe(p)?(M(I),l.diagLog().throwInternal(y.WARNING,h.TransmissionFailed,". Response code "+p+". Will retry to send "+I.length+" items.")):l._onError(I,H)}else if(no.isOffline()){if(!l._senderConfig.isRetryDisabled()){var X=10;M(I,X),l.diagLog().throwInternal(y.WARNING,h.TransmissionFailed,". Offline - Response Code: "+p+". Offline status: "+no.isOffline()+". Will retry to send "+I.length+" items.")}}else b(P),p===206?(B||(B=T(_)),B&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(I,B):l._onError(I,H)):(n=0,l._onSuccess(I,D))}function b(p){return a>=10?!1:!S(p)&&p!==""&&p!==l._senderConfig.endpointUrl()?(l._senderConfig.endpointUrl=function(){return p},++a,!0):!1}function d(p,I){var P=l._senderConfig.endpointUrl(),D=l._buffer.batchPayloads(p),H=new Blob([D],{type:"text/plain;charset=UTF-8"}),_=be().sendBeacon(P,H);_?(l._buffer.markAsSent(p),l._onSuccess(p,p.length)):(g(p,!0),l.diagLog().throwInternal(y.WARNING,h.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function g(p,I){var P=new XMLHttpRequest,D=l._senderConfig.endpointUrl();try{P[Ct]=!0}catch(_){}P.open("POST",D,I),P.setRequestHeader("Content-type","application/json"),jr(D)&&P.setRequestHeader(Z.sdkContextHeader,Z.sdkContextHeaderAppIdRequest),R(Xe(u),function(_){P.setRequestHeader(_,u[_])}),P.onreadystatechange=function(){return l._xhrReadyStateChange(P,p,p.length)},P.onerror=function(_){return l._onError(p,K(P),_)};var H=l._buffer.batchPayloads(p);P.send(H),l._buffer.markAsSent(p)}function x(p,I){var P=l._senderConfig.endpointUrl(),D=l._buffer.batchPayloads(p),H=new Blob([D],{type:"text/plain;charset=UTF-8"}),_=new Headers;jr(P)&&_.append(Z.sdkContextHeader,Z.sdkContextHeaderAppIdRequest),R(Xe(u),function(ee){_.append(ee,u[ee])});var B={method:"POST",headers:_,body:H},X=new Request(P,B);fetch(X).then(function(ee){if(ee.ok)ee.text().then(function(wt){w(ee.status,p,ee.url,p.length,ee.statusText,wt)}),l._buffer.markAsSent(p);else throw Error(ee.statusText)}).catch(function(ee){l._onError(p,ee.message)})}function T(p){try{if(p&&p!==""){var I=xe().parse(p);if(I&&I.itemsReceived&&I.itemsReceived>=I.itemsAccepted&&I.itemsReceived-I.itemsAccepted===I.errors.length)return I}}catch(P){l.diagLog().throwInternal(y.CRITICAL,h.InvalidBackendResponse,"Cannot parse the response. "+G(P),{response:p})}return null}function M(p,I){if(I===void 0&&(I=1),!(!p||p.length===0)){l._buffer.clearSent(p),n++;for(var P=0,D=p;P<D.length;P++){var H=D[P];l._buffer.enqueue(H)}k(I),J()}}function k(p){var I=10,P;if(n<=1)P=I;else{var D=(Math.pow(2,n)-1)/2,H=Math.floor(Math.random()*D*I)+1;H=p*H,P=Math.max(Math.min(H,3600),I)}var _=he()+P*1e3;i=_}function J(){if(!s){var p=i?Math.max(0,i-he()):0,I=Math.max(l._senderConfig.maxBatchInterval(),p);s=setTimeout(function(){l.triggerSend(!0,null,1)},I)}}function pe(p){return p===408||p===429||p===500||p===503}function K(p,I){return p?"XMLHttpRequest,Status:"+p.status+",Response:"+Rn(p)||p.response||"":I}function ce(p,I){var P=ft(),D=new XDomainRequest;D.onload=function(){return l._xdrOnLoad(D,p)},D.onerror=function(X){return l._onError(p,Ce(D),X)};var H=P&&P.location&&P.location.protocol||"";if(l._senderConfig.endpointUrl().lastIndexOf(H,0)!==0){l.diagLog().throwInternal(y.WARNING,h.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),l._buffer.clear();return}var _=l._senderConfig.endpointUrl().replace(/^(https?:)/,"");D.open("POST",_);var B=l._buffer.batchPayloads(p);D.send(B),l._buffer.markAsSent(p)}function Ce(p,I){return p?"XDomainRequest,Response:"+Rn(p)||"":I}function et(){var p="getNotifyMgr";return l.core[p]?l.core[p]():l.core._notificationManager}function Ke(p,I){var P=et();if(P&&P.eventsSendRequest)try{P.eventsSendRequest(p,I)}catch(D){l.diagLog().throwInternal(y.CRITICAL,h.NotificationException,"send request notification failed: "+G(D),{exception:U(D)})}}function tt(p){var I=S(p.disableInstrumentationKeyValidation)?!1:p.disableInstrumentationKeyValidation;if(I)return!0;var P="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",D=new RegExp(P);return D.test(p.instrumentationKey)}}),r}return e.constructEnvelope=function(r,n,i){var o;switch(n!==r.iKey&&!S(n)?o=lt({},r,{iKey:n}):o=r,o.baseType){case Ve.dataType:return ro.EventEnvelopeCreator.Create(i,o);case ct.dataType:return Ka.TraceEnvelopeCreator.Create(i,o);case _e.dataType:return Ga.PageViewEnvelopeCreator.Create(i,o);case ut.dataType:return Wa.PageViewPerformanceEnvelopeCreator.Create(i,o);case De.dataType:return Ba.ExceptionEnvelopeCreator.Create(i,o);case Be.dataType:return qa.MetricEnvelopeCreator.Create(i,o);case qe.dataType:return Va.DependencyEnvelopeCreator.Create(i,o);default:return ro.EventEnvelopeCreator.Create(i,o)}},e._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},e._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},e}(at);var Lc="ai_session",oo=function(){function t(){}return t}();var Za=function(){function t(e,r){var n=this,i,o,s=xt(r),c=Wt(r);W(t,n,function(a){e||(e={}),z(e.sessionExpirationMs)||(e.sessionExpirationMs=function(){return t.acquisitionSpan}),z(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return t.renewalSpan}),a.config=e;var u=a.config.sessionCookiePostfix&&a.config.sessionCookiePostfix()?a.config.sessionCookiePostfix():a.config.namePrefix&&a.config.namePrefix()?a.config.namePrefix():"";i=function(){return Lc+u},a.automaticSession=new oo,a.update=function(){var b=he(),d=!1,g=a.automaticSession;g.id||(d=!l(g,b));var x=a.config.sessionExpirationMs();if(!d&&x>0){var T=a.config.sessionRenewalMs(),M=b-g.acquisitionDate,k=b-g.renewalDate;d=M<0||k<0,d=d||M>x,d=d||k>T}d?m(b):(!o||b-o>t.cookieUpdateInterval)&&C(g,b)},a.backup=function(){var b=a.automaticSession;w(b.id,b.acquisitionDate,b.renewalDate)};function l(b,d){var g=!1,x=c.get(i());if(x&&z(x.split))g=f(b,x);else{var T=Oi(s,i());T&&(g=f(b,T))}return g||!!b.id}function f(b,d){var g=!1,x=", session will be reset",T=d.split("|");if(T.length>=2)try{var M=+T[1]||0,k=+T[2]||0;isNaN(M)||M<=0?s.throwInternal(y.WARNING,h.SessionRenewalDateIsZero,"AI session acquisition date is 0"+x):isNaN(k)||k<=0?s.throwInternal(y.WARNING,h.SessionRenewalDateIsZero,"AI session renewal date is 0"+x):T[0]&&(b.id=T[0],b.acquisitionDate=M,b.renewalDate=k,g=!0)}catch(J){s.throwInternal(y.CRITICAL,h.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(d||"")+"]"+x+" - "+G(J),{exception:U(J)})}return g}function m(b){var d=a.config||{},g=(d.getNewId?d.getNewId():null)||mr;a.automaticSession.id=g(d.idLength?d.idLength():22),a.automaticSession.acquisitionDate=b,C(a.automaticSession,b),Tn()||s.throwInternal(y.WARNING,h.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}function C(b,d){var g=b.acquisitionDate;b.renewalDate=d;var x=a.config,T=x.sessionRenewalMs(),M=g+x.sessionExpirationMs()-d,k=[b.id,g,d],J=0;M<T?J=M/1e3:J=T/1e3;var pe=x.cookieDomain?x.cookieDomain():null;c.set(i(),k.join("|"),x.sessionExpirationMs()>0?J:null,pe),o=d}function w(b,d,g){Hi(s,i(),[b,d,g].join("|"))}})}return t.acquisitionSpan=864e5,t.renewalSpan=18e5,t.cookieUpdateInterval=6e4,t}();var Qa=function(){function t(){}return t}();var es=function(){function t(){this.id="browser",this.deviceClass="Browser"}return t}();var Uc="2.6.4",ts=function(){function t(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:"+Uc}return t}();function rs(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))}var ns=function(){function t(e,r){this.isNewUser=!1;var n=xt(r),i=Wt(r),o;W(t,this,function(s){s.config=e;var c=s.config.userCookiePostfix&&s.config.userCookiePostfix()?s.config.userCookiePostfix():"";o=function(){return t.userCookieName+c};var a=i.get(o());if(a){s.isNewUser=!1;var u=a.split(t.cookieSeparator);u.length>0&&(s.id=u[0])}if(!s.id){var l=e||{},f=(l.getNewId?l.getNewId():null)||mr;s.id=f(l.idLength?e.idLength():22);var m=31536e3,C=Fe(new Date);s.accountAcquisitionDate=C,s.isNewUser=!0;var w=[s.id,C];i.set(o(),w.join(t.cookieSeparator),m);var b=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";zi(n,b)}s.accountId=e.accountId?e.accountId():void 0;var d=i.get(t.authUserCookieName);if(d){d=decodeURI(d);var g=d.split(t.cookieSeparator);g[0]&&(s.authenticatedId=g[0]),g.length>1&&g[1]&&(s.accountId=g[1])}s.setAuthenticatedUserContext=function(x,T,M){M===void 0&&(M=!1);var k=!rs(x)||T&&!rs(T);if(k){n.throwInternal(y.WARNING,h.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}s.authenticatedId=x;var J=s.authenticatedId;T&&(s.accountId=T,J=[s.authenticatedId,s.accountId].join(t.cookieSeparator)),M&&i.set(t.authUserCookieName,encodeURI(J))},s.clearAuthenticatedUserContext=function(){s.authenticatedId=null,s.accountId=null,i.del(t.authUserCookieName)}})}return t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}();var is=function(){function t(){}return t}();var os=function(){function t(e,r,n,i){var o=this;o.traceID=e||Oe(),o.parentID=r,o.name=n;var s=He();!n&&s&&s.pathname&&(o.name=s.pathname),o.name=te(i,o.name)}return t}();var Mn="ext",_n="tags";function Er(t,e){t&&t[e]&&Xe(t[e]).length===0&&delete t[e]}var as=function(){function t(e,r){var n=this,i=e.logger;this.appId=function(){return null},W(t,this,function(o){o.application=new Qa,o.internal=new ts(r),qt()&&(o.sessionManager=new Za(r,e),o.device=new es,o.location=new is,o.user=new ns(r,e),o.telemetryTrace=new os(void 0,void 0,void 0,i),o.session=new oo),o.applySessionContext=function(s,c){var a=o.session,u=o.sessionManager;a&&L(a.id)?q(le(s.ext,Ae.AppExt),"sesId",a.id):u&&u.automaticSession&&q(le(s.ext,Ae.AppExt),"sesId",u.automaticSession.id,L)},o.applyOperatingSystemContxt=function(s,c){q(s.ext,Ae.OSExt,o.os)},o.applyApplicationContext=function(s,c){var a=o.application;if(a){var u=le(s,_n);q(u,Q.applicationVersion,a.ver,L),q(u,Q.applicationBuild,a.build,L)}},o.applyDeviceContext=function(s,c){var a=o.device;if(a){var u=le(le(s,Mn),Ae.DeviceExt);q(u,"localId",a.id,L),q(u,"ip",a.ip,L),q(u,"model",a.model,L),q(u,"deviceClass",a.deviceClass,L)}},o.applyInternalContext=function(s,c){var a=o.internal;if(a){var u=le(s,_n);q(u,Q.internalAgentVersion,a.agentVersion,L),q(u,Q.internalSdkVersion,a.sdkVersion,L),(s.baseType===ht.dataType||s.baseType===_e.dataType)&&(q(u,Q.internalSnippet,a.snippetVer,L),q(u,Q.internalSdkSrc,a.sdkSrc,L))}},o.applyLocationContext=function(s,c){var a=n.location;a&&q(le(s,_n,[]),Q.locationIp,a.ip,L)},o.applyOperationContext=function(s,c){var a=o.telemetryTrace;if(a){var u=le(le(s,Mn),Ae.TraceExt,{traceID:void 0,parentID:void 0});q(u,"traceID",a.traceID,L),q(u,"name",a.name,L),q(u,"parentID",a.parentID,L)}},o.applyWebContext=function(s,c){var a=n.web;a&&q(le(s,Mn),Ae.WebExt,a)},o.applyUserContext=function(s,c){var a=o.user;if(a){var u=le(s,_n,[]);q(u,Q.userAccountId,a.accountId,L);var l=le(le(s,Mn),Ae.UserExt);q(l,"id",a.id,L),q(l,"authId",a.authenticatedId,L)}},o.cleanUp=function(s,c){var a=s.ext;a&&(Er(a,Ae.DeviceExt),Er(a,Ae.UserExt),Er(a,Ae.WebExt),Er(a,Ae.OSExt),Er(a,Ae.AppExt),Er(a,Ae.TraceExt))}})}return t}();var Oc=function(t){O(e,t);function e(){var r=t.call(this)||this;r.priority=110,r.identifier=Ft;var n,i;return W(e,r,function(o,s){o.initialize=function(a,u,l,f){s.initialize(a,u,l,f);var m=o._getTelCtx(),C=o.identifier,w=e.getDefaultConfig();i=i||{},Y(w,function(b,d){i[b]=function(){return m.getConfig(C,b,d())}}),o.context=new as(u,i),n=Ri(l,Gr),o.context.appId=function(){return n?n._appId:null},o._extConfig=i},o.processTelemetry=function(a,u){if(!S(a)){u=o._getTelCtx(u),a.name===_e.envelopeType&&u.diagLog().resetInternalMessageCount();var l=o.context||{};if(l.session&&typeof o.context.session.id!="string"&&l.sessionManager&&l.sessionManager.update(),c(a,u),l.user&&l.user.isNewUser){l.user.isNewUser=!1;var f=new ht(h.SendBrowserInfoOnUserInit,(be()||{}).userAgent||"");u.diagLog().logInternalMessage(y.CRITICAL,f)}o.processNext(a,u)}};function c(a,u){le(a,"tags",[]),le(a,"ext",{});var l=o.context;l.applySessionContext(a,u),l.applyApplicationContext(a,u),l.applyDeviceContext(a,u),l.applyOperationContext(a,u),l.applyUserContext(a,u),l.applyOperatingSystemContxt(a,u),l.applyWebContext(a,u),l.applyLocationContext(a,u),l.applyInternalContext(a,u),l.cleanUp(a,u)}}),r}return e.getDefaultConfig=function(){var r={instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 30*60*1e3},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 24*60*60*1e3},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}};return r},e}(at),ao=Oc;var Ge="properties";function ss(t,e,r){var n=0,i=t[e],o=t[r];return i&&o&&(n=ye(i,o)),n}function er(t,e,r,n,i){var o=0,s=ss(r,n,i);return s&&(o=Rt(t,e,je(s))),o}function Rt(t,e,r){var n="ajaxPerf",i=0;if(t&&e&&r){var o=t[n]=t[n]||{};o[e]=r,i=1}return i}function Hc(t,e){var r=t.perfTiming,n=e[Ge]||{},i=0,o="name",s="Start",c="End",a="domainLookup",u="connect",l="redirect",f="request",m="response",C="duration",w="startTime",b=a+s,d=a+c,g=u+s,x=u+c,T=f+s,M=f+c,k=m+s,J=m+c,pe=l+s,K=l=c,ce="transferSize",Ce="encodedBodySize",et="decodedBodySize",Ke="serverTiming";if(r){i|=er(n,l,r,pe,K),i|=er(n,a,r,b,d),i|=er(n,u,r,g,x),i|=er(n,f,r,T,M),i|=er(n,m,r,k,J),i|=er(n,"networkConnect",r,w,x),i|=er(n,"sentRequest",r,T,J);var tt=r[C];tt||(tt=ss(r,w,J)||0),i|=Rt(n,C,tt),i|=Rt(n,"perfTotal",tt);var p=r[Ke];if(p){var I={};R(p,function(P,D){var H=Qn(P[o]||""+D),_=I[H]||{};Y(P,function(B,X){(B!==o&&L(X)||ur(X))&&(_[B]&&(X=_[B]+";"+X),(X||!L(X))&&(_[B]=X))}),I[H]=_}),i|=Rt(n,Ke,I)}i|=Rt(n,ce,r[ce]),i|=Rt(n,Ce,r[Ce]),i|=Rt(n,et,r[et])}else t.perfMark&&(i|=Rt(n,"missing",t.perfAttempts));i&&(e[Ge]=n)}var zc=function(){function t(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1}return t}();var so=function(){function t(e,r,n){var i=this,o=n,s="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new zc,i.clientFailure=0,i.traceID=e,i.spanID=r,W(t,i,function(c){c.getAbsoluteUrl=function(){return c.requestUrl?En(c.requestUrl):null},c.getPathName=function(){return c.requestUrl?St(o,bn(c.method,c.requestUrl)):null},c.CreateTrackItem=function(a,u,l){if(c.ajaxTotalDuration=Math.round(ye(c.requestSentTime,c.responseFinishedTime)*1e3)/1e3,c.ajaxTotalDuration<0)return null;var f=(b={id:"|"+c.traceID+"."+c.spanID,target:c.getAbsoluteUrl(),name:c.getPathName(),type:a,startTime:null,duration:c.ajaxTotalDuration,success:+c.status>=200&&+c.status<400,responseCode:+c.status,method:c.method},b[Ge]={HttpMethod:c.method},b);if(c.requestSentTime&&(f.startTime=new Date,f.startTime.setTime(c.requestSentTime)),Hc(c,f),u&&Xe(c.requestHeaders).length>0&&(f[Ge]=f[Ge]||{},f[Ge].requestHeaders=c.requestHeaders),l){var m=l();if(m){var C=m.correlationContext;if(C&&(f.correlationContext=C),m.headerMap&&Xe(m.headerMap).length>0&&(f[Ge]=f[Ge]||{},f[Ge].responseHeaders=m.headerMap),c.status>=400){var w=m.type;f[Ge]=f[Ge]||{},(w===""||w==="text")&&(f[Ge][s]=m[s]?m.statusText+" - "+m[s]:m.statusText),w==="json"&&(f[Ge][s]=m.response?m.statusText+" - "+JSON.stringify(m.response):m.statusText)}}}return f;var b}})}return t}();var kv=function(){function t(){}return t.GetLength=function(e){var r=0;if(!S(e)){var n="";try{n=e.toString()}catch(i){}r=n.length,r=isNaN(r)?0:r}return r},t}();var co=function(){function t(e,r){var n=this;n.traceFlag=t.DEFAULT_TRACE_FLAG,n.version=t.DEFAULT_VERSION,e&&t.isValidTraceId(e)?n.traceId=e:n.traceId=Oe(),r&&t.isValidSpanId(r)?n.spanId=r:n.spanId=Oe().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();var cs="ai.ajxmn.",Kr="diagLog",We="ajaxData",us="throwInternal",Jr="fetch",ls=0;function jc(){var t=Je();return!t||S(t.Request)||S(t.Request[ve])||S(t[Jr])?null:t[Jr]}function Vc(t){var e=!1;if(typeof XMLHttpRequest!==ke&&!S(XMLHttpRequest)){var r=XMLHttpRequest[ve];e=!S(r)&&!S(r.open)&&!S(r.send)&&!S(r.abort)}var n=fr();if(n&&n<9&&(e=!1),e)try{var i=new XMLHttpRequest;i[We]={};var o=XMLHttpRequest[ve].open;XMLHttpRequest[ve].open=o}catch(s){e=!1,Xr(t,h.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:U(s)})}return e}function Ln(t){var e="";try{!S(t)&&!S(t[We])&&!S(t[We].requestUrl)&&(e+="(url: '"+t[We].requestUrl+"')")}catch(r){}return e}function Xr(t,e,r,n,i){t[Kr]()[us](y.CRITICAL,e,r,n,i)}function Un(t,e,r,n,i){t[Kr]()[us](y.WARNING,e,r,n,i)}function $r(t,e,r){return function(n){Xr(t,e,r,{ajaxDiagnosticsMessage:Ln(n.inst),exception:U(n.err)})}}function br(t,e){return t&&e?t.indexOf(e):-1}var uo=function(t){O(e,t);function e(){var r=t.call(this)||this;r.identifier=e.identifier,r.priority=120;var n="trackDependencyDataInternal",i=He(),o=!1,s=!1,c=i&&i.host&&i.host.toLowerCase(),a=e.getEmptyConfig(),u=!1,l=0,f,m,C,w,b=!1,d=0,g=!1,x=[],T={},M;return W(e,r,function(k,J){k.initialize=function(v,E,A,N){if(!k.isInitialized()){J.initialize(v,E,A,N);var F=k._getTelCtx(),V=e.getDefaultConfig();Y(V,function(Le,nr){a[Le]=F.getConfig(e.identifier,Le,nr)});var j=a.distributedTracingMode;if(u=a.enableRequestHeaderTracking,b=a.enableAjaxPerfTracking,d=a.maxAjaxCallsPerView,g=a.enableResponseHeaderTracking,M=a.excludeRequestFromAutoTrackingPatterns,C=j===Ye.AI||j===Ye.AI_AND_W3C,m=j===Ye.AI_AND_W3C||j===Ye.W3C,b){var $=v.instrumentationKey||"unkwn";$.length>5?w=cs+$.substring($.length-5)+".":w=cs+$+"."}if(a.disableAjaxTracking===!1&&Ce(),K(),A.length>0&&A){for(var ie=void 0,me=0;!ie&&me<A.length;)A[me]&&A[me].identifier===Ft&&(ie=A[me]),me++;ie&&(f=ie.context)}}},k.teardown=function(){R(x,function(v){v.rm()}),x=[],o=!1,s=!1,k.setInitialized(!1)},k.trackDependencyData=function(v,E){k[n](v,E)},k.includeCorrelationHeaders=function(v,E,A,N){var F=k._currentWindowHost||c;if(E){if(It.canIncludeCorrelationHeader(a,v.getAbsoluteUrl(),F)){if(A||(A={}),A.headers=new Headers(A.headers||(E instanceof Request?E.headers||{}:{})),C){var V="|"+v.traceID+"."+v.spanID;A.headers.set(Z.requestIdHeader,V),u&&(v.requestHeaders[Z.requestIdHeader]=V)}var j=a.appId||f&&f.appId();if(j&&(A.headers.set(Z.requestContextHeader,Z.requestContextAppIdFormat+j),u&&(v.requestHeaders[Z.requestContextHeader]=Z.requestContextAppIdFormat+j)),m){var $=new co(v.traceID,v.spanID);A.headers.set(Z.traceParentHeader,$.toString()),u&&(v.requestHeaders[Z.traceParentHeader]=$.toString())}}return A}else if(N){if(It.canIncludeCorrelationHeader(a,v.getAbsoluteUrl(),F)){if(C){var V="|"+v.traceID+"."+v.spanID;N.setRequestHeader(Z.requestIdHeader,V),u&&(v.requestHeaders[Z.requestIdHeader]=V)}var j=a.appId||f&&f.appId();if(j&&(N.setRequestHeader(Z.requestContextHeader,Z.requestContextAppIdFormat+j),u&&(v.requestHeaders[Z.requestContextHeader]=Z.requestContextAppIdFormat+j)),m){var $=new co(v.traceID,v.spanID);N.setRequestHeader(Z.traceParentHeader,$.toString()),u&&(v.requestHeaders[Z.traceParentHeader]=$.toString())}}return N}},k[n]=function(v,E,A){if(d===-1||l<d){(a.distributedTracingMode===Ye.W3C||a.distributedTracingMode===Ye.AI_AND_W3C)&&typeof v.id=="string"&&v.id[v.id.length-1]!=="."&&(v.id+="."),S(v.startTime)&&(v.startTime=new Date);var N=Qe.create(v,qe.dataType,qe.envelopeType,k[Kr](),E,A);k.core.track(N)}else l===d&&Xr(k,h.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++l};function pe(v){var E=!0;return(v||a.ignoreHeaders)&&R(a.ignoreHeaders,function(A){if(A.toLowerCase()===v.toLowerCase())return E=!1,-1}),E}function K(){var v=jc();if(!!v){var E=Je(),A=v.polyfill;a.disableFetchTracking===!1?(x.push(Ur(E,Jr,{req:function(N,F,V){var j;if(o&&!et(null,F,V)&&!(A&&s)){var $=N.ctx();j=B(F,V);var ie=k.includeCorrelationHeaders(j,F,V);ie!==V&&N.set(1,ie),$.data=j}},rsp:function(N,F){var V=N.ctx().data;V&&(N.rslt=N.rslt.then(function(j){return ee(N,(j||{}).status,j,V,function(){var $={statusText:j.statusText,headerMap:null,correlationContext:wt(j)};if(g){var ie={};j.headers.forEach(function(me,Le){pe(Le)&&(ie[Le]=me)}),$.headerMap=ie}return $}),j}).catch(function(j){throw ee(N,0,F,V,null,{error:j.message}),j}))},hkErr:$r(k,h.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),o=!0):A&&x.push(Ur(E,Jr,{req:function(N,F,V){et(null,F,V)}})),A&&(E[Jr].polyfill=A)}}function ce(v,E,A){x.push(Pi(v,E,A))}function Ce(){Vc(k)&&!s&&(ce(XMLHttpRequest,"open",{req:function(v,E,A,N){var F=v.inst,V=F[We];!et(F,A)&&Ke(F,!0)&&(!V||!V.xhrMonitoringState.openDone)&&tt(F,E,A,N)},hkErr:$r(k,h.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),ce(XMLHttpRequest,"send",{req:function(v,E){var A=v.inst,N=A[We];Ke(A)&&!N.xhrMonitoringState.sendDone&&(H("xhr",N),N.requestSentTime=yr(),k.includeCorrelationHeaders(N,void 0,void 0,A),N.xhrMonitoringState.sendDone=!0)},hkErr:$r(k,h.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),ce(XMLHttpRequest,"abort",{req:function(v){var E=v.inst,A=E[We];Ke(E)&&!A.xhrMonitoringState.abortDone&&(A.aborted=1,A.xhrMonitoringState.abortDone=!0)},hkErr:$r(k,h.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),u&&ce(XMLHttpRequest,"setRequestHeader",{req:function(v,E,A){var N=v.inst;Ke(N)&&pe(E)&&(N[We].requestHeaders[E]=A)},hkErr:$r(k,h.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),s=!0)}function et(v,E,A){var N=!1,F=((L(E)?E:(E||{}).url||"")||"").toLowerCase();if(R(M,function($){var ie=$;L($)&&(ie=new RegExp($)),N||(N=ie.test(F))}),N)return N;var V=br(F,"?"),j=br(F,"#");return(V===-1||j!==-1&&j<V)&&(V=j),V!==-1&&(F=F.substring(0,V)),S(v)?S(E)||(N=(typeof E=="object"?E[Ct]===!0:!1)||(A?A[Ct]===!0:!1)):N=v[Ct]===!0||F[Ct]===!0,N?T[F]||(T[F]=1):T[F]&&(N=!0),N}function Ke(v,E){var A=!0,N=s;return S(v)||(A=E===!0||!S(v[We])),N&&A}function tt(v,E,A,N){var F=f&&f.telemetryTrace&&f.telemetryTrace.traceID||Oe(),V=Oe().substr(0,16),j=new so(F,V,k[Kr]());j.method=E,j.requestUrl=A,j.xhrMonitoringState.openDone=!0,j.requestHeaders={},j.async=N,v[We]=j,p(v)}function p(v){v[We].xhrMonitoringState.stateChangeAttached=Pt.Attach(v,"readystatechange",function(){try{v&&v.readyState===4&&Ke(v)&&P(v)}catch(A){var E=U(A);(!E||br(E.toLowerCase(),"c00c023f")===-1)&&Xr(k,h.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Ln(v),exception:E})}})}function I(v){try{var E=v.responseType;if(E===""||E==="text")return v.responseText}catch(A){}return null}function P(v){var E=v[We];E.responseFinishedTime=yr(),E.status=v.status;function A(N,F){var V=F||{};V.ajaxDiagnosticsMessage=Ln(v),N&&(V.exception=U(N)),Un(k,h.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",V)}_("xmlhttprequest",E,function(){try{var N=E.CreateTrackItem("Ajax",u,function(){var F={statusText:v.statusText,headerMap:null,correlationContext:D(v),type:v.responseType,responseText:I(v),response:v.response};if(g){var V=v.getAllResponseHeaders();if(V){var j=se(V).split(/[\r\n]+/),$={};R(j,function(ie){var me=ie.split(": "),Le=me.shift(),nr=me.join(": ");pe(Le)&&($[Le]=nr)}),F.headerMap=$}}return F});N?k[n](N):A(null,{requestSentTime:E.requestSentTime,responseFinishedTime:E.responseFinishedTime})}finally{try{v[We]=null}catch(F){}}},function(N){A(N,null)})}function D(v){try{var E=v.getAllResponseHeaders();if(E!==null){var A=br(E.toLowerCase(),Z.requestContextHeaderLowerCase);if(A!==-1){var N=v.getResponseHeader(Z.requestContextHeader);return It.getCorrelationContext(N)}}}catch(F){Un(k,h.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Ln(v),exception:U(F)})}}function H(v,E){if(E.requestUrl&&w&&b){var A=ze();if(A&&z(A.mark)){ls++;var N=w+v+"#"+ls;A.mark(N);var F=A.getEntriesByName(N);F&&F.length===1&&(E.perfMark=F[0])}}}function _(v,E,A,N){var F=E.perfMark,V=ze(),j=a.maxAjaxPerfLookupAttempts,$=a.ajaxPerfLookupDelay,ie=E.requestUrl,me=0;(function Le(){try{if(V&&F){me++;for(var nr=null,Io=V.getEntries(),jn=Io.length-1;jn>=0;jn--){var vt=Io[jn];if(vt){if(vt.entryType==="resource")vt.initiatorType===v&&(br(vt.name,ie)!==-1||br(ie,vt.name)!==-1)&&(nr=vt);else if(vt.entryType==="mark"&&vt.name===F.name){E.perfTiming=nr;break}if(vt.startTime<F.startTime-1e3)break}}}!F||E.perfTiming||me>=j||E.async===!1?(F&&z(V.clearMarks)&&V.clearMarks(F.name),E.perfAttempts=me,A()):setTimeout(Le,$)}catch(ys){N(ys)}})()}function B(v,E){var A=f&&f.telemetryTrace&&f.telemetryTrace.traceID||Oe(),N=Oe().substr(0,16),F=new so(A,N,k[Kr]());F.requestSentTime=yr(),v instanceof Request?F.requestUrl=v?v.url:"":F.requestUrl=v;var V="GET";E&&E.method?V=E.method:v&&v instanceof Request&&(V=v.method),F.method=V;var j={};if(u){var $=new Headers((E?E.headers:0)||(v instanceof Request?v.headers||{}:{}));$.forEach(function(ie,me){pe(me)&&(j[me]=ie)})}return F.requestHeaders=j,H("fetch",F),F}function X(v){var E="";try{S(v)||(typeof v=="string"?E+="(url: '"+v+"')":E+="(url: '"+v.url+"')")}catch(A){Xr(k,h.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:U(A)})}return E}function ee(v,E,A,N,F,V){if(!N)return;function j($,ie,me){var Le=me||{};Le.fetchDiagnosticsMessage=X(A),ie&&(Le.exception=U(ie)),Un(k,$,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",Le)}N.responseFinishedTime=yr(),N.status=E,_("fetch",N,function(){var $=N.CreateTrackItem("Fetch",u,F);$?k[n]($):j(h.FailedMonitorAjaxDur,null,{requestSentTime:N.requestSentTime,responseFinishedTime:N.responseFinishedTime})},function($){j(h.FailedMonitorAjaxGetCorrelationHeader,$,null)})}function wt(v){if(v&&v.headers)try{var E=v.headers.get(Z.requestContextHeader);return It.getCorrelationContext(E)}catch(A){Un(k,h.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:X(v),exception:U(A)})}}}),r}return e.getDefaultConfig=function(){var r={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:Ye.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]};return r},e.getEmptyConfig=function(){var r=this.getDefaultConfig();return Y(r,function(n){r[n]=void 0}),r},e.prototype.processTelemetry=function(r,n){this.processNext(r,n)},e.identifier="AjaxDependencyPlugin",e}(at);var lo,fs=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"];var fo=function(){function t(e){var r=this;r._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var i=Bi(n.connectionString),o=i.ingestionendpoint;n.endpointUrl=o?o+"/v2/track":n.endpointUrl,n.instrumentationKey=i.instrumentationkey||n.instrumentationKey}r.appInsights=new eo,r.properties=new ao,r.dependencies=new uo,r.core=new Ei,r._sender=new io,r.snippet=e,r.config=n,r.getSKUDefaults()}return t.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},t.prototype.trackEvent=function(e,r){this.appInsights.trackEvent(e,r)},t.prototype.trackPageView=function(e){var r=e||{};this.appInsights.trackPageView(r)},t.prototype.trackPageViewPerformance=function(e){var r=e||{};this.appInsights.trackPageViewPerformance(r)},t.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},t.prototype._onerror=function(e){this.appInsights._onerror(e)},t.prototype.trackTrace=function(e,r){this.appInsights.trackTrace(e,r)},t.prototype.trackMetric=function(e,r){this.appInsights.trackMetric(e,r)},t.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},t.prototype.stopTrackPage=function(e,r,n,i){this.appInsights.stopTrackPage(e,r,n,i)},t.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,r,n){this.appInsights.stopTrackEvent(e,r,n)},t.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},t.prototype.setAuthenticatedUserContext=function(e,r,n){n===void 0&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,r,n)},t.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},t.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},t.prototype.flush=function(e){var r=this;e===void 0&&(e=!0),dt(this.core,function(){return"AISKU.flush"},function(){R(r.core.getTransmissionControls(),function(n){R(n,function(i){i.flush(e)})})},null,e)},t.prototype.onunloadFlush=function(e){e===void 0&&(e=!0),R(this.core.getTransmissionControls(),function(r){R(r,function(n){n.onunloadFlush?n.onunloadFlush():n.flush(e)})})},t.prototype.loadAppInsights=function(e,r,n){var i=this;e===void 0&&(e=!1);var o=this;function s(c){if(c){var a="";S(o._snippetVersion)||(a+=o._snippetVersion),e&&(a+=".lg"),o.context&&o.context.internal&&(o.context.internal.snippetVer=a||"-"),Y(o,function(u,l){L(u)&&!z(l)&&u&&u[0]!=="_"&&fs.indexOf(u)===-1&&(c[u]=l)})}}return e&&o.config.extensions&&o.config.extensions.length>0&&Pe("Extensions not allowed in legacy mode"),dt(o.core,function(){return"AISKU.loadAppInsights"},function(){var c=[];c.push(o._sender),c.push(o.properties),c.push(o.dependencies),c.push(o.appInsights),o.core.initialize(o.config,c,r,n),o.context=o.properties.context,lo&&o.context&&(o.context.internal.sdkSrc=lo),s(o.snippet),o.emptyQueue(),o.pollInternalLogs(),o.addHousekeepingBeforeUnload(i)}),o},t.prototype.updateSnippetDefinitions=function(e){ri(e,this,function(r){return r&&fs.indexOf(r)===-1})},t.prototype.emptyQueue=function(){var e=this;try{if(Ne(e.snippet.queue)){for(var r=e.snippet.queue.length,n=0;n<r;n++){var i=e.snippet.queue[n];i()}e.snippet.queue=void 0,delete e.snippet.queue}}catch(s){var o={};s&&z(s.toString)&&(o.exception=s.toString())}},t.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},t.prototype.addHousekeepingBeforeUnload=function(e){if(qt()||mn()){var r=function(){e.onunloadFlush(!1),R(e.appInsights.core._extensions,function(i){if(i.identifier===Ft)return i&&i.context&&i.context._sessionManager&&i.context._sessionManager.backup(),-1})};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=Dt("beforeunload",r);n=Dt("unload",r)||n,n=Dt("pagehide",r)||n,n=Dt("visibilitychange",r)||n,!n&&!di()&&e.appInsights.core.logger.throwInternal(y.CRITICAL,h.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(Dt("pagehide",r),Dt("visibilitychange",r))}},t.prototype.getSender=function(){return this._sender},t.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},t}();(function(){var t=null,e=!1,r=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(t=n.src)}catch(c){}if(t)try{var i=t.toLowerCase();if(i){for(var o="",s=0;s<r.length;s++)if(i.indexOf(r[s])!==-1){o="cdn"+(s+1),i.indexOf("/scripts/")===-1&&(i.indexOf("/next/")!==-1?o+="-next":i.indexOf("/beta/")!==-1&&(o+="-beta")),lo=o+(e?".mod":"");break}}}catch(c){}})();var ne=Ut(require("vscode")),Bc=Object.defineProperty,ds=Object.getOwnPropertySymbols,qc=Object.prototype.hasOwnProperty,Gc=Object.prototype.propertyIsEnumerable,ps=(t,e,r)=>e in t?Bc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e)=>{for(var r in e||(e={}))qc.call(e,r)&&ps(t,r,e[r]);if(ds)for(var r of ds(e))Gc.call(e,r)&&ps(t,r,e[r]);return t};function po(){return globalThis.telemetryOutputChannel===void 0&&(globalThis.telemetryOutputChannel=ne.window.createOutputChannel("Log (Extension Telemetry)")),globalThis.telemetryOutputChannel}var mo=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!i,this.updateUserOptStatus(),ne.env.onDidChangeTelemetryEnabled!==void 0?this.optOutListener=ne.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus()):this.optOutListener=ne.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus())}updateUserOptStatus(){let t=ne.workspace.getConfiguration(mo.TELEMETRY_CONFIG_ID),e=ne.env.isTelemetryEnabled===void 0?t.get(mo.TELEMETRY_CONFIG_ENABLED_ID,!0):ne.env.isTelemetryEnabled;this.userOptIn!==e&&(this.userOptIn=e)}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=ne.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.firstParty?this.cleanRemoteName(ne.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===ne.ExtensionKind.Workspace||ne.env.uiKind===ne.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,ne&&ne.env){switch(t["common.vscodemachineid"]=ne.env.machineId,t["common.vscodesessionid"]=ne.env.sessionId,t["common.vscodeversion"]=ne.version,t["common.isnewappinstall"]=ne.env.isNewAppInstall,ne.env.uiKind){case ne.UIKind.Web:t["common.uikind"]="web";break;case ne.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(ne.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];ne.env.appRoot!==""&&n.push(new RegExp(ne.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let u of n)for(;(r=u.exec(t))&&r;)o.push([r.index,u.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,c=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(r=c.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([u,l])=>r.index<u||r.index>=l)&&(i+=t.substring(a,r.index)+"<REDACTED: user-file-path>",a=c.lastIndex);a<t.length&&(i+=t.substr(a))}for(let o of n)i=i.replace(o,"");return i}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=mt(mt({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:n,measurements:r}),po().appendLine(`${this.extensionId}/${t} ${JSON.stringify({properties:n,measurements:r})}`)}}sendTelemetryErrorEvent(t,e,r,n){if(this.userOptIn&&t!==""){e=mt(mt({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:i,measurements:r}),po().appendLine(`${this.extensionId}/${t} ${JSON.stringify({properties:i,measurements:r})}`)}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.userOptIn&&t){e=mt(mt({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logException(t,{properties:n,measurements:r}),po().appendLine(`${this.extensionId}/${t.name} ${JSON.stringify({properties:n,measurements:r})}`)}}dispose(){return this.telemetryAppender.flush(),this.optOutListener.dispose()}},vo=mo;vo.TELEMETRY_CONFIG_ID="telemetry",vo.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry";var Wc=class{constructor(t){let e;t&&t.indexOf("AIF-")===0&&(e="https://vortex.data.microsoft.com/collect/v1"),this._aiClient=new fo({config:{instrumentationKey:t,endpointUrl:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0}}),this._aiClient.loadAppInsights(),e&&fetch(e).catch(()=>this._aiClient=void 0)}logEvent(t,e){!this._aiClient||this._aiClient.trackEvent({name:t},mt(mt({},e.properties),e.measurements))}logException(t,e){!this._aiClient||this._aiClient.trackException({exception:t,properties:mt(mt({},e.properties),e.measurements)})}flush(){return this._aiClient&&(this._aiClient.flush(),this._aiClient=void 0),Promise.resolve(void 0)}},ms=class extends vo{constructor(t,e,r,n){let i=new Wc(r);r&&r.indexOf("AIF-")===0&&(n=!0),super(t,e,i,{release:navigator.appVersion,platform:"web"},n)}};var Mt=Ut(require("vscode"));var vs=Ut(require("vscode"));function On(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}async function gs(){return vs.window.showInputBox({placeHolder:"Enter offset to go to",validateInput:t=>t.length>8||new RegExp("^[a-fA-F0-9]+$").test(t)?null:"Invalid offset string"})}var go=class{constructor(e){this._extensionURI=e}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},e.webview.html=this._getWebviewHTML(e.webview),e.webview.onDidReceiveMessage(i=>{i.type==="ready"&&e.show()}),this._view.onDidDispose(()=>this._view=void 0),e.onDidChangeVisibility(()=>{e.visible&&this._lastMessage&&e.webview.postMessage(this._lastMessage)}),this._lastMessage&&e.webview.postMessage(this._lastMessage)}handleEditorMessage(e){var r;this._lastMessage=e,(r=this._view)==null||r.webview.postMessage(e)}show(e){var r;(e==null?void 0:e.autoReveal)&&!Mt.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!(e==null?void 0:e.forceFocus)?this._view.show():Mt.commands.executeCommand(`${go.viewType}.focus`),this._lastMessage&&((r=this._view)==null||r.webview.postMessage(this._lastMessage)))}_getWebviewHTML(e){let r=e.asWebviewUri(Mt.Uri.joinPath(this._extensionURI,"dist","inspector.js")),n=e.asWebviewUri(Mt.Uri.joinPath(this._extensionURI,"dist","inspector.css")),i=Mt.workspace.getConfiguration().get("hexeditor.defaultEndianness"),o=On();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src 'nonce-${o}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${n}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
                  <div class="grid-item">
                    <label for="binary8">8 bit Binary</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="binary8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int8">Int8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint8">UInt8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int16">Int16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint16">UInt16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int24">Int24</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int24" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint24">UInt24</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint24" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int32">Int32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint32">UInt32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="int64">Int64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="int64" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="uint64">UInt64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="uint64" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="utf8">UTF-8</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="utf8" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="utf16">UTF-16</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="utf16" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="float32">Float 32</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="float32" readonly/>
                  </div>
                  <div class="grid-item">
                    <label for="float64">Float 64</label>
                  </div>
                  <div class="grid-item">
                    <input type="text" autocomplete="off" spellcheck="off" id="float64" readonly/>
                  </div>
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${i==="little"?"selected":""}>Little Endian</option>
                      <option value="big" ${i==="big"?"selected":""}>Big Endian</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${o}" src="${r}"><\/script>
            </body>
            </html>`}},Yr=go;Yr.viewType="hexEditor.dataInspectorView";var ae=Ut(require("vscode"));var Ee=Ut(require("vscode"));function ho(t){for(;t.length;){let e=t.pop();e&&e.dispose()}}var xo=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,ho(this._disposables))}_register(e){return this._isDisposed?e.dispose():this._disposables.push(e),e}get isDisposed(){return this._isDisposed}};var _t=class{constructor(e){this._cancelled=!1;this._documentDataWithEdits=e.documentDataWithEdits}async textSearch(e,r){let n={result:[],partial:!1};return r.regex?new Promise(i=>{this.regexTextSearch(e,r.caseSensitive,n,String.fromCharCode.apply(null,Array.from(this._documentDataWithEdits)),i)}):new Promise(i=>{this.normalTextSearch(e,r.caseSensitive,0,n,i)})}async hexSearch(e){let r={result:[],partial:!1};return new Promise(n=>{this.normalHexSearch(e,0,r,n)})}normalHexSearch(e,r,n,i){let o=Date.now();for(;r<this._documentDataWithEdits.length;r++){let s=[];for(let c=0;c<e.length;c++){if(r+c>=this._documentDataWithEdits.length){i(n);return}let a=this._documentDataWithEdits[r+c].toString(16).toUpperCase();a=a.length!==2?"0"+a:a;let u=e[c].toUpperCase();if(u==="??"||u===a)s.push(r+c);else break}if(s.length===e.length&&(n.result.push(s),n.result.length===_t._searchResultLimit)){n.partial=!0,i(n);return}if(this._cancelled){this._cancelled=!1,n.partial=!0,i(n);return}if(Date.now()-o>_t._interruptTime){setImmediate(()=>this.normalHexSearch(e,r,n,i));return}}i(n)}regexTextSearch(e,r,n,i,o){let s=Date.now(),c=r?"g":"gi",a=new RegExp(e,c),u;for(;(u=a.exec(i))!==null;){if(u.index===void 0)continue;let l=[];for(let f=u.index;f<u.index+u[0].length;f++)l.push(f);if(n.result.push(l),this._cancelled){this._cancelled=!1,n.partial=!0,o(n);return}if(Date.now()-s>_t._interruptTime){setImmediate(()=>this.regexTextSearch(e,r,n,i,o));return}if(n.result.length===_t._searchResultLimit){n.partial=!0,o(n);return}}o(n)}normalTextSearch(e,r,n,i,o){let s=Date.now();for(;n<this._documentDataWithEdits.length;n++){let c=[];for(let a=0;a<e.length;a++){if(n+a>=this._documentDataWithEdits.length){o(i);return}let u=String.fromCharCode(this._documentDataWithEdits[n+a]),l=e[a];if(r||(u=u.toUpperCase(),l=l.toUpperCase()),l===u)c.push(n+a);else break}if(c.length===e.length&&(i.result.push(c),i.result.length===_t._searchResultLimit)){i.partial=!0,o(i);return}if(this._cancelled){this._cancelled=!1,i.partial=!0,o(i);return}if(Date.now()-s>_t._interruptTime){setImmediate(this.normalTextSearch.bind(this),e,r,n,i,o);return}}o(i)}cancelSearch(){this._cancelled=!0}},Zr=_t;Zr._searchResultLimit=1e5,Zr._interruptTime=100;var yo=class{constructor(e){this._document=e}createNewRequest(){return this._request=new Zr(this._document),this._request}cancelRequest(){this._request!==void 0&&(this._request.cancelSearch(),this._request=void 0)}};var So=Ut(require("vscode")),Hn=class{static async getFileSize(e,r){var n;return e.scheme==="untitled"?(n=r==null?void 0:r.length)!=null?n:0:(await So.workspace.fs.stat(e)).size}static async readFile(e,r){return e.scheme==="untitled"?r!=null?r:new Uint8Array:So.workspace.fs.readFile(e)}};function hs(t,e){if(t===void 0||e===void 0)return t===e;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],i=e[r];if(n.offset!==i.offset||n.oldValue!=i.oldValue||n.newValue!=i.newValue)return!1}return!0}var tr=class extends xo{constructor(e,r,n,i,o){super();this._edits=[];this._unsavedEdits=[];this.lastSave=Date.now();this._onDidDispose=this._register(new Ee.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidChangeDocument=this._register(new Ee.EventEmitter);this.onDidChangeContent=this._onDidChangeDocument.event;this._onDidChange=this._register(new Ee.EventEmitter);this.onDidChange=this._onDidChange.event;this._uri=e,this._documentData=r,this._bytesize=n,this._baseAddress=o,this._unsavedEdits=i,this._edits=Array.from(i),this.searchProvider=new yo(this)}static async create(e,r,n){let i=r.backupId,o=typeof i=="string"?Ee.Uri.parse(i):e,s=typeof i=="string"?Ee.Uri.parse(i+".json"):void 0,c=await Hn.getFileSize(e,r.untitledDocumentData),a=tr.parseQuery(e.query),u=a.baseAddress?tr.parseHexOrDecInt(a.baseAddress):0;n.sendTelemetryEvent("fileOpen",{},{fileSize:c});let l,f=Ee.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,m=[];if(c>f&&!i)l=new Uint8Array;else if(l=await Hn.readFile(o,r.untitledDocumentData),s){let C=await Ee.workspace.fs.readFile(s);m=JSON.parse(Buffer.from(C).toString("utf-8"))}return new tr(e,l,c,m,u)}get uri(){return this._uri}get filesize(){let e=0;return this.unsavedEdits.flat().forEach(r=>{r.newValue!==void 0&&r.oldValue===void 0?e++:r.oldValue!==void 0&&r.newValue===void 0&&r.offset<this._bytesize&&e--}),this._bytesize+e}get baseAddress(){return this._baseAddress}get documentData(){return this._documentData}get documentDataWithEdits(){let e=Array.from(this.documentData),r=this._unsavedEdits.flat(),n=[];for(let i of r)i.oldValue!==void 0&&i.newValue!==void 0?e[i.offset]=i.newValue:i.oldValue===void 0&&i.newValue!==void 0?e.push(i.newValue):n.push(i.offset);n=n.sort((i,o)=>o-i);for(let i of n)e.splice(i,1);return e}dispose(){this._onDidDispose.fire(),super.dispose()}async openAnyways(){this._documentData=await Ee.workspace.fs.readFile(this.uri)}get unsavedEdits(){return this._unsavedEdits}makeEdit(e){e.forEach(r=>r.sameOnDisk=!1),this._edits.push(e),this._unsavedEdits.push(e),this._onDidChange.fire({undo:async()=>{let r=this._edits.pop();if(!r)return;let n=!1;hs(this._unsavedEdits[this._unsavedEdits.length-1],r)&&(this._unsavedEdits.pop(),n=!0);let i=[];for(let o of r)o.sameOnDisk=o.oldValue!==void 0&&o.oldValue===this.documentData[o.offset]||!1,!o.sameOnDisk&&!n&&i.push({newValue:o.oldValue,oldValue:o.newValue,offset:o.offset,sameOnDisk:o.sameOnDisk});i.length!==0&&this._unsavedEdits.push(i),this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"undo",edits:r})},redo:async()=>{this._edits.push(e);let r=e;if(this._unsavedEdits[this._unsavedEdits.length-1]!==void 0){let i=this._unsavedEdits[this._unsavedEdits.length-1].slice(0);i=i.map(o=>(o.newValue===void 0&&o.oldValue!==void 0&&(o.newValue=o.oldValue,o.oldValue=void 0),o)),hs(i,r)&&this._unsavedEdits.pop()}let n=[];for(let i of r)i.sameOnDisk=i.offset<this._bytesize&&i.newValue===this.documentData[i.offset]||!1,i.sameOnDisk||n.push(i);n.length!==0&&this._unsavedEdits.push(n),this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"redo",edits:r})}})}async save(e){await this.saveAs(this.uri,e)}async saveAs(e,r){this._documentData=new Uint8Array(this.documentDataWithEdits),this._bytesize=this.documentData.length;let n=this.documentData;r&&r.isCancellationRequested||(await Ee.workspace.fs.writeFile(e,n),this.lastSave=Date.now(),this._unsavedEdits=[])}async revert(e){let r=await Ee.workspace.fs.readFile(this.uri);this._bytesize=r.length,this._documentData=r,this._unsavedEdits=[],this._edits=[],this._onDidChangeDocument.fire({fileSize:this.filesize,baseAddress:this.baseAddress,type:"revert",edits:[]})}async backup(e,r){return await this.saveAs(e,r),await Ee.workspace.fs.writeFile(Ee.Uri.parse(e.path+".json"),Buffer.from(JSON.stringify(this.unsavedEdits),"utf-8")),{id:e.toString(),delete:async()=>{try{await Ee.workspace.fs.delete(e),await Ee.workspace.fs.delete(Ee.Uri.parse(e.path+".json"))}catch(n){}}}}replace(e,r,n){let i=[],o=this.documentDataWithEdits;for(let s of r){let c=[];for(let a=0;a<e.length&&a<s.length;a++){if(n){let u=String.fromCharCode(e[a]),l=String.fromCharCode(o[s[a]]);l.toUpperCase()===l&&l.toLowerCase()!=l?e[a]=u.toUpperCase().charCodeAt(0):l.toLowerCase()===l&&l.toUpperCase()!=l&&(e[a]=u.toLowerCase().charCodeAt(0))}if(e[a]!==o[s[a]]){let u={oldValue:o[s[a]],newValue:e[a],offset:s[a],sameOnDisk:!1};c.push(u),i.push(u)}}}return i.length!==0&&this.makeEdit(i),i}static parseQuery(e){let r={};if(e){let n=(e[0]==="?"?e.substr(1):e).split("&");for(let i of n){let o=i.split("="),s=o.shift();s&&(r[s]=o.join("="))}}return r}static parseHexOrDecInt(e){return e=e.toLowerCase(),e.startsWith("0x")?parseInt(e.substring(2),16):parseInt(e,10)}};var Co=class{constructor(){this._webviews=new Set}*get(e){let r=e.toString();for(let n of this._webviews)n.resource===r&&(yield n.webviewPanel)}add(e,r){let n={resource:e.toString(),webviewPanel:r};this._webviews.add(n),r.onDidDispose(()=>{this._webviews.delete(n)})}};var rr=class{constructor(e,r,n){this._context=e;this._telemetryReporter=r;this._dataInspectorView=n;this.webviews=new Co;this._onDidChangeCustomDocument=new ae.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event;this._requestId=1;this._callbacks=new Map}static register(e,r,n){return ae.window.registerCustomEditorProvider(rr.viewType,new rr(e,r,n),{supportsMultipleEditorsPerDocument:!1})}async openCustomDocument(e,r,n){let i=await tr.create(e,r,this._telemetryReporter),o=[];o.push(i.onDidChange(c=>{this._onDidChangeCustomDocument.fire({document:i,...c})})),o.push(i.onDidChangeContent(c=>{for(let a of this.webviews.get(i.uri))this.postMessage(a,"update",{fileSize:c.fileSize,baseAddress:c.baseAddress,type:c.type,edits:c.edits})}));let s=ae.workspace.createFileSystemWatcher(e.fsPath);return o.push(s),o.push(s.onDidChange(c=>{if(c.fsPath===e.fsPath)if(i.unsavedEdits.length>0){let a="This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes.";ae.window.showWarningMessage(a,"Overwrite","Revert").then(u=>{u==="Overwrite"?ae.commands.executeCommand("workbench.action.files.save"):u==="Revert"&&ae.commands.executeCommand("workbench.action.files.revert")})}else Date.now()-i.lastSave<500||i.revert()})),o.push(s.onDidDelete(c=>{c.toString()===e.toString()&&ae.window.showWarningMessage("This file has been deleted! Saving now will create a new file on disk.","Overwrite","Close Editor").then(a=>{a==="Overwrite"?ae.commands.executeCommand("workbench.action.files.save"):a==="Close Editor"&&ae.commands.executeCommand("workbench.action.closeActiveEditor")})})),i.onDidDispose(()=>{ae.commands.executeCommand("setContext","hexEditor:openEditor",!1),ho(o)}),i}async resolveCustomEditor(e,r,n){this.webviews.add(e.uri,r),rr.currentWebview=r.webview,ae.commands.executeCommand("setContext","hexEditor:openEditor",!0),this._dataInspectorView.show({autoReveal:!0}),r.webview.options={enableScripts:!0},r.webview.html=this.getHtmlForWebview(r.webview),r.onDidChangeViewState(i=>{ae.commands.executeCommand("setContext","hexEditor:openEditor",i.webviewPanel.visible),i.webviewPanel.visible?(rr.currentWebview=i.webviewPanel.webview,this._dataInspectorView.show({autoReveal:!0,forceFocus:!0})):rr.currentWebview=void 0}),r.webview.onDidReceiveMessage(i=>this.onMessage(r,e,i)),r.webview.onDidReceiveMessage(i=>{i.type==="ready"&&this.postMessage(r,"init",{fileSize:e.filesize,editorFontSize:ae.workspace.getConfiguration("editor").get("fontSize"),baseAddress:e.baseAddress,html:e.documentData.length===e.filesize||e.unsavedEdits.length!=0?this.getBodyHTML():void 0})}),r.webview.onDidReceiveMessage(async i=>{i.type=="open-anyways"&&(await e.openAnyways(),this.postMessage(r,"init",{fileSize:e.filesize,editorFontSize:ae.workspace.getConfiguration("editor").get("fontSize"),baseAddress:e.baseAddress,html:this.getBodyHTML()}))})}saveCustomDocument(e,r){for(let n of this.webviews.get(e.uri))this.postMessage(n,"save",{});return e.save(r)}saveCustomDocumentAs(e,r,n){return e.saveAs(r,n)}revertCustomDocument(e,r){return e.revert(r)}backupCustomDocument(e,r,n){return e.backup(r.destination,n)}getHtmlForWebview(e){let r=e.asWebviewUri(ae.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),n=e.asWebviewUri(ae.Uri.joinPath(this._context.extensionUri,"dist","hexEdit.css")),i=e.asWebviewUri(ae.Uri.joinPath(this._context.extensionUri,"node_modules","@vscode","codicons","dist","codicon.css")),o=On();return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${e.cspSource} blob:; font-src ${e.cspSource}; style-src ${e.cspSource}; script-src 'nonce-${o}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${n}" rel="stylesheet" />
				<link href="${i}" rel="stylesheet" />
				<script nonce="${o}" src="${r}" defer><\/script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}getBodyHTML(){return`
		<div class="column left">
			<div class="header" aria-hidden="true">00000000</div>
			<div class="rowwrapper" id="hexaddr">
			</div>
		</div>
		<div id="editor-container">
			<div class="column middle">
				<div class="header">
					<span>00</span><span>01</span><span>02</span><span>03</span><span>04</span><span>05</span><span>06</span><span>07</span><span>08</span><span>09</span><span>0A</span><span>0B</span><span>0C</span><span>0D</span><span>0E</span><span>0F</span>
				</div>
				<div class="rowwrapper" id="hexbody">
				</div>
			</div>
			<div class="column right">
				<div class="header">DECODED TEXT</div>
				<div class="rowwrapper" id="ascii">
				</div>
			</div>
			<div id="scrollbar">
				<div role="scrollbar" id="scroll-thumb">
				</div>
			</div>
		</div>
		<div id="search-container">
		</div>
		`}postMessageWithResponse(e,r,n){let i=this._requestId++,o=new Promise(s=>this._callbacks.set(i,s));return e.webview.postMessage({type:r,requestId:i,body:n}),o}postMessage(e,r,n){e.webview.postMessage({type:r,body:n})}async onMessage(e,r,n){switch(n.type){case"packet":let i=n.body,o=Array.from(r.documentData.slice(i.initialOffset,i.initialOffset+i.numElements)),s=[];r.unsavedEdits.flat().forEach(u=>{u.offset>=i.initialOffset&&u.offset<i.initialOffset+i.numElements&&(s.push(u),u.oldValue===void 0&&u.newValue!==void 0&&o.push(u.newValue))}),e.webview.postMessage({type:"packet",requestId:n.requestId,body:{fileSize:r.filesize,baseAddress:r.baseAddress,data:o,offset:i.initialOffset,edits:s}});return;case"edit":r.makeEdit(n.body),e.webview.postMessage({type:"edit",requestId:n.requestId,body:{fileSize:r.filesize,baseAddress:r.baseAddress}});return;case"search":if(n.body.cancel){r.searchProvider.cancelRequest();return}let c;n.body.type==="ascii"?c=await r.searchProvider.createNewRequest().textSearch(n.body.query,n.body.options):c=await r.searchProvider.createNewRequest().hexSearch(n.body.query),c!==void 0&&e.webview.postMessage({type:"search",requestId:n.requestId,body:{results:c}});return;case"replace":let a=r.replace(n.body.query,n.body.offsets,n.body.preserveCase);e.webview.postMessage({type:"replace",requestId:n.requestId,body:{edits:a}});return;case"dataInspector":this._dataInspectorView.handleEditorMessage(n.body)}}},Dr=rr;Dr.viewType="hexEditor.hexedit";var xs="ms-vscode.hexeditor",zn;function Kc(t){let e=Lt.extensions.getExtension(t).packageJSON;return{version:e.version,aiKey:e.aiKey}}function Jc(t){let e=new Yr(t.extensionUri),r=Kc(xs);t.subscriptions.push(Lt.window.registerWebviewViewProvider(Yr.viewType,e)),zn=new ms(xs,r.version,r.aiKey);let n=Lt.commands.registerTextEditorCommand("hexEditor.openFile",o=>{Lt.commands.executeCommand("vscode.openWith",o.document.uri,"hexEditor.hexedit")}),i=Lt.commands.registerCommand("hexEditor.goToOffset",async()=>{let o=await gs();o&&Dr.currentWebview&&Dr.currentWebview.postMessage({type:"goToOffset",body:{offset:o}})});t.subscriptions.push(i),t.subscriptions.push(n),t.subscriptions.push(zn),t.subscriptions.push(Dr.register(t,zn,e))}function Xc(){zn.dispose()}
/*!
 * Microsoft Dynamic Proto Utility, 1.1.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
